// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'avro' 1`] = `
{
  "key": "concerto@1.0.0.avdl",
  "value": "@namespace("concerto@1.0.0")
protocol MyProtocol {

   
   record Concept {
   }

   record Asset {
      string _identifier;
   }

   record Participant {
      string _identifier;
   }

   record Transaction {
      @logicalType("timestamp-micros")
      long _timestamp;
   }

   record Event {
      @logicalType("timestamp-micros")
      long _timestamp;
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'avro' 2`] = `
{
  "key": "concerto.avdl",
  "value": "@namespace("concerto")
protocol MyProtocol {

   
   record Concept {
   }

   record Asset {
      string _identifier;
   }

   record Participant {
      string _identifier;
   }

   record Transaction {
   }

   record Event {
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'avro' 3`] = `
{
  "key": "org.acme.hr.base.avdl",
  "value": "@namespace("org.acme.hr.base")
protocol MyProtocol {

   import idl "concerto@1.0.0.avdl";
   
   enum State {
      MA,
      NY,
      CO,
      WA,
      IL,
      CA
   }

   enum TShirtSizeType {
      SMALL,
      MEDIUM,
      LARGE
   }

   record Address {
      string street;
      string city;
      union { null, State } state;
      string zipCode;
      string country;
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'avro' 4`] = `
{
  "key": "org.acme.hr.avdl",
  "value": "@namespace("org.acme.hr")
protocol MyProtocol {

   import idl "org.acme.hr.base.avdl";
   import idl "concerto@1.0.0.avdl";
   
   record Company {
      string name;
      Address headquarters;
      union { null, CompanyProperties } companyProperties;
      union { null, EmployeeDirectory } employeeDirectory;
      union { null, EmployeeTShirtSizes } employeeTShirtSizes;
      union { null, EmployeeProfiles } employeeProfiles;
      union { null, EmployeeSocialSecurityNumbers } employeeSocialSecurityNumbers;
   }

   enum Department {
      Sales,
      Marketing,
      Finance,
      HR,
      Engineering,
      Design
   }

   record Equipment {
      string serialNumber;
   }

   enum LaptopMake {
      Apple,
      Microsoft
   }

   record Laptop {
      LaptopMake make;
      string serialNumber;
   }

   record Person {
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record Employee {
      string employeeId;
      long salary;
      int numDependents;
      boolean retired;
      Department department;
      Address officeAddress;
      array<Equipment> companyAssets;
      union { null, string } manager;
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record Contractor {
      Company company;
      union { null, string } manager;
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record Manager {
      union { null, array<string> } reports;
      string employeeId;
      long salary;
      int numDependents;
      boolean retired;
      Department department;
      Address officeAddress;
      array<Equipment> companyAssets;
      union { null, string } manager;
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record CompanyEvent {
      @logicalType("timestamp-micros")
      long _timestamp;
   }

   record Onboarded {
      string employee;
      @logicalType("timestamp-micros")
      long _timestamp;
   }

   record ChangeOfAddress {
      string Person;
      Address newAddress;
      @logicalType("timestamp-micros")
      long _timestamp;
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'csharp' 1`] = `
{
  "key": "concerto@1.0.0.cs",
  "value": "namespace AccordProject.Concerto;
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Concept")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public virtual string _class { get; } = "concerto@1.0.0.Concept";
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Asset")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Asset : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Asset";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Participant")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Participant : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Participant";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Transaction")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Transaction : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Transaction";
   [System.Text.Json.Serialization.JsonPropertyName("$timestamp")]
   public System.DateTime _timestamp { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Event")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Event : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Event";
   [System.Text.Json.Serialization.JsonPropertyName("$timestamp")]
   public System.DateTime _timestamp { get; set; }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'csharp' 2`] = `
{
  "key": "concerto.cs",
  "value": "namespace AccordProject.Concerto;
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Concept")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public virtual string _class { get; } = "concerto.Concept";
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Asset")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Asset : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Asset";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Participant")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Participant : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Participant";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Transaction")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Transaction : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Transaction";
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Event")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Event : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Event";
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'csharp' 3`] = `
{
  "key": "org.acme.hr.base.cs",
  "value": "namespace org.acme.hr.base;
using AccordProject.Concerto;
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum State {
      MA,
      NY,
      CO,
      WA,
      IL,
      CA,
}
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum TShirtSizeType {
      SMALL,
      MEDIUM,
      LARGE,
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr.base", Version = null, Name = "Address")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Address : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.base.Address";
   public string street { get; set; }
   public string city { get; set; }
   public State? state { get; set; }
   public string zipCode { get; set; }
   public string country { get; set; }
}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class Time_Dummy {}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class SSN_Dummy {}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'csharp' 4`] = `
{
  "key": "org.acme.hr.cs",
  "value": "namespace org.acme.hr;
using org.acme.hr.base;
using AccordProject.Concerto;
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Company")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Company : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Company";
   public string name { get; set; }
   public org.acme.hr.base.Address headquarters { get; set; }
   public Dictionary<string, string> companyProperties { get; set; }
   public Dictionary<string, Employee> employeeDirectory { get; set; }
   public Dictionary<string, TShirtSizeType> employeeTShirtSizes { get; set; }
   public Dictionary<string, Concept> employeeProfiles { get; set; }
   public Dictionary<string, SSN> employeeSocialSecurityNumbers { get; set; }
}
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum Department {
      Sales,
      Marketing,
      Finance,
      HR,
      Engineering,
      Design,
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Equipment")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Equipment : Asset {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Equipment";
   [AccordProject.Concerto.Identifier()]
   public string serialNumber { get; set; }
}
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum LaptopMake {
      Apple,
      Microsoft,
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Laptop")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Laptop : Equipment {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Laptop";
   public LaptopMake make { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Person")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Person : Participant {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Person";
   [AccordProject.Concerto.Identifier()]
   public string email { get; set; }
   public string firstName { get; set; }
   public string lastName { get; set; }
   public string? middleNames { get; set; }
   public org.acme.hr.base.Address homeAddress { get; set; }
   [System.ComponentModel.DataAnnotations.RegularExpression(@"\\d{3}-\\d{2}-\\{4}+", ErrorMessage = "Invalid characters")]
   public string ssn { get; set; }
   public float height { get; set; }
   public System.DateTime dob { get; set; }
   public Dictionary<string, KinTelephone> nextOfKin { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Employee")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Employee : Person {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Employee";
   public string employeeId { get; set; }
   public long salary { get; set; }
   public int numDependents { get; set; }
   public bool retired { get; set; }
   public Department department { get; set; }
   public org.acme.hr.base.Address officeAddress { get; set; }
   public Equipment[] companyAssets { get; set; }
   public Manager manager { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Contractor")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Contractor : Person {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Contractor";
   public Company company { get; set; }
   public Manager manager { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Manager")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Manager : Employee {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Manager";
   public Person[] reports { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "CompanyEvent")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class CompanyEvent : Event {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.CompanyEvent";
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "Onboarded")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Onboarded : CompanyEvent {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.Onboarded";
   public Employee employee { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = null, Name = "ChangeOfAddress")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class ChangeOfAddress : Transaction {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.ChangeOfAddress";
   public Person Person { get; set; }
   public org.acme.hr.base.Address newAddress { get; set; }
}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class KinName_Dummy {}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class KinTelephone_Dummy {}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'golang' 1`] = `
{
  "key": "concerto@1.0.0.go",
  "value": "// Package concerto_1_0_0 contains domain objects and was generated from Concerto namespace concerto@1.0.0.
package concerto_1_0_0
import "time"
   
type Concept struct {
}
type Asset struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Participant struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Transaction struct {
   Concept
   Timestamp time.Time \`json:"$timestamp"\`
}
type Event struct {
   Concept
   Timestamp time.Time \`json:"$timestamp"\`
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'golang' 2`] = `
{
  "key": "concerto.go",
  "value": "// Package concerto contains domain objects and was generated from Concerto namespace concerto.
package concerto
   
type Concept struct {
}
type Asset struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Participant struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Transaction struct {
   Concept
}
type Event struct {
   Concept
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'golang' 3`] = `
{
  "key": "org.acme.hr.base.go",
  "value": "// Package org_acme_hr_base contains domain objects and was generated from Concerto namespace org.acme.hr.base.
package org_acme_hr_base
import "concerto_1_0_0";
   
type State int
const (
   MA State = 1 + iota
   NY
   CO
   WA
   IL
   CA
)
type TShirtSizeType int
const (
   SMALL TShirtSizeType = 1 + iota
   MEDIUM
   LARGE
)
type Address struct {
   concerto_1_0_0.Concept
   Street string \`json:"street"\`
   City string \`json:"city"\`
   State State \`json:"state"\`
   ZipCode string \`json:"zipCode"\`
   Country string \`json:"country"\`
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'golang' 4`] = `
{
  "key": "org.acme.hr.go",
  "value": "// Package org_acme_hr contains domain objects and was generated from Concerto namespace org.acme.hr.
package org_acme_hr
import "time"
import "org_acme_hr_base";
import "concerto_1_0_0";
   
type Company struct {
   concerto_1_0_0.Concept
   Name string \`json:"name"\`
   Headquarters Address \`json:"headquarters"\`
   companyProperties := make(map[string]string) \`json:"companyProperties"\`
   employeeDirectory := make(map[string]Employee) \`json:"employeeDirectory"\`
   employeeTShirtSizes := make(map[string]TShirtSizeType) \`json:"employeeTShirtSizes"\`
   employeeProfiles := make(map[string]Concept) \`json:"employeeProfiles"\`
   employeeSocialSecurityNumbers := make(map[string]string) \`json:"employeeSocialSecurityNumbers"\`
}
type Department int
const (
   Sales Department = 1 + iota
   Marketing
   Finance
   HR
   Engineering
   Design
)
type Equipment struct {
   concerto_1_0_0.Asset
   SerialNumber string \`json:"serialNumber"\`
}
type LaptopMake int
const (
   Apple LaptopMake = 1 + iota
   Microsoft
)
type Laptop struct {
   Equipment
   Make LaptopMake \`json:"make"\`
}
type Person struct {
   concerto_1_0_0.Participant
   Email string \`json:"email"\`
   FirstName string \`json:"firstName"\`
   LastName string \`json:"lastName"\`
   MiddleNames string \`json:"middleNames"\`
   HomeAddress Address \`json:"homeAddress"\`
   Ssn string \`json:"ssn"\`
   Height float64 \`json:"height"\`
   Dob time.Time \`json:"dob"\`
   nextOfKin := make(map[string]time.Time) \`json:"nextOfKin"\`
}
type Employee struct {
   Person
   EmployeeId string \`json:"employeeId"\`
   Salary int64 \`json:"salary"\`
   NumDependents int32 \`json:"numDependents"\`
   Retired bool \`json:"retired"\`
   Department Department \`json:"department"\`
   OfficeAddress Address \`json:"officeAddress"\`
   CompanyAssets []Equipment \`json:"companyAssets"\`
   Manager *Manager \`json:"manager"\`
}
type Contractor struct {
   Person
   Company Company \`json:"company"\`
   Manager *Manager \`json:"manager"\`
}
type Manager struct {
   Employee
   Reports []*Person \`json:"reports"\`
}
type CompanyEvent struct {
   concerto_1_0_0.Event
}
type Onboarded struct {
   CompanyEvent
   Employee *Employee \`json:"employee"\`
}
type ChangeOfAddress struct {
   concerto_1_0_0.Transaction
   Person *Person \`json:"Person"\`
   NewAddress Address \`json:"newAddress"\`
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'graphql' 1`] = `
{
  "key": "model.gql",
  "value": "directive @resource on OBJECT | FIELD_DEFINITION
scalar DateTime
# namespace org.acme.hr.base
enum State {
   MA
   NY
   CO
   WA
   IL
   CA
}
enum TShirtSizeType {
   SMALL
   MEDIUM
   LARGE
}
type EmployeeTShirtSizes {
   key: SSN
   value: TShirtSizeType
}
type Address {
   street: String!
   city: String!
   state: State
   zipCode: String!
   country: String!
}
# namespace org.acme.hr
type CompanyProperties {
   key: String
   value: String
}
type EmployeeLoginTimes {
   key: String
   value: Time
}
type EmployeeSocialSecurityNumbers {
   key: String
   value: SSN
}
type NextOfKin {
   key: KinName
   value: KinTelephone
}
type EmployeeProfiles {
   key: String
   value: Concept
}
type EmployeeDirectory {
   key: SSN
   value: Employee
}
type Company {
   name: String!
   headquarters: Address!
   companyProperties: CompanyProperties
   employeeDirectory: EmployeeDirectory
   employeeTShirtSizes: EmployeeTShirtSizes
   employeeProfiles: EmployeeProfiles
   employeeSocialSecurityNumbers: EmployeeSocialSecurityNumbers
}
enum Department {
   Sales
   Marketing
   Finance
   HR
   Engineering
   Design
}
type Equipment @resource {
   serialNumber: String!
   _identifier: String!
}
enum LaptopMake {
   Apple
   Microsoft
}
type Laptop {
   make: LaptopMake!
   serialNumber: String!
   _identifier: String!
}
type Person @resource {
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type Employee {
   employeeId: String!
   salary: Int!
   numDependents: Int!
   retired: Boolean!
   department: Department!
   officeAddress: Address!
   companyAssets: [Equipment]!
   manager: ID # Manager
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type Contractor {
   company: Company!
   manager: ID # Manager
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type Manager {
   reports: [ID] # Person
   employeeId: String!
   salary: Int!
   numDependents: Int!
   retired: Boolean!
   department: Department!
   officeAddress: Address!
   companyAssets: [Equipment]!
   manager: ID # Manager
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type CompanyEvent {
   _timestamp: DateTime!
}
type Onboarded {
   employee: ID! # Employee
   _timestamp: DateTime!
}
type ChangeOfAddress {
   Person: ID! # Person
   newAddress: Address!
   _timestamp: DateTime!
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 1`] = `
{
  "key": "concerto/Concept.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public abstract class Concept {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 2`] = `
{
  "key": "concerto/Asset.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "$identifier")
public abstract class Asset extends Concept {
   private String $id;
            @JsonProperty("$id")
            public String get$id() {
                return $id;
            }
            @JsonProperty("$id")
            public void set$id(String i) {
                $id = i;
            }
   
   // the accessor for the identifying field
   public String getID() {
      return this.get$identifier();
   }

   private String $identifier;
   public String get$identifier() {
      return this.$identifier;
   }
   public void set$identifier(String $identifier) {
      this.$identifier = $identifier;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 3`] = `
{
  "key": "concerto/Participant.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "$identifier")
public abstract class Participant extends Concept {
   private String $id;
            @JsonProperty("$id")
            public String get$id() {
                return $id;
            }
            @JsonProperty("$id")
            public void set$id(String i) {
                $id = i;
            }
   
   // the accessor for the identifying field
   public String getID() {
      return this.get$identifier();
   }

   private String $identifier;
   public String get$identifier() {
      return this.$identifier;
   }
   public void set$identifier(String $identifier) {
      this.$identifier = $identifier;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 4`] = `
{
  "key": "concerto/Transaction.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public abstract class Transaction extends Concept {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 5`] = `
{
  "key": "concerto/Event.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public abstract class Event extends Concept {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 6`] = `
{
  "key": "org/acme/hr/base/State.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr.base;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum State {
   MA,
   NY,
   CO,
   WA,
   IL,
   CA,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 7`] = `
{
  "key": "org/acme/hr/base/TShirtSizeType.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr.base;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum TShirtSizeType {
   SMALL,
   MEDIUM,
   LARGE,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 8`] = `
{
  "key": "org/acme/hr/base/Address.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr.base;

import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public class Address extends Concept {
   private String street;
   private String city;
   private State state;
   private String zipCode;
   private String country;
   public String getStreet() {
      return this.street;
   }
   public String getCity() {
      return this.city;
   }
   public State getState() {
      return this.state;
   }
   public String getZipCode() {
      return this.zipCode;
   }
   public String getCountry() {
      return this.country;
   }
   public void setStreet(String street) {
      this.street = street;
   }
   public void setCity(String city) {
      this.city = city;
   }
   public void setState(State state) {
      this.state = state;
   }
   public void setZipCode(String zipCode) {
      this.zipCode = zipCode;
   }
   public void setCountry(String country) {
      this.country = country;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 9`] = `
{
  "key": "org/acme/hr/Company.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import java.util.HashMap;
import java.util.Map;
import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public class Company extends Concept {
   private String name;
   private Address headquarters;
   private Map<String, String> companyProperties = new HashMap<>();
   private Map<SSN, Employee> employeeDirectory = new HashMap<>();
   private Map<SSN, TShirtSizeType> employeeTShirtSizes = new HashMap<>();
   private Map<String, Concept> employeeProfiles = new HashMap<>();
   private Map<String, SSN> employeeSocialSecurityNumbers = new HashMap<>();
   public String getName() {
      return this.name;
   }
   public Address getHeadquarters() {
      return this.headquarters;
   }
   public CompanyProperties getCompanyProperties() {
      return this.companyProperties;
   }
   public EmployeeDirectory getEmployeeDirectory() {
      return this.employeeDirectory;
   }
   public EmployeeTShirtSizes getEmployeeTShirtSizes() {
      return this.employeeTShirtSizes;
   }
   public EmployeeProfiles getEmployeeProfiles() {
      return this.employeeProfiles;
   }
   public EmployeeSocialSecurityNumbers getEmployeeSocialSecurityNumbers() {
      return this.employeeSocialSecurityNumbers;
   }
   public void setName(String name) {
      this.name = name;
   }
   public void setHeadquarters(Address headquarters) {
      this.headquarters = headquarters;
   }
   public void setCompanyProperties(CompanyProperties companyProperties) {
      this.companyProperties = companyProperties;
   }
   public void setEmployeeDirectory(EmployeeDirectory employeeDirectory) {
      this.employeeDirectory = employeeDirectory;
   }
   public void setEmployeeTShirtSizes(EmployeeTShirtSizes employeeTShirtSizes) {
      this.employeeTShirtSizes = employeeTShirtSizes;
   }
   public void setEmployeeProfiles(EmployeeProfiles employeeProfiles) {
      this.employeeProfiles = employeeProfiles;
   }
   public void setEmployeeSocialSecurityNumbers(EmployeeSocialSecurityNumbers employeeSocialSecurityNumbers) {
      this.employeeSocialSecurityNumbers = employeeSocialSecurityNumbers;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 10`] = `
{
  "key": "org/acme/hr/Department.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum Department {
   Sales,
   Marketing,
   Finance,
   HR,
   Engineering,
   Design,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 11`] = `
{
  "key": "org/acme/hr/Equipment.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "serialNumber")
public abstract class Equipment extends Asset {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getSerialNumber();
   }

   private String serialNumber;
   public String getSerialNumber() {
      return this.serialNumber;
   }
   public void setSerialNumber(String serialNumber) {
      this.serialNumber = serialNumber;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 12`] = `
{
  "key": "org/acme/hr/LaptopMake.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum LaptopMake {
   Apple,
   Microsoft,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 13`] = `
{
  "key": "org/acme/hr/Laptop.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "serialNumber")
public class Laptop extends Equipment {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getSerialNumber();
   }

   private LaptopMake make;
   public LaptopMake getMake() {
      return this.make;
   }
   public void setMake(LaptopMake make) {
      this.make = make;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 14`] = `
{
  "key": "org/acme/hr/Person.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import java.util.HashMap;
import java.util.Map;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public abstract class Person extends Participant {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private String email;
   private String firstName;
   private String lastName;
   private String middleNames;
   private Address homeAddress;
   private String ssn;
   private double height;
   private java.util.Date dob;
   private Map<KinName, KinTelephone> nextOfKin = new HashMap<>();
   public String getEmail() {
      return this.email;
   }
   public String getFirstName() {
      return this.firstName;
   }
   public String getLastName() {
      return this.lastName;
   }
   public String getMiddleNames() {
      return this.middleNames;
   }
   public Address getHomeAddress() {
      return this.homeAddress;
   }
   public String getSsn() {
      return this.ssn;
   }
   public double getHeight() {
      return this.height;
   }
   public java.util.Date getDob() {
      return this.dob;
   }
   public NextOfKin getNextOfKin() {
      return this.nextOfKin;
   }
   public void setEmail(String email) {
      this.email = email;
   }
   public void setFirstName(String firstName) {
      this.firstName = firstName;
   }
   public void setLastName(String lastName) {
      this.lastName = lastName;
   }
   public void setMiddleNames(String middleNames) {
      this.middleNames = middleNames;
   }
   public void setHomeAddress(Address homeAddress) {
      this.homeAddress = homeAddress;
   }
   public void setSsn(String ssn) {
      this.ssn = ssn;
   }
   public void setHeight(double height) {
      this.height = height;
   }
   public void setDob(java.util.Date dob) {
      this.dob = dob;
   }
   public void setNextOfKin(NextOfKin nextOfKin) {
      this.nextOfKin = nextOfKin;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 15`] = `
{
  "key": "org/acme/hr/Employee.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public class Employee extends Person {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private String employeeId;
   private long salary;
   private int numDependents;
   private boolean retired;
   private Department department;
   private Address officeAddress;
   private Equipment[] companyAssets;
   private Manager manager;
   public String getEmployeeId() {
      return this.employeeId;
   }
   public long getSalary() {
      return this.salary;
   }
   public int getNumDependents() {
      return this.numDependents;
   }
   public boolean getRetired() {
      return this.retired;
   }
   public Department getDepartment() {
      return this.department;
   }
   public Address getOfficeAddress() {
      return this.officeAddress;
   }
   public Equipment[] getCompanyAssets() {
      return this.companyAssets;
   }
   public Manager getManager() {
      return this.manager;
   }
   public void setEmployeeId(String employeeId) {
      this.employeeId = employeeId;
   }
   public void setSalary(long salary) {
      this.salary = salary;
   }
   public void setNumDependents(int numDependents) {
      this.numDependents = numDependents;
   }
   public void setRetired(boolean retired) {
      this.retired = retired;
   }
   public void setDepartment(Department department) {
      this.department = department;
   }
   public void setOfficeAddress(Address officeAddress) {
      this.officeAddress = officeAddress;
   }
   public void setCompanyAssets(Equipment[] companyAssets) {
      this.companyAssets = companyAssets;
   }
   public void setManager(Manager manager) {
      this.manager = manager;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 16`] = `
{
  "key": "org/acme/hr/Contractor.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public class Contractor extends Person {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private Company company;
   private Manager manager;
   public Company getCompany() {
      return this.company;
   }
   public Manager getManager() {
      return this.manager;
   }
   public void setCompany(Company company) {
      this.company = company;
   }
   public void setManager(Manager manager) {
      this.manager = manager;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 17`] = `
{
  "key": "org/acme/hr/Manager.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public class Manager extends Employee {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private Person[] reports;
   public Person[] getReports() {
      return this.reports;
   }
   public void setReports(Person[] reports) {
      this.reports = reports;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 18`] = `
{
  "key": "org/acme/hr/CompanyEvent.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

public class CompanyEvent extends Event {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 19`] = `
{
  "key": "org/acme/hr/Onboarded.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

public class Onboarded extends CompanyEvent {
   private Employee employee;
   public Employee getEmployee() {
      return this.employee;
   }
   public void setEmployee(Employee employee) {
      this.employee = employee;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'java' 20`] = `
{
  "key": "org/acme/hr/ChangeOfAddress.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

public class ChangeOfAddress extends Transaction {
   private Person Person;
   private Address newAddress;
   public Person getPerson() {
      return this.Person;
   }
   public Address getNewAddress() {
      return this.newAddress;
   }
   public void setPerson(Person Person) {
      this.Person = Person;
   }
   public void setNewAddress(Address newAddress) {
      this.newAddress = newAddress;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'jsonschema' 1`] = `
{
  "key": "schema.json",
  "value": "{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "org.acme.hr.base.State": {
      "title": "State",
      "description": "An instance of org.acme.hr.base.State",
      "enum": [
        "MA",
        "NY",
        "CO",
        "WA",
        "IL",
        "CA"
      ]
    },
    "org.acme.hr.base.TShirtSizeType": {
      "title": "TShirtSizeType",
      "description": "An instance of org.acme.hr.base.TShirtSizeType",
      "enum": [
        "SMALL",
        "MEDIUM",
        "LARGE"
      ]
    },
    "org.acme.hr.base.Address": {
      "title": "Address",
      "description": "An instance of org.acme.hr.base.Address",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.base.Address",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.base\\\\.Address$",
          "description": "The class identifier for org.acme.hr.base.Address"
        },
        "street": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "state": {
          "$ref": "#/definitions/org.acme.hr.base.State"
        },
        "zipCode": {
          "type": "string"
        },
        "country": {
          "type": "string"
        }
      },
      "required": [
        "$class",
        "street",
        "city",
        "zipCode",
        "country"
      ]
    },
    "org.acme.hr.base.Time": {
      "format": "date-time",
      "type": "string"
    },
    "org.acme.hr.base.SSN": {
      "type": "string",
      "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
    },
    "org.acme.hr.Company": {
      "title": "Company",
      "description": "An instance of org.acme.hr.Company",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Company",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Company$",
          "description": "The class identifier for org.acme.hr.Company"
        },
        "name": {
          "type": "string"
        },
        "headquarters": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        }
      },
      "required": [
        "$class",
        "name",
        "headquarters"
      ]
    },
    "org.acme.hr.Department": {
      "title": "Department",
      "description": "An instance of org.acme.hr.Department",
      "enum": [
        "Sales",
        "Marketing",
        "Finance",
        "HR",
        "Engineering",
        "Design"
      ]
    },
    "org.acme.hr.Equipment": {
      "title": "Equipment",
      "description": "An instance of org.acme.hr.Equipment",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Equipment",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Equipment$",
          "description": "The class identifier for org.acme.hr.Equipment"
        },
        "serialNumber": {
          "type": "string",
          "description": "The instance identifier for this type"
        }
      },
      "required": [
        "$class",
        "serialNumber"
      ],
      "$decorators": {
        "resource": []
      }
    },
    "org.acme.hr.LaptopMake": {
      "title": "LaptopMake",
      "description": "An instance of org.acme.hr.LaptopMake",
      "enum": [
        "Apple",
        "Microsoft"
      ]
    },
    "org.acme.hr.Laptop": {
      "title": "Laptop",
      "description": "An instance of org.acme.hr.Laptop",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Laptop",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Laptop$",
          "description": "The class identifier for org.acme.hr.Laptop"
        },
        "make": {
          "$ref": "#/definitions/org.acme.hr.LaptopMake"
        },
        "serialNumber": {
          "type": "string",
          "description": "The instance identifier for this type"
        }
      },
      "required": [
        "$class",
        "make",
        "serialNumber"
      ]
    },
    "org.acme.hr.Person": {
      "title": "Person",
      "description": "An instance of org.acme.hr.Person",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Person",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Person$",
          "description": "The class identifier for org.acme.hr.Person"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ],
      "$decorators": {
        "resource": []
      }
    },
    "org.acme.hr.Employee": {
      "title": "Employee",
      "description": "An instance of org.acme.hr.Employee",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Employee",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Employee$",
          "description": "The class identifier for org.acme.hr.Employee"
        },
        "employeeId": {
          "type": "string"
        },
        "salary": {
          "type": "integer"
        },
        "numDependents": {
          "type": "integer"
        },
        "retired": {
          "type": "boolean"
        },
        "department": {
          "$ref": "#/definitions/org.acme.hr.Department"
        },
        "officeAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        },
        "companyAssets": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/org.acme.hr.Equipment"
              },
              {
                "$ref": "#/definitions/org.acme.hr.Laptop"
              }
            ]
          }
        },
        "manager": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr.Manager"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "employeeId",
        "salary",
        "numDependents",
        "retired",
        "department",
        "officeAddress",
        "companyAssets",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ]
    },
    "org.acme.hr.Contractor": {
      "title": "Contractor",
      "description": "An instance of org.acme.hr.Contractor",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Contractor",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Contractor$",
          "description": "The class identifier for org.acme.hr.Contractor"
        },
        "company": {
          "$ref": "#/definitions/org.acme.hr.Company"
        },
        "manager": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr.Manager"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "company",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ]
    },
    "org.acme.hr.Manager": {
      "title": "Manager",
      "description": "An instance of org.acme.hr.Manager",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Manager",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Manager$",
          "description": "The class identifier for org.acme.hr.Manager"
        },
        "reports": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr.Person"
          }
        },
        "employeeId": {
          "type": "string"
        },
        "salary": {
          "type": "integer"
        },
        "numDependents": {
          "type": "integer"
        },
        "retired": {
          "type": "boolean"
        },
        "department": {
          "$ref": "#/definitions/org.acme.hr.Department"
        },
        "officeAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        },
        "companyAssets": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/org.acme.hr.Equipment"
              },
              {
                "$ref": "#/definitions/org.acme.hr.Laptop"
              }
            ]
          }
        },
        "manager": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr.Manager"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "employeeId",
        "salary",
        "numDependents",
        "retired",
        "department",
        "officeAddress",
        "companyAssets",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ]
    },
    "org.acme.hr.CompanyEvent": {
      "title": "CompanyEvent",
      "description": "An instance of org.acme.hr.CompanyEvent",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.CompanyEvent",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.CompanyEvent$",
          "description": "The class identifier for org.acme.hr.CompanyEvent"
        }
      },
      "required": [
        "$class"
      ]
    },
    "org.acme.hr.Onboarded": {
      "title": "Onboarded",
      "description": "An instance of org.acme.hr.Onboarded",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.Onboarded",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.Onboarded$",
          "description": "The class identifier for org.acme.hr.Onboarded"
        },
        "employee": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr.Employee"
        }
      },
      "required": [
        "$class",
        "employee"
      ]
    },
    "org.acme.hr.ChangeOfAddress": {
      "title": "ChangeOfAddress",
      "description": "An instance of org.acme.hr.ChangeOfAddress",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.ChangeOfAddress",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.ChangeOfAddress$",
          "description": "The class identifier for org.acme.hr.ChangeOfAddress"
        },
        "Person": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr.Person"
        },
        "newAddress": {
          "$ref": "#/definitions/org.acme.hr.base.Address"
        }
      },
      "required": [
        "$class",
        "Person",
        "newAddress"
      ]
    },
    "org.acme.hr.KinName": {
      "type": "string"
    },
    "org.acme.hr.KinTelephone": {
      "format": "date-time",
      "type": "string"
    }
  }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'markdown' 1`] = `
{
  "key": "models.md",
  "value": "# Namespace org.acme.hr.base

## Overview
- 1 concepts
- 2 enumerations
- 0 assets
- 0 participants
- 0 transactions
- 0 events
- 6 total declarations

## Imports
- concerto@1.0.0.Concept
- concerto@1.0.0.Asset
- concerto@1.0.0.Transaction
- concerto@1.0.0.Participant
- concerto@1.0.0.Event

## Diagram
\`\`\`mermaid
classDiagram
class \`org.acme.hr.base.State\` {
<< enumeration>>
   + \`MA\`
   + \`NY\`
   + \`CO\`
   + \`WA\`
   + \`IL\`
   + \`CA\`
}

class \`org.acme.hr.base.TShirtSizeType\` {
<< enumeration>>
   + \`SMALL\`
   + \`MEDIUM\`
   + \`LARGE\`
}

class \`org.acme.hr.base.Address\` {
<< concept>>
   + \`String\` \`street\`
   + \`String\` \`city\`
   + \`State\` \`state\`
   + \`String\` \`zipCode\`
   + \`String\` \`country\`
}

\`org.acme.hr.base.Address\` "1" *-- "1" \`org.acme.hr.base.State\`
\`\`\`

# Namespace org.acme.hr

## Overview
- 1 concepts
- 2 enumerations
- 2 assets
- 4 participants
- 1 transactions
- 2 events
- 20 total declarations

## Imports
- org.acme.hr.base.Address
- org.acme.hr.base.State
- org.acme.hr.base.SSN
- org.acme.hr.base.Time
- org.acme.hr.base.EmployeeTShirtSizes
- concerto@1.0.0.Concept
- concerto@1.0.0.Asset
- concerto@1.0.0.Transaction
- concerto@1.0.0.Participant
- concerto@1.0.0.Event

## Diagram
\`\`\`mermaid
classDiagram
class \`org.acme.hr.Company\` {
<< concept>>
   + \`String\` \`name\`
   + \`Address\` \`headquarters\`
   + \`CompanyProperties\` \`companyProperties\`
   + \`EmployeeDirectory\` \`employeeDirectory\`
   + \`EmployeeTShirtSizes\` \`employeeTShirtSizes\`
   + \`EmployeeProfiles\` \`employeeProfiles\`
   + \`EmployeeSocialSecurityNumbers\` \`employeeSocialSecurityNumbers\`
}

\`org.acme.hr.Company\` "1" *-- "1" \`org.acme.hr.base.Address\`
\`org.acme.hr.Company\` "1" *-- "1" \`org.acme.hr.CompanyProperties\`
\`org.acme.hr.Company\` "1" *-- "1" \`org.acme.hr.EmployeeDirectory\`
\`org.acme.hr.Company\` "1" *-- "1" \`org.acme.hr.base.EmployeeTShirtSizes\`
\`org.acme.hr.Company\` "1" *-- "1" \`org.acme.hr.EmployeeProfiles\`
\`org.acme.hr.Company\` "1" *-- "1" \`org.acme.hr.EmployeeSocialSecurityNumbers\`
class \`org.acme.hr.Department\` {
<< enumeration>>
   + \`Sales\`
   + \`Marketing\`
   + \`Finance\`
   + \`HR\`
   + \`Engineering\`
   + \`Design\`
}

class \`org.acme.hr.Equipment\` {
<< asset>>
   + \`String\` \`serialNumber\`
}

class \`org.acme.hr.LaptopMake\` {
<< enumeration>>
   + \`Apple\`
   + \`Microsoft\`
}

class \`org.acme.hr.Laptop\` {
<< asset>>
   + \`LaptopMake\` \`make\`
}

\`org.acme.hr.Laptop\` "1" *-- "1" \`org.acme.hr.LaptopMake\`
\`org.acme.hr.Laptop\` --|> \`org.acme.hr.Equipment\`
class \`org.acme.hr.Person\` {
<< participant>>
   + \`String\` \`email\`
   + \`String\` \`firstName\`
   + \`String\` \`lastName\`
   + \`String\` \`middleNames\`
   + \`Address\` \`homeAddress\`
   + \`String\` \`ssn\`
   + \`Double\` \`height\`
   + \`DateTime\` \`dob\`
   + \`NextOfKin\` \`nextOfKin\`
}

\`org.acme.hr.Person\` "1" *-- "1" \`org.acme.hr.base.Address\`
\`org.acme.hr.Person\` "1" *-- "1" \`org.acme.hr.base.SSN\`
\`org.acme.hr.Person\` "1" *-- "1" \`org.acme.hr.NextOfKin\`
class \`org.acme.hr.Employee\` {
<< participant>>
   + \`String\` \`employeeId\`
   + \`Long\` \`salary\`
   + \`Integer\` \`numDependents\`
   + \`Boolean\` \`retired\`
   + \`Department\` \`department\`
   + \`Address\` \`officeAddress\`
   + \`Equipment[]\` \`companyAssets\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr.Employee\` "1" *-- "1" \`org.acme.hr.Department\`
\`org.acme.hr.Employee\` "1" *-- "1" \`org.acme.hr.base.Address\`
\`org.acme.hr.Employee\` "1" *-- "*" \`org.acme.hr.Equipment\`
\`org.acme.hr.Employee\` "1" o-- "1" \`org.acme.hr.Manager\` : manager
\`org.acme.hr.Employee\` --|> \`org.acme.hr.Person\`
class \`org.acme.hr.Contractor\` {
<< participant>>
   + \`Company\` \`company\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr.Contractor\` "1" *-- "1" \`org.acme.hr.Company\`
\`org.acme.hr.Contractor\` "1" o-- "1" \`org.acme.hr.Manager\` : manager
\`org.acme.hr.Contractor\` --|> \`org.acme.hr.Person\`
class \`org.acme.hr.Manager\` {
<< participant>>
   + \`Person[]\` \`reports\`
}

\`org.acme.hr.Manager\` "1" o-- "*" \`org.acme.hr.Person\` : reports
\`org.acme.hr.Manager\` --|> \`org.acme.hr.Employee\`
class \`org.acme.hr.CompanyEvent\`
<< event>> \`org.acme.hr.CompanyEvent\`

class \`org.acme.hr.Onboarded\` {
<< event>>
   + \`Employee\` \`employee\`
}

\`org.acme.hr.Onboarded\` "1" o-- "1" \`org.acme.hr.Employee\` : employee
\`org.acme.hr.Onboarded\` --|> \`org.acme.hr.CompanyEvent\`
class \`org.acme.hr.ChangeOfAddress\` {
<< transaction>>
   + \`Person\` \`Person\`
   + \`Address\` \`newAddress\`
}

\`org.acme.hr.ChangeOfAddress\` "1" o-- "1" \`org.acme.hr.Person\` : Person
\`org.acme.hr.ChangeOfAddress\` "1" *-- "1" \`org.acme.hr.base.Address\`
\`\`\`

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'mermaid' 1`] = `
{
  "key": "model.mmd",
  "value": "classDiagram
class \`org.acme.hr.base.State\` {
<< enumeration>>
   + \`MA\`
   + \`NY\`
   + \`CO\`
   + \`WA\`
   + \`IL\`
   + \`CA\`
}

\`org.acme.hr.base.State\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.base.TShirtSizeType\` {
<< enumeration>>
   + \`SMALL\`
   + \`MEDIUM\`
   + \`LARGE\`
}

\`org.acme.hr.base.TShirtSizeType\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.base.Address\` {
<< concept>>
   + \`String\` \`street\`
   + \`String\` \`city\`
   + \`State\` \`state\`
   + \`String\` \`zipCode\`
   + \`String\` \`country\`
}

\`org.acme.hr.base.Address\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.Company\` {
<< concept>>
   + \`String\` \`name\`
   + \`Address\` \`headquarters\`
   + \`CompanyProperties\` \`companyProperties\`
   + \`EmployeeDirectory\` \`employeeDirectory\`
   + \`EmployeeTShirtSizes\` \`employeeTShirtSizes\`
   + \`EmployeeProfiles\` \`employeeProfiles\`
   + \`EmployeeSocialSecurityNumbers\` \`employeeSocialSecurityNumbers\`
}

\`org.acme.hr.Company\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.Department\` {
<< enumeration>>
   + \`Sales\`
   + \`Marketing\`
   + \`Finance\`
   + \`HR\`
   + \`Engineering\`
   + \`Design\`
}

\`org.acme.hr.Department\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.Equipment\` {
<< asset>>
   + \`String\` \`serialNumber\`
}

\`org.acme.hr.Equipment\` --|> \`concerto@1.0.0.Asset\`
class \`org.acme.hr.LaptopMake\` {
<< enumeration>>
   + \`Apple\`
   + \`Microsoft\`
}

\`org.acme.hr.LaptopMake\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.Laptop\` {
<< asset>>
   + \`LaptopMake\` \`make\`
}

\`org.acme.hr.Laptop\` --|> \`org.acme.hr.Equipment\`
class \`org.acme.hr.Person\` {
<< participant>>
   + \`String\` \`email\`
   + \`String\` \`firstName\`
   + \`String\` \`lastName\`
   + \`String\` \`middleNames\`
   + \`Address\` \`homeAddress\`
   + \`String\` \`ssn\`
   + \`Double\` \`height\`
   + \`DateTime\` \`dob\`
   + \`NextOfKin\` \`nextOfKin\`
}

\`org.acme.hr.Person\` --|> \`concerto@1.0.0.Participant\`
class \`org.acme.hr.Employee\` {
<< participant>>
   + \`String\` \`employeeId\`
   + \`Long\` \`salary\`
   + \`Integer\` \`numDependents\`
   + \`Boolean\` \`retired\`
   + \`Department\` \`department\`
   + \`Address\` \`officeAddress\`
   + \`Equipment[]\` \`companyAssets\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr.Employee\` "1" o-- "1" \`org.acme.hr.Manager\` : manager
\`org.acme.hr.Employee\` --|> \`org.acme.hr.Person\`
class \`org.acme.hr.Contractor\` {
<< participant>>
   + \`Company\` \`company\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr.Contractor\` "1" o-- "1" \`org.acme.hr.Manager\` : manager
\`org.acme.hr.Contractor\` --|> \`org.acme.hr.Person\`
class \`org.acme.hr.Manager\` {
<< participant>>
   + \`Person[]\` \`reports\`
}

\`org.acme.hr.Manager\` "1" o-- "*" \`org.acme.hr.Person\` : reports
\`org.acme.hr.Manager\` --|> \`org.acme.hr.Employee\`
class \`org.acme.hr.CompanyEvent\`
<< event>> \`org.acme.hr.CompanyEvent\`

\`org.acme.hr.CompanyEvent\` --|> \`concerto@1.0.0.Event\`
class \`org.acme.hr.Onboarded\` {
<< event>>
   + \`Employee\` \`employee\`
}

\`org.acme.hr.Onboarded\` "1" o-- "1" \`org.acme.hr.Employee\` : employee
\`org.acme.hr.Onboarded\` --|> \`org.acme.hr.CompanyEvent\`
class \`org.acme.hr.ChangeOfAddress\` {
<< transaction>>
   + \`Person\` \`Person\`
   + \`Address\` \`newAddress\`
}

\`org.acme.hr.ChangeOfAddress\` "1" o-- "1" \`org.acme.hr.Person\` : Person
\`org.acme.hr.ChangeOfAddress\` --|> \`concerto@1.0.0.Transaction\`
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'odata' 1`] = `
{
  "key": "concerto.csdl",
  "value": "<?xml version="1.0"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
<edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
   <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
</edmx:Reference>
<edmx:DataServices>
   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="concerto">
      <ComplexType Name="Concept" Abstract="true" >
      </ComplexType>
      <EntityType Name="Asset" Abstract="true" BaseType="concerto.Concept">
         <Property Name="$identifier" Type="Edm.String"  >
         </Property>
      </EntityType>
      <EntityType Name="Participant" Abstract="true" BaseType="concerto.Concept">
         <Property Name="$identifier" Type="Edm.String"  >
         </Property>
      </EntityType>
      <ComplexType Name="Transaction" Abstract="true" BaseType="concerto.Concept">
      </ComplexType>
      <ComplexType Name="Event" Abstract="true" BaseType="concerto.Concept">
      </ComplexType>
   <EntityContainer Name="concertoService">
   </EntityContainer>
   </Schema>
</edmx:DataServices>
</edmx:Edmx>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'odata' 2`] = `
{
  "key": "org.acme.hr.base.csdl",
  "value": "<?xml version="1.0"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
<edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
   <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
</edmx:Reference>
<edmx:Reference Uri="./concerto.csdl">
   <edmx:Include Namespace="concerto" />
</edmx:Reference>
<edmx:DataServices>
   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.acme.hr.base">
      <EnumType Name="State">
         <Member Name="MA">
         </Member>
         <Member Name="NY">
         </Member>
         <Member Name="CO">
         </Member>
         <Member Name="WA">
         </Member>
         <Member Name="IL">
         </Member>
         <Member Name="CA">
         </Member>
      </EnumType>
      <EnumType Name="TShirtSizeType">
         <Member Name="SMALL">
         </Member>
         <Member Name="MEDIUM">
         </Member>
         <Member Name="LARGE">
         </Member>
      </EnumType>
      <ComplexType Name="Address"  BaseType="concerto.Concept">
         <Property Name="street" Type="Edm.String"  >
         </Property>
         <Property Name="city" Type="Edm.String"  >
         </Property>
         <Property Name="state" Type="org.acme.hr.base.State" Nullable="true" >
         </Property>
         <Property Name="zipCode" Type="Edm.String"  >
         </Property>
         <Property Name="country" Type="Edm.String"  >
         </Property>
      </ComplexType>
   <EntityContainer Name="org.acme.hr.baseService">
   </EntityContainer>
   </Schema>
</edmx:DataServices>
</edmx:Edmx>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'odata' 3`] = `
{
  "key": "org.acme.hr.csdl",
  "value": "<?xml version="1.0"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
<edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
   <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
</edmx:Reference>
<edmx:Reference Uri="./org.acme.hr.base.csdl">
   <edmx:Include Namespace="org.acme.hr.base" />
</edmx:Reference>
<edmx:Reference Uri="./concerto.csdl">
   <edmx:Include Namespace="concerto" />
</edmx:Reference>
<edmx:DataServices>
   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.acme.hr">
      <ComplexType Name="Company"  BaseType="concerto.Concept">
         <Property Name="name" Type="Edm.String"  >
         </Property>
         <Property Name="headquarters" Type="org.acme.hr.base.Address"  >
         </Property>
         <Property Name="companyProperties" Type="org.acme.hr.CompanyProperties" Nullable="true" >
         </Property>
         <Property Name="employeeDirectory" Type="org.acme.hr.EmployeeDirectory" Nullable="true" >
         </Property>
         <Property Name="employeeTShirtSizes" Type="org.acme.hr.base.EmployeeTShirtSizes" Nullable="true" >
         </Property>
         <Property Name="employeeProfiles" Type="org.acme.hr.EmployeeProfiles" Nullable="true" >
         </Property>
         <Property Name="employeeSocialSecurityNumbers" Type="org.acme.hr.EmployeeSocialSecurityNumbers" Nullable="true" >
         </Property>
      </ComplexType>
      <EnumType Name="Department">
         <Member Name="Sales">
         </Member>
         <Member Name="Marketing">
         </Member>
         <Member Name="Finance">
         </Member>
         <Member Name="HR">
         </Member>
         <Member Name="Engineering">
         </Member>
         <Member Name="Design">
         </Member>
      </EnumType>
      <EntityType Name="Equipment" Abstract="true" BaseType="concerto.Asset">
            <Annotation Term="resource" Bool="true"/>
         <Key><PropertyRef Name="serialNumber"/></Key>
         <Property Name="serialNumber" Type="Edm.String"  >
         </Property>
      </EntityType>
      <EnumType Name="LaptopMake">
         <Member Name="Apple">
         </Member>
         <Member Name="Microsoft">
         </Member>
      </EnumType>
      <EntityType Name="Laptop"  BaseType="org.acme.hr.Equipment">
         <Property Name="make" Type="org.acme.hr.LaptopMake"  >
         </Property>
      </EntityType>
      <EntityType Name="Person" Abstract="true" BaseType="concerto.Participant">
            <Annotation Term="resource" Bool="true"/>
         <Key><PropertyRef Name="email"/></Key>
         <Property Name="email" Type="Edm.String"  >
         </Property>
         <Property Name="firstName" Type="Edm.String"  >
         </Property>
         <Property Name="lastName" Type="Edm.String"  >
         </Property>
         <Property Name="middleNames" Type="Edm.String" Nullable="true" >
         </Property>
         <Property Name="homeAddress" Type="org.acme.hr.base.Address"  >
         </Property>
         <Property Name="ssn" Type="Edm.String"  DefaultValue="000-00-0000">
         </Property>
         <Property Name="height" Type="Edm.Double"  >
         </Property>
         <Property Name="dob" Type="Edm.DateTimeOffset"  >
         </Property>
         <Property Name="nextOfKin" Type="org.acme.hr.NextOfKin"  >
         </Property>
      </EntityType>
      <EntityType Name="Employee"  BaseType="org.acme.hr.Person">
         <Property Name="employeeId" Type="Edm.String"  >
         </Property>
         <Property Name="salary" Type="Edm.Int64"  >
         </Property>
         <Property Name="numDependents" Type="Edm.Int32"  >
         </Property>
         <Property Name="retired" Type="Edm.Boolean"  >
         </Property>
         <Property Name="department" Type="org.acme.hr.Department"  >
         </Property>
         <Property Name="officeAddress" Type="org.acme.hr.base.Address"  >
         </Property>
         <Property Name="companyAssets" Type="Collection(org.acme.hr.Equipment)"  >
         </Property>
         <NavigationProperty Name="manager" Type="org.acme.hr.Manager" Nullable="true">
         </NavigationProperty>
      </EntityType>
      <EntityType Name="Contractor"  BaseType="org.acme.hr.Person">
         <Property Name="company" Type="org.acme.hr.Company"  >
         </Property>
         <NavigationProperty Name="manager" Type="org.acme.hr.Manager" Nullable="true">
         </NavigationProperty>
      </EntityType>
      <EntityType Name="Manager"  BaseType="org.acme.hr.Employee">
         <NavigationProperty Name="reports" Type="Collection(org.acme.hr.Person)" Nullable="true">
         </NavigationProperty>
      </EntityType>
      <ComplexType Name="CompanyEvent"  BaseType="concerto.Event">
      </ComplexType>
      <ComplexType Name="Onboarded"  BaseType="org.acme.hr.CompanyEvent">
         <NavigationProperty Name="employee" Type="org.acme.hr.Employee" >
         </NavigationProperty>
      </ComplexType>
      <ComplexType Name="ChangeOfAddress"  BaseType="concerto.Transaction">
         <NavigationProperty Name="Person" Type="org.acme.hr.Person" >
         </NavigationProperty>
         <Property Name="newAddress" Type="org.acme.hr.base.Address"  >
         </Property>
      </ComplexType>
   <EntityContainer Name="org.acme.hrService">
      <EntitySet Name="Laptop" EntityType="org.acme.hr.Laptop"/>
      <EntitySet Name="Employee" EntityType="org.acme.hr.Employee"/>
      <EntitySet Name="Contractor" EntityType="org.acme.hr.Contractor"/>
      <EntitySet Name="Manager" EntityType="org.acme.hr.Manager"/>
   </EntityContainer>
   </Schema>
</edmx:DataServices>
</edmx:Edmx>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'openapi' 1`] = `
{
  "key": "openapi.json",
  "value": "{
  "openapi": "3.0.2",
  "servers": [],
  "info": {
    "title": "Generated Open API from Concerto Models",
    "version": "1.0.0",
    "description": "Create, read, update and delete entities"
  },
  "components": {
    "schemas": {
      "org.acme.hr.base.State": {
        "title": "State",
        "description": "An instance of org.acme.hr.base.State",
        "enum": [
          "MA",
          "NY",
          "CO",
          "WA",
          "IL",
          "CA"
        ]
      },
      "org.acme.hr.base.TShirtSizeType": {
        "title": "TShirtSizeType",
        "description": "An instance of org.acme.hr.base.TShirtSizeType",
        "enum": [
          "SMALL",
          "MEDIUM",
          "LARGE"
        ]
      },
      "org.acme.hr.base.Address": {
        "title": "Address",
        "description": "An instance of org.acme.hr.base.Address",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.base.Address",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.base\\\\.Address$",
            "description": "The class identifier for org.acme.hr.base.Address"
          },
          "street": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "state": {
            "$ref": "#/components/schemas/org.acme.hr.base.State"
          },
          "zipCode": {
            "type": "string"
          },
          "country": {
            "type": "string"
          }
        },
        "required": [
          "$class",
          "street",
          "city",
          "zipCode",
          "country"
        ]
      },
      "org.acme.hr.base.Time": {
        "format": "date-time",
        "type": "string"
      },
      "org.acme.hr.base.SSN": {
        "type": "string",
        "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
      },
      "org.acme.hr.Company": {
        "title": "Company",
        "description": "An instance of org.acme.hr.Company",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Company",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Company$",
            "description": "The class identifier for org.acme.hr.Company"
          },
          "name": {
            "type": "string"
          },
          "headquarters": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          }
        },
        "required": [
          "$class",
          "name",
          "headquarters"
        ]
      },
      "org.acme.hr.Department": {
        "title": "Department",
        "description": "An instance of org.acme.hr.Department",
        "enum": [
          "Sales",
          "Marketing",
          "Finance",
          "HR",
          "Engineering",
          "Design"
        ]
      },
      "org.acme.hr.Equipment": {
        "title": "Equipment",
        "description": "An instance of org.acme.hr.Equipment",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Equipment",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Equipment$",
            "description": "The class identifier for org.acme.hr.Equipment"
          },
          "serialNumber": {
            "type": "string",
            "description": "The instance identifier for this type"
          }
        },
        "required": [
          "$class",
          "serialNumber"
        ],
        "$decorators": {
          "resource": []
        }
      },
      "org.acme.hr.LaptopMake": {
        "title": "LaptopMake",
        "description": "An instance of org.acme.hr.LaptopMake",
        "enum": [
          "Apple",
          "Microsoft"
        ]
      },
      "org.acme.hr.Laptop": {
        "title": "Laptop",
        "description": "An instance of org.acme.hr.Laptop",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Laptop",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Laptop$",
            "description": "The class identifier for org.acme.hr.Laptop"
          },
          "make": {
            "$ref": "#/components/schemas/org.acme.hr.LaptopMake"
          },
          "serialNumber": {
            "type": "string",
            "description": "The instance identifier for this type"
          }
        },
        "required": [
          "$class",
          "make",
          "serialNumber"
        ]
      },
      "org.acme.hr.Person": {
        "title": "Person",
        "description": "An instance of org.acme.hr.Person",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Person",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Person$",
            "description": "The class identifier for org.acme.hr.Person"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ],
        "$decorators": {
          "resource": []
        }
      },
      "org.acme.hr.Employee": {
        "title": "Employee",
        "description": "An instance of org.acme.hr.Employee",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Employee",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Employee$",
            "description": "The class identifier for org.acme.hr.Employee"
          },
          "employeeId": {
            "type": "string"
          },
          "salary": {
            "type": "integer"
          },
          "numDependents": {
            "type": "integer"
          },
          "retired": {
            "type": "boolean"
          },
          "department": {
            "$ref": "#/components/schemas/org.acme.hr.Department"
          },
          "officeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          },
          "companyAssets": {
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/org.acme.hr.Equipment"
                },
                {
                  "$ref": "#/components/schemas/org.acme.hr.Laptop"
                }
              ]
            }
          },
          "manager": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr.Manager"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "employeeId",
          "salary",
          "numDependents",
          "retired",
          "department",
          "officeAddress",
          "companyAssets",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ]
      },
      "org.acme.hr.Contractor": {
        "title": "Contractor",
        "description": "An instance of org.acme.hr.Contractor",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Contractor",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Contractor$",
            "description": "The class identifier for org.acme.hr.Contractor"
          },
          "company": {
            "$ref": "#/components/schemas/org.acme.hr.Company"
          },
          "manager": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr.Manager"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "company",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ]
      },
      "org.acme.hr.Manager": {
        "title": "Manager",
        "description": "An instance of org.acme.hr.Manager",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Manager",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Manager$",
            "description": "The class identifier for org.acme.hr.Manager"
          },
          "reports": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "The identifier of an instance of org.acme.hr.Person"
            }
          },
          "employeeId": {
            "type": "string"
          },
          "salary": {
            "type": "integer"
          },
          "numDependents": {
            "type": "integer"
          },
          "retired": {
            "type": "boolean"
          },
          "department": {
            "$ref": "#/components/schemas/org.acme.hr.Department"
          },
          "officeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          },
          "companyAssets": {
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/org.acme.hr.Equipment"
                },
                {
                  "$ref": "#/components/schemas/org.acme.hr.Laptop"
                }
              ]
            }
          },
          "manager": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr.Manager"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "employeeId",
          "salary",
          "numDependents",
          "retired",
          "department",
          "officeAddress",
          "companyAssets",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ]
      },
      "org.acme.hr.CompanyEvent": {
        "title": "CompanyEvent",
        "description": "An instance of org.acme.hr.CompanyEvent",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.CompanyEvent",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.CompanyEvent$",
            "description": "The class identifier for org.acme.hr.CompanyEvent"
          }
        },
        "required": [
          "$class"
        ]
      },
      "org.acme.hr.Onboarded": {
        "title": "Onboarded",
        "description": "An instance of org.acme.hr.Onboarded",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.Onboarded",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.Onboarded$",
            "description": "The class identifier for org.acme.hr.Onboarded"
          },
          "employee": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr.Employee"
          }
        },
        "required": [
          "$class",
          "employee"
        ]
      },
      "org.acme.hr.ChangeOfAddress": {
        "title": "ChangeOfAddress",
        "description": "An instance of org.acme.hr.ChangeOfAddress",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.ChangeOfAddress",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.ChangeOfAddress$",
            "description": "The class identifier for org.acme.hr.ChangeOfAddress"
          },
          "Person": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr.Person"
          },
          "newAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base.Address"
          }
        },
        "required": [
          "$class",
          "Person",
          "newAddress"
        ]
      },
      "org.acme.hr.KinName": {
        "type": "string"
      },
      "org.acme.hr.KinTelephone": {
        "format": "date-time",
        "type": "string"
      }
    }
  },
  "paths": {
    "/equipment": {
      "summary": "Path used to manage the list of equipment.",
      "description": "The REST endpoint/path used to list and create zero or more \`equipment\` entities.  This path contains a \`GET\` and \`POST\` operation to perform the list and create tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/org.acme.hr.Equipment"
                  }
                }
              }
            },
            "description": "Successful response - returns an array of \`equipment\` entities."
          }
        },
        "operationId": "listEquipment",
        "summary": "List All Equipment",
        "description": "Gets a list of all \`equipment\` entities.",
        "tags": [
          "equipment"
        ]
      },
      "post": {
        "requestBody": {
          "description": "A new \`equipment\` to be created.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr.Equipment"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful response."
          }
        },
        "operationId": "createEquipment",
        "summary": "Create a Equipment",
        "description": "Creates a new instance of a \`equipment\`.",
        "tags": [
          "equipment"
        ]
      }
    },
    "/equipment/{serialNumber}": {
      "summary": "Path used to manage a single equipment.",
      "description": "The REST endpoint/path used to get, update, and delete single instances of a \`equipment\`.  This path contains \`GET\`, \`PUT\`, and \`DELETE\` operations used to perform the get, update, and delete tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/org.acme.hr.Equipment"
                }
              }
            },
            "description": "Successful response - returns a single \`equipment\`."
          }
        },
        "operationId": "getEquipment",
        "summary": "Get a equipment",
        "description": "Gets the details of a single instance of a \`equipment\`.",
        "tags": [
          "equipment"
        ]
      },
      "put": {
        "requestBody": {
          "description": "Updated \`equipment\` information.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr.Equipment"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Successful response."
          }
        },
        "operationId": "replaceEquipment",
        "summary": "Update a equipment",
        "description": "Updates an existing \`equipment\`.",
        "tags": [
          "equipment"
        ]
      },
      "delete": {
        "responses": {
          "204": {
            "description": "Successful response."
          }
        },
        "operationId": "deleteEquipment",
        "summary": "Delete a equipment",
        "description": "Deletes an existing \`equipment\`.",
        "tags": [
          "equipment"
        ]
      },
      "parameters": [
        {
          "name": "serialNumber",
          "description": "A unique identifier for a \`Equipment\`.",
          "schema": {
            "type": "string"
          },
          "in": "path",
          "required": true
        }
      ]
    },
    "/people": {
      "summary": "Path used to manage the list of people.",
      "description": "The REST endpoint/path used to list and create zero or more \`person\` entities.  This path contains a \`GET\` and \`POST\` operation to perform the list and create tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/org.acme.hr.Person"
                  }
                }
              }
            },
            "description": "Successful response - returns an array of \`person\` entities."
          }
        },
        "operationId": "listPeople",
        "summary": "List All People",
        "description": "Gets a list of all \`person\` entities.",
        "tags": [
          "people"
        ]
      },
      "post": {
        "requestBody": {
          "description": "A new \`person\` to be created.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr.Person"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful response."
          }
        },
        "operationId": "createPerson",
        "summary": "Create a Person",
        "description": "Creates a new instance of a \`person\`.",
        "tags": [
          "people"
        ]
      }
    },
    "/people/{email}": {
      "summary": "Path used to manage a single person.",
      "description": "The REST endpoint/path used to get, update, and delete single instances of a \`person\`.  This path contains \`GET\`, \`PUT\`, and \`DELETE\` operations used to perform the get, update, and delete tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/org.acme.hr.Person"
                }
              }
            },
            "description": "Successful response - returns a single \`person\`."
          }
        },
        "operationId": "getPerson",
        "summary": "Get a person",
        "description": "Gets the details of a single instance of a \`person\`.",
        "tags": [
          "people"
        ]
      },
      "put": {
        "requestBody": {
          "description": "Updated \`person\` information.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr.Person"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Successful response."
          }
        },
        "operationId": "replacePerson",
        "summary": "Update a person",
        "description": "Updates an existing \`person\`.",
        "tags": [
          "people"
        ]
      },
      "delete": {
        "responses": {
          "204": {
            "description": "Successful response."
          }
        },
        "operationId": "deletePerson",
        "summary": "Delete a person",
        "description": "Deletes an existing \`person\`.",
        "tags": [
          "people"
        ]
      },
      "parameters": [
        {
          "name": "email",
          "description": "A unique identifier for a \`Person\`.",
          "schema": {
            "type": "string"
          },
          "in": "path",
          "required": true
        }
      ]
    }
  }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'plantuml' 1`] = `
{
  "key": "model.puml",
  "value": "@startuml
title
Model
endtitle
class org.acme.hr.base.State << (E,grey) >> {
   + MA
   + NY
   + CO
   + WA
   + IL
   + CA
}
org.acme.hr.base.State --|> concerto_1_0_0.Concept
class org.acme.hr.base.TShirtSizeType << (E,grey) >> {
   + SMALL
   + MEDIUM
   + LARGE
}
org.acme.hr.base.TShirtSizeType --|> concerto_1_0_0.Concept
class org.acme.hr.base.Address {
   + String street
   + String city
   + State state
   + String zipCode
   + String country
}
org.acme.hr.base.Address --|> concerto_1_0_0.Concept
class org.acme.hr.Company {
   + String name
   + Address headquarters
   + CompanyProperties companyProperties
   + EmployeeDirectory employeeDirectory
   + EmployeeTShirtSizes employeeTShirtSizes
   + EmployeeProfiles employeeProfiles
   + EmployeeSocialSecurityNumbers employeeSocialSecurityNumbers
}
org.acme.hr.Company --|> concerto_1_0_0.Concept
class org.acme.hr.Department << (E,grey) >> {
   + Sales
   + Marketing
   + Finance
   + HR
   + Engineering
   + Design
}
org.acme.hr.Department --|> concerto_1_0_0.Concept
class org.acme.hr.Equipment << (A,green) >> {
   + String serialNumber
}
org.acme.hr.Equipment --|> concerto_1_0_0.Asset
class org.acme.hr.LaptopMake << (E,grey) >> {
   + Apple
   + Microsoft
}
org.acme.hr.LaptopMake --|> concerto_1_0_0.Concept
class org.acme.hr.Laptop << (A,green) >> {
   + LaptopMake make
}
org.acme.hr.Laptop --|> org.acme.hr.Equipment
class org.acme.hr.Person << (P,lightblue) >> {
   + String email
   + String firstName
   + String lastName
   + String middleNames
   + Address homeAddress
   + String ssn
   + Double height
   + DateTime dob
   + NextOfKin nextOfKin
}
org.acme.hr.Person --|> concerto_1_0_0.Participant
class org.acme.hr.Employee << (P,lightblue) >> {
   + String employeeId
   + Long salary
   + Integer numDependents
   + Boolean retired
   + Department department
   + Address officeAddress
   + Equipment[] companyAssets
   + Manager manager
}
org.acme.hr.Employee "1" o-- "1" org.acme.hr.Manager : manager
org.acme.hr.Employee --|> org.acme.hr.Person
class org.acme.hr.Contractor << (P,lightblue) >> {
   + Company company
   + Manager manager
}
org.acme.hr.Contractor "1" o-- "1" org.acme.hr.Manager : manager
org.acme.hr.Contractor --|> org.acme.hr.Person
class org.acme.hr.Manager << (P,lightblue) >> {
   + Person[] reports
}
org.acme.hr.Manager "1" o-- "*" org.acme.hr.Person : reports
org.acme.hr.Manager --|> org.acme.hr.Employee
class org.acme.hr.CompanyEvent {
}
org.acme.hr.CompanyEvent --|> concerto_1_0_0.Event
class org.acme.hr.Onboarded {
   + Employee employee
}
org.acme.hr.Onboarded "1" o-- "1" org.acme.hr.Employee : employee
org.acme.hr.Onboarded --|> org.acme.hr.CompanyEvent
class org.acme.hr.ChangeOfAddress << (T,yellow) >> {
   + Person Person
   + Address newAddress
}
org.acme.hr.ChangeOfAddress "1" o-- "1" org.acme.hr.Person : Person
org.acme.hr.ChangeOfAddress --|> concerto_1_0_0.Transaction
@enduml
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'protobuf' 1`] = `
{
  "key": "org.acme.hr.base.v.proto",
  "value": "syntax = "proto3";

package org.acme.hr.base.v;

import "google/protobuf/timestamp.proto";

enum State {
  State_CA = 0;
  State_CO = 1;
  State_IL = 2;
  State_MA = 3;
  State_NY = 4;
  State_WA = 5;
}

enum TShirtSizeType {
  TShirtSizeType_LARGE = 0;
  TShirtSizeType_MEDIUM = 1;
  TShirtSizeType_SMALL = 2;
}

message Address {
  string city = 1;
  string country = 2;
  optional State state = 3;
  string street = 4;
  string zipCode = 5;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'protobuf' 2`] = `
{
  "key": "org.acme.hr.v.proto",
  "value": "syntax = "proto3";

package org.acme.hr.v;

import "google/protobuf/timestamp.proto";
import "org.acme.hr.base.v.proto";

message Company {
  optional map<string, string> CompanyProperties = 1;
  optional map<SSN, Employee> EmployeeDirectory = 2;
  optional map<string, Concept> EmployeeProfiles = 3;
  optional map<string, SSN> EmployeeSocialSecurityNumbers = 4;
  optional map<SSN, TShirtSizeType> EmployeeTShirtSizes = 5;
  Address headquarters = 6;
  string name = 7;
}

enum Department {
  Department_Design = 0;
  Department_Engineering = 1;
  Department_Finance = 2;
  Department_HR = 3;
  Department_Marketing = 4;
  Department_Sales = 5;
}

message _Subclasses_of_class_Equipment {
  oneof _class_oneof_Equipment {
    Laptop _subclass_of_class_Equipment_Laptop = 1;
  }
}

enum LaptopMake {
  LaptopMake_Apple = 0;
  LaptopMake_Microsoft = 1;
}

message Laptop {
  LaptopMake make = 1;
  string serialNumber = 2;
}

message _Subclasses_of_class_Person {
  oneof _class_oneof_Person {
    Contractor _subclass_of_class_Person_Contractor = 1;
    Employee _subclass_of_class_Person_Employee = 2;
    Manager _subclass_of_class_Person_Manager = 3;
  }
}

message Employee {
  repeated _Subclasses_of_class_Equipment companyAssets = 1;
  Department department = 2;
  google.protobuf.Timestamp dob = 3;
  string email = 4;
  string employeeId = 5;
  string firstName = 6;
  double height = 7;
  Address homeAddress = 8;
  string lastName = 9;
  optional string manager = 10;
  optional string middleNames = 11;
  map<KinName, KinTelephone> NextOfKin = 12;
  sint64 numDependents = 13;
  Address officeAddress = 14;
  bool retired = 15;
  sint64 salary = 16;
  string ssn = 17;
}

message _Subclasses_of_class_Employee {
  oneof _class_oneof_Employee {
    Employee _subclass_of_class_Employee_Employee = 1;
    Manager _subclass_of_class_Employee_Manager = 2;
  }
}

message Contractor {
  Company company = 1;
  google.protobuf.Timestamp dob = 2;
  string email = 3;
  string firstName = 4;
  double height = 5;
  Address homeAddress = 6;
  string lastName = 7;
  optional string manager = 8;
  optional string middleNames = 9;
  map<KinName, KinTelephone> NextOfKin = 10;
  string ssn = 11;
}

message Manager {
  repeated _Subclasses_of_class_Equipment companyAssets = 1;
  Department department = 2;
  google.protobuf.Timestamp dob = 3;
  string email = 4;
  string employeeId = 5;
  string firstName = 6;
  double height = 7;
  Address homeAddress = 8;
  string lastName = 9;
  optional string manager = 10;
  optional string middleNames = 11;
  map<KinName, KinTelephone> NextOfKin = 12;
  sint64 numDependents = 13;
  Address officeAddress = 14;
  repeated string reports = 15;
  bool retired = 16;
  sint64 salary = 17;
  string ssn = 18;
}

message CompanyEvent {
}

message _Subclasses_of_class_CompanyEvent {
  oneof _class_oneof_CompanyEvent {
    CompanyEvent _subclass_of_class_CompanyEvent_CompanyEvent = 1;
    Onboarded _subclass_of_class_CompanyEvent_Onboarded = 2;
  }
}

message Onboarded {
  string employee = 1;
}

message ChangeOfAddress {
  Address newAddress = 1;
  string Person = 2;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'rust' 1`] = `
{
  "key": "mod.rs",
  "value": "#[allow(unused_imports)]
pub mod concerto_1_0_0;
#[allow(unused_imports)]
pub mod concerto;
#[allow(unused_imports)]
pub mod org_acme_hr_base;
#[allow(unused_imports)]
pub mod org_acme_hr;
#[allow(unused_imports)]
pub mod utils;
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'rust' 2`] = `
{
  "key": "utils.rs",
  "value": "use chrono::{ DateTime, TimeZone, Utc };
use serde::{ Deserialize, Serialize, Deserializer, Serializer };
   
pub fn serialize_datetime_option<S>(datetime: &Option<chrono::DateTime<Utc>>, serializer: S) -> Result<S::Ok, S::Error>
where
   S: Serializer,
{
   match datetime {
      Some(dt) => {
         serialize_datetime(&dt, serializer)
      },
      _ => unreachable!(),
   }
}

pub fn deserialize_datetime_option<'de, D>(deserializer: D) -> Result<Option<chrono::DateTime<Utc>>, D::Error>
where
   D: Deserializer<'de>,
{
   match deserialize_datetime(deserializer) {
      Ok(result)=>Ok(Some(result)),
      Err(error) => Err(error),
   }
}

pub fn deserialize_datetime<'de, D>(deserializer: D) -> Result<chrono::DateTime<Utc>, D::Error>
where
   D: Deserializer<'de>,
{
   let datetime_str = String::deserialize(deserializer)?;
   Utc.datetime_from_str(&datetime_str, "%Y-%m-%dT%H:%M:%S%.3f%Z").map_err(serde::de::Error::custom)
}
   
pub fn serialize_datetime<S>(datetime: &chrono::DateTime<Utc>, serializer: S) -> Result<S::Ok, S::Error>
where
   S: Serializer,
{
   let datetime_str = datetime.format("%+").to_string();
   serializer.serialize_str(&datetime_str)
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'rust' 3`] = `
{
  "key": "concerto_1_0_0.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub struct Concept {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Asset {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Participant {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Transaction {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Event {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'rust' 4`] = `
{
  "key": "concerto.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub struct Concept {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Asset {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Participant {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Transaction {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Event {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'rust' 5`] = `
{
  "key": "org_acme_hr_base.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::concerto_1_0_0::*;
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub enum State {
   #[allow(non_camel_case_types)]
   MA,
   #[allow(non_camel_case_types)]
   NY,
   #[allow(non_camel_case_types)]
   CO,
   #[allow(non_camel_case_types)]
   WA,
   #[allow(non_camel_case_types)]
   IL,
   #[allow(non_camel_case_types)]
   CA,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum TShirtSizeType {
   #[allow(non_camel_case_types)]
   SMALL,
   #[allow(non_camel_case_types)]
   MEDIUM,
   #[allow(non_camel_case_types)]
   LARGE,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Address {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "street",
   )]
   pub street: String,
   
   #[serde(
      rename = "city",
   )]
   pub city: String,
   
   #[serde(
      rename = "state",
      skip_serializing_if = "Option::is_none",
   )]
   pub state: Option<State>,
   
   #[serde(
      rename = "zipCode",
   )]
   pub zip_code: String,
   
   #[serde(
      rename = "country",
   )]
   pub country: String,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'rust' 6`] = `
{
  "key": "org_acme_hr.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::org_acme_hr_base::*;
use crate::concerto_1_0_0::*;
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub struct Company {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "name",
   )]
   pub name: String,
   
   #[serde(
      rename = "headquarters",
   )]
   pub headquarters: Address,
   
   #[serde(
      rename = "companyProperties",
      skip_serializing_if = "Option::is_none",
   )]
   pub company_properties: Option<CompanyProperties>,
   
   #[serde(
      rename = "employeeDirectory",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_directory: Option<EmployeeDirectory>,
   
   #[serde(
      rename = "employeeTShirtSizes",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_t_shirt_sizes: Option<EmployeeTShirtSizes>,
   
   #[serde(
      rename = "employeeProfiles",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_profiles: Option<EmployeeProfiles>,
   
   #[serde(
      rename = "employeeSocialSecurityNumbers",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_social_security_numbers: Option<EmployeeSocialSecurityNumbers>,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum Department {
   #[allow(non_camel_case_types)]
   Sales,
   #[allow(non_camel_case_types)]
   Marketing,
   #[allow(non_camel_case_types)]
   Finance,
   #[allow(non_camel_case_types)]
   HR,
   #[allow(non_camel_case_types)]
   Engineering,
   #[allow(non_camel_case_types)]
   Design,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Equipment {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "serialNumber",
   )]
   pub serial_number: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum LaptopMake {
   #[allow(non_camel_case_types)]
   Apple,
   #[allow(non_camel_case_types)]
   Microsoft,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Laptop {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "make",
   )]
   pub make: LaptopMake,
   
   #[serde(
      rename = "serialNumber",
   )]
   pub serial_number: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Person {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Employee {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "employeeId",
   )]
   pub employee_id: String,
   
   #[serde(
      rename = "salary",
   )]
   pub salary: u64,
   
   #[serde(
      rename = "numDependents",
   )]
   pub num_dependents: Integer,
   
   #[serde(
      rename = "retired",
   )]
   pub retired: bool,
   
   #[serde(
      rename = "department",
   )]
   pub department: Department,
   
   #[serde(
      rename = "officeAddress",
   )]
   pub office_address: Address,
   
   #[serde(
      rename = "companyAssets",
   )]
   pub company_assets: Vec<Equipment>,
   
   #[serde(rename = "manager")]
   pub manager: Option<Manager>,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Contractor {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "company",
   )]
   pub company: Company,
   
   #[serde(rename = "manager")]
   pub manager: Option<Manager>,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Manager {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(rename = "reports")]
   pub reports: Option<Vec<Person>>,
   
   #[serde(
      rename = "employeeId",
   )]
   pub employee_id: String,
   
   #[serde(
      rename = "salary",
   )]
   pub salary: u64,
   
   #[serde(
      rename = "numDependents",
   )]
   pub num_dependents: Integer,
   
   #[serde(
      rename = "retired",
   )]
   pub retired: bool,
   
   #[serde(
      rename = "department",
   )]
   pub department: Department,
   
   #[serde(
      rename = "officeAddress",
   )]
   pub office_address: Address,
   
   #[serde(
      rename = "companyAssets",
   )]
   pub company_assets: Vec<Equipment>,
   
   #[serde(rename = "manager")]
   pub manager: Option<Manager>,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct CompanyEvent {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Onboarded {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(rename = "employee")]
   pub employee: Employee,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct ChangeOfAddress {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(rename = "Person")]
   pub person: Person,
   
   #[serde(
      rename = "newAddress",
   )]
   pub new_address: Address,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'typescript' 1`] = `
{
  "key": "concerto@1.0.0.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: concerto@1.0.0

// imports

// Warning: Beware of circular dependencies when modifying these imports
import type {
	State,
	TShirtSizeType,
	IAddress
} from './org.acme.hr.base';
import type {
	ICompany,
	Department,
	LaptopMake
} from './org.acme.hr';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	IEquipment
} from './org.acme.hr';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	IPerson
} from './org.acme.hr';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	IChangeOfAddress
} from './org.acme.hr';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	ICompanyEvent
} from './org.acme.hr';

// interfaces
export interface IConcept {
   $class: string;
}

export type ConceptUnion = IAddress | 
ICompany;

export interface IAsset extends IConcept {
   $identifier: string;
}

export type AssetUnion = IEquipment;

export interface IParticipant extends IConcept {
   $identifier: string;
}

export type ParticipantUnion = IPerson;

export interface ITransaction extends IConcept {
   $timestamp: Date;
}

export type TransactionUnion = IChangeOfAddress;

export interface IEvent extends IConcept {
   $timestamp: Date;
}

export type EventUnion = ICompanyEvent;

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'typescript' 2`] = `
{
  "key": "concerto.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: concerto

// imports

// interfaces
export interface IConcept {
   $class: string;
}

export interface IAsset extends IConcept {
   $identifier: string;
}

export interface IParticipant extends IConcept {
   $identifier: string;
}

export interface ITransaction extends IConcept {
}

export interface IEvent extends IConcept {
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'typescript' 3`] = `
{
  "key": "org.acme.hr.base.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: org.acme.hr.base

// imports
import {IConcept} from './concerto@1.0.0';

// interfaces
export enum State {
   MA = 'MA',
   NY = 'NY',
   CO = 'CO',
   WA = 'WA',
   IL = 'IL',
   CA = 'CA',
}

export enum TShirtSizeType {
   SMALL = 'SMALL',
   MEDIUM = 'MEDIUM',
   LARGE = 'LARGE',
}

export type EmployeeTShirtSizes = Map<string, ITShirtSizeType>;

export interface IAddress extends IConcept {
   street: string;
   city: string;
   state?: State;
   zipCode: string;
   country: string;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'typescript' 4`] = `
{
  "key": "org.acme.hr.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: org.acme.hr

// imports

// Warning: Beware of circular dependencies when modifying these imports

// Warning: Beware of circular dependencies when modifying these imports

// Warning: Beware of circular dependencies when modifying these imports

// Warning: Beware of circular dependencies when modifying these imports
import {IAddress,IEmployeeTShirtSizes,ISSN} from './org.acme.hr.base';
import {IConcept,IAsset,IParticipant,IEvent,ITransaction} from './concerto@1.0.0';

// interfaces
export type CompanyProperties = Map<string, string>;

export type EmployeeLoginTimes = Map<string, Date>;

export type EmployeeSocialSecurityNumbers = Map<string, string>;

export type NextOfKin = Map<string, Date>;

export type EmployeeProfiles = Map<string, IConcept>;

export type EmployeeDirectory = Map<string, IEmployee>;

export interface ICompany extends IConcept {
   name: string;
   headquarters: IAddress;
   companyProperties?: CompanyProperties;
   employeeDirectory?: EmployeeDirectory;
   employeeTShirtSizes?: EmployeeTShirtSizes;
   employeeProfiles?: EmployeeProfiles;
   employeeSocialSecurityNumbers?: EmployeeSocialSecurityNumbers;
}

export enum Department {
   Sales = 'Sales',
   Marketing = 'Marketing',
   Finance = 'Finance',
   HR = 'HR',
   Engineering = 'Engineering',
   Design = 'Design',
}

export interface IEquipment extends IAsset {
   serialNumber: string;
}

export type EquipmentUnion = ILaptop;

export enum LaptopMake {
   Apple = 'Apple',
   Microsoft = 'Microsoft',
}

export interface ILaptop extends IEquipment {
   make: LaptopMake;
}

export interface IPerson extends IParticipant {
   email: string;
   firstName: string;
   lastName: string;
   middleNames?: string;
   homeAddress: IAddress;
   ssn: string;
   height: number;
   dob: Date;
   nextOfKin: NextOfKin;
}

export type PersonUnion = IEmployee | 
IContractor;

export interface IEmployee extends IPerson {
   employeeId: string;
   salary: number;
   numDependents: number;
   retired: boolean;
   department: Department;
   officeAddress: IAddress;
   companyAssets: IEquipment[];
   manager?: IManager;
}

export type EmployeeUnion = IManager;

export interface IContractor extends IPerson {
   company: ICompany;
   manager?: IManager;
}

export interface IManager extends IEmployee {
   reports?: IPerson[];
}

export interface ICompanyEvent extends IEvent {
}

export type CompanyEventUnion = IOnboarded;

export interface IOnboarded extends ICompanyEvent {
   employee: IEmployee;
}

export interface IChangeOfAddress extends ITransaction {
   Person: IPerson;
   newAddress: IAddress;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'vocabulary' 1`] = `
{
  "key": "org.acme.hr.base_en.voc",
  "value": "#Generated vocabulary for namespace: org.acme.hr.base
locale: en
namespace: org.acme.hr.base
declarations:
  - State: State
    properties:
      - MA: MA of the State
      - NY: NY of the State
      - CO: CO of the State
      - WA: WA of the State
      - IL: IL of the State
      - CA: CA of the State
  - TShirtSizeType: TShirt Size Type
    properties:
      - SMALL: SMALL of the TShirt Size Type
      - MEDIUM: MEDIUM of the TShirt Size Type
      - LARGE: LARGE of the TShirt Size Type
  - Address: Address
    properties:
      - street: Street of the Address
      - city: City of the Address
      - state: State of the Address
      - zipCode: Zip Code of the Address
      - country: Country of the Address
  - Time: Time
  - SSN: SSN
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'vocabulary' 2`] = `
{
  "key": "org.acme.hr_en.voc",
  "value": "#Generated vocabulary for namespace: org.acme.hr
locale: en
namespace: org.acme.hr
declarations:
  - Company: Company
    properties:
      - name: Name of the Company
      - headquarters: Headquarters of the Company
      - companyProperties: Company Properties of the Company
      - employeeDirectory: Employee Directory of the Company
      - employeeTShirtSizes: Employee TShirt Sizes of the Company
      - employeeProfiles: Employee Profiles of the Company
      - employeeSocialSecurityNumbers: Employee Social Security Numbers of the Company
  - Department: Department
    properties:
      - Sales: Sales of the Department
      - Marketing: Marketing of the Department
      - Finance: Finance of the Department
      - HR: HR of the Department
      - Engineering: Engineering of the Department
      - Design: Design of the Department
  - Equipment: Equipment
    properties:
      - serialNumber: Serial Number of the Equipment
  - LaptopMake: Laptop Make
    properties:
      - Apple: Apple of the Laptop Make
      - Microsoft: Microsoft of the Laptop Make
  - Laptop: Laptop
    properties:
      - make: Make of the Laptop
  - Person: Person
    properties:
      - email: Email of the Person
      - firstName: First Name of the Person
      - lastName: Last Name of the Person
      - middleNames: Middle Names of the Person
      - homeAddress: Home Address of the Person
      - ssn: Ssn of the Person
      - height: Height of the Person
      - dob: Dob of the Person
      - nextOfKin: Next Of Kin of the Person
  - Employee: Employee
    properties:
      - employeeId: Employee Id of the Employee
      - salary: Salary of the Employee
      - numDependents: Num Dependents of the Employee
      - retired: Retired of the Employee
      - department: Department of the Employee
      - officeAddress: Office Address of the Employee
      - companyAssets: Company Assets of the Employee
      - manager: Manager of the Employee
  - Contractor: Contractor
    properties:
      - company: Company of the Contractor
      - manager: Manager of the Contractor
  - Manager: Manager
    properties:
      - reports: Reports of the Manager
  - CompanyEvent: Company Event
  - Onboarded: Onboarded
    properties:
      - employee: Employee of the Onboarded
  - ChangeOfAddress: Change Of Address
    properties:
      - Person: Person of the Change Of Address
      - newAddress: New Address of the Change Of Address
  - KinName: Kin Name
  - KinTelephone: Kin Telephone
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'xmlschema' 1`] = `
{
  "key": "concerto@1.0.0.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:concerto="concerto" targetNamespace="concerto" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
>
<xs:complexType name="Concept">
   <xs:sequence>
   </xs:sequence>
</xs:complexType>
<xs:element name="Concept" type="concerto:Concept"/>
<xs:complexType name="Asset">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Asset" type="concerto:Asset"/>
<xs:complexType name="Participant">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Participant" type="concerto:Participant"/>
<xs:complexType name="Transaction">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_timestamp" type="xs:dateTime"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Transaction" type="concerto:Transaction"/>
<xs:complexType name="Event">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_timestamp" type="xs:dateTime"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Event" type="concerto:Event"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'xmlschema' 2`] = `
{
  "key": "concerto.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:concerto="concerto" targetNamespace="concerto" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
>
<xs:complexType name="Concept">
   <xs:sequence>
   </xs:sequence>
</xs:complexType>
<xs:element name="Concept" type="concerto:Concept"/>
<xs:complexType name="Asset">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Asset" type="concerto:Asset"/>
<xs:complexType name="Participant">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Participant" type="concerto:Participant"/>
<xs:complexType name="Transaction">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Transaction" type="concerto:Transaction"/>
<xs:complexType name="Event">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Event" type="concerto:Event"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'xmlschema' 3`] = `
{
  "key": "org.acme.hr.base.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:org.acme.hr.base="org.acme.hr.base" targetNamespace="org.acme.hr.base" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:concerto="concerto"
>
<xs:import namespace="concerto" schemaLocation="concerto@1.0.0.xsd"/>
<xs:simpleType name="State">
   <xs:restriction base="xs:string">
      <xs:enumeration value="MA"/>
      <xs:enumeration value="NY"/>
      <xs:enumeration value="CO"/>
      <xs:enumeration value="WA"/>
      <xs:enumeration value="IL"/>
      <xs:enumeration value="CA"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="State" type="org.acme.hr.base:State"/>
<xs:simpleType name="TShirtSizeType">
   <xs:restriction base="xs:string">
      <xs:enumeration value="SMALL"/>
      <xs:enumeration value="MEDIUM"/>
      <xs:enumeration value="LARGE"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="TShirtSizeType" type="org.acme.hr.base:TShirtSizeType"/>
<xs:complexType name="Address">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="street" type="xs:string"/>
      <xs:element name="city" type="xs:string"/>
      <xs:element name="state" type="org.acme.hr.base:State"/>
      <xs:element name="zipCode" type="xs:string"/>
      <xs:element name="country" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Address" type="org.acme.hr.base:Address"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace unversioned CTO, format 'xmlschema' 4`] = `
{
  "key": "org.acme.hr.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:org.acme.hr="org.acme.hr" targetNamespace="org.acme.hr" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:org.acme.hr.base="org.acme.hr.base"
xmlns:concerto="concerto"
>
<xs:import namespace="org.acme.hr.base" schemaLocation="org.acme.hr.base.xsd"/>
<xs:import namespace="concerto" schemaLocation="concerto@1.0.0.xsd"/>
<xs:complexType name="Company">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="headquarters" type="org.acme.hr.base:Address"/>
      <xs:element name="companyProperties" type="org.acme.hr:CompanyProperties"/>
      <xs:element name="employeeDirectory" type="org.acme.hr:EmployeeDirectory"/>
      <xs:element name="employeeTShirtSizes" type="org.acme.hr.base:EmployeeTShirtSizes"/>
      <xs:element name="employeeProfiles" type="org.acme.hr:EmployeeProfiles"/>
      <xs:element name="employeeSocialSecurityNumbers" type="org.acme.hr:EmployeeSocialSecurityNumbers"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Company" type="org.acme.hr:Company"/>
<xs:simpleType name="Department">
   <xs:restriction base="xs:string">
      <xs:enumeration value="Sales"/>
      <xs:enumeration value="Marketing"/>
      <xs:enumeration value="Finance"/>
      <xs:enumeration value="HR"/>
      <xs:enumeration value="Engineering"/>
      <xs:enumeration value="Design"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="Department" type="org.acme.hr:Department"/>
<xs:complexType name="Equipment">
   <xs:complexContent>
   <xs:extension base="concerto:Asset">
   <xs:sequence>
      <xs:element name="serialNumber" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Equipment" type="org.acme.hr:Equipment"/>
<xs:simpleType name="LaptopMake">
   <xs:restriction base="xs:string">
      <xs:enumeration value="Apple"/>
      <xs:enumeration value="Microsoft"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="LaptopMake" type="org.acme.hr:LaptopMake"/>
<xs:complexType name="Laptop">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Equipment">
   <xs:sequence>
      <xs:element name="make" type="org.acme.hr:LaptopMake"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Laptop" type="org.acme.hr:Laptop"/>
<xs:complexType name="Person">
   <xs:complexContent>
   <xs:extension base="concerto:Participant">
   <xs:sequence>
      <xs:element name="email" type="xs:string"/>
      <xs:element name="firstName" type="xs:string"/>
      <xs:element name="lastName" type="xs:string"/>
      <xs:element name="middleNames" type="xs:string"/>
      <xs:element name="homeAddress" type="org.acme.hr.base:Address"/>
      <xs:element name="ssn" type="xs:string"/>
      <xs:element name="height" type="xs:double"/>
      <xs:element name="dob" type="xs:dateTime"/>
      <xs:element name="nextOfKin" type="org.acme.hr:NextOfKin"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Person" type="org.acme.hr:Person"/>
<xs:complexType name="Employee">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Person">
   <xs:sequence>
      <xs:element name="employeeId" type="xs:string"/>
      <xs:element name="salary" type="xs:long"/>
      <xs:element name="numDependents" type="xs:integer"/>
      <xs:element name="retired" type="xs:boolean"/>
      <xs:element name="department" type="org.acme.hr:Department"/>
      <xs:element name="officeAddress" type="org.acme.hr.base:Address"/>
      <xs:element name="companyAssets" type="org.acme.hr:Equipment" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="manager" type="org.acme.hr:Manager"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Employee" type="org.acme.hr:Employee"/>
<xs:complexType name="Contractor">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Person">
   <xs:sequence>
      <xs:element name="company" type="org.acme.hr:Company"/>
      <xs:element name="manager" type="org.acme.hr:Manager"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Contractor" type="org.acme.hr:Contractor"/>
<xs:complexType name="Manager">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Employee">
   <xs:sequence>
      <xs:element name="reports" type="org.acme.hr:Person" minOccurs="0" maxOccurs="unbounded"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Manager" type="org.acme.hr:Manager"/>
<xs:complexType name="CompanyEvent">
   <xs:complexContent>
   <xs:extension base="concerto:Event">
   <xs:sequence>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="CompanyEvent" type="org.acme.hr:CompanyEvent"/>
<xs:complexType name="Onboarded">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:CompanyEvent">
   <xs:sequence>
      <xs:element name="employee" type="org.acme.hr:Employee"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Onboarded" type="org.acme.hr:Onboarded"/>
<xs:complexType name="ChangeOfAddress">
   <xs:complexContent>
   <xs:extension base="concerto:Transaction">
   <xs:sequence>
      <xs:element name="Person" type="org.acme.hr:Person"/>
      <xs:element name="newAddress" type="org.acme.hr.base:Address"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="ChangeOfAddress" type="org.acme.hr:ChangeOfAddress"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO without the base model, format 'mermaid' 1`] = `
{
  "key": "model.mmd",
  "value": "classDiagram
class \`org.acme.hr.base@1.0.0.State\` {
<< enumeration>>
   + \`MA\`
   + \`NY\`
   + \`CO\`
   + \`WA\`
   + \`IL\`
   + \`CA\`
}

class \`org.acme.hr.base@1.0.0.TShirtSizeType\` {
<< enumeration>>
   + \`SMALL\`
   + \`MEDIUM\`
   + \`LARGE\`
}

class \`org.acme.hr.base@1.0.0.Address\` {
<< concept>>
   + \`String\` \`street\`
   + \`String\` \`city\`
   + \`State\` \`state\`
   + \`String\` \`zipCode\`
   + \`String\` \`country\`
}

\`org.acme.hr.base@1.0.0.Address\` "1" *-- "1" \`org.acme.hr.base@1.0.0.State\`
class \`org.acme.hr@1.0.0.Company\` {
<< concept>>
   + \`String\` \`name\`
   + \`Address\` \`headquarters\`
   + \`CompanyProperties\` \`companyProperties\`
   + \`EmployeeDirectory\` \`employeeDirectory\`
   + \`EmployeeTShirtSizes\` \`employeeTShirtSizes\`
   + \`EmployeeProfiles\` \`employeeProfiles\`
   + \`EmployeeSocialSecurityNumbers\` \`employeeSocialSecurityNumbers\`
}

\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.CompanyProperties\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeDirectory\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr.base@1.0.0.EmployeeTShirtSizes\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeProfiles\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeSocialSecurityNumbers\`
class \`org.acme.hr@1.0.0.Department\` {
<< enumeration>>
   + \`Sales\`
   + \`Marketing\`
   + \`Finance\`
   + \`HR\`
   + \`Engineering\`
   + \`Design\`
}

class \`org.acme.hr@1.0.0.Equipment\` {
<< asset>>
   + \`String\` \`serialNumber\`
}

class \`org.acme.hr@1.0.0.LaptopMake\` {
<< enumeration>>
   + \`Apple\`
   + \`Microsoft\`
}

class \`org.acme.hr@1.0.0.Laptop\` {
<< asset>>
   + \`LaptopMake\` \`make\`
}

\`org.acme.hr@1.0.0.Laptop\` "1" *-- "1" \`org.acme.hr@1.0.0.LaptopMake\`
\`org.acme.hr@1.0.0.Laptop\` --|> \`org.acme.hr@1.0.0.Equipment\`
class \`org.acme.hr@1.0.0.Person\` {
<< participant>>
   + \`String\` \`email\`
   + \`String\` \`firstName\`
   + \`String\` \`lastName\`
   + \`String\` \`middleNames\`
   + \`Address\` \`homeAddress\`
   + \`String\` \`ssn\`
   + \`Double\` \`height\`
   + \`DateTime\` \`dob\`
   + \`NextOfKin\` \`nextOfKin\`
}

\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr.base@1.0.0.SSN\`
\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr@1.0.0.NextOfKin\`
class \`org.acme.hr@1.0.0.Employee\` {
<< participant>>
   + \`String\` \`employeeId\`
   + \`Long\` \`salary\`
   + \`Integer\` \`numDependents\`
   + \`Boolean\` \`retired\`
   + \`Department\` \`department\`
   + \`Address\` \`officeAddress\`
   + \`Equipment[]\` \`companyAssets\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr@1.0.0.Employee\` "1" *-- "1" \`org.acme.hr@1.0.0.Department\`
\`org.acme.hr@1.0.0.Employee\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Employee\` "1" *-- "*" \`org.acme.hr@1.0.0.Equipment\`
\`org.acme.hr@1.0.0.Employee\` "1" o-- "1" \`org.acme.hr@1.0.0.Manager\` : manager
\`org.acme.hr@1.0.0.Employee\` --|> \`org.acme.hr@1.0.0.Person\`
class \`org.acme.hr@1.0.0.Contractor\` {
<< participant>>
   + \`Company\` \`company\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr@1.0.0.Contractor\` "1" *-- "1" \`org.acme.hr@1.0.0.Company\`
\`org.acme.hr@1.0.0.Contractor\` "1" o-- "1" \`org.acme.hr@1.0.0.Manager\` : manager
\`org.acme.hr@1.0.0.Contractor\` --|> \`org.acme.hr@1.0.0.Person\`
class \`org.acme.hr@1.0.0.Manager\` {
<< participant>>
   + \`Person[]\` \`reports\`
}

\`org.acme.hr@1.0.0.Manager\` "1" o-- "*" \`org.acme.hr@1.0.0.Person\` : reports
\`org.acme.hr@1.0.0.Manager\` --|> \`org.acme.hr@1.0.0.Employee\`
class \`org.acme.hr@1.0.0.CompanyEvent\`
<< event>> \`org.acme.hr@1.0.0.CompanyEvent\`

class \`org.acme.hr@1.0.0.Onboarded\` {
<< event>>
   + \`Employee\` \`employee\`
}

\`org.acme.hr@1.0.0.Onboarded\` "1" o-- "1" \`org.acme.hr@1.0.0.Employee\` : employee
\`org.acme.hr@1.0.0.Onboarded\` --|> \`org.acme.hr@1.0.0.CompanyEvent\`
class \`org.acme.hr@1.0.0.ChangeOfAddress\` {
<< transaction>>
   + \`Person\` \`Person\`
   + \`Address\` \`newAddress\`
}

\`org.acme.hr@1.0.0.ChangeOfAddress\` "1" o-- "1" \`org.acme.hr@1.0.0.Person\` : Person
\`org.acme.hr@1.0.0.ChangeOfAddress\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO without the base model, format 'plantuml' 1`] = `
{
  "key": "model.puml",
  "value": "@startuml
title
Model
endtitle
class org.acme.hr.base_1_0_0.State << (E,grey) >> {
   + MA
   + NY
   + CO
   + WA
   + IL
   + CA
}
class org.acme.hr.base_1_0_0.TShirtSizeType << (E,grey) >> {
   + SMALL
   + MEDIUM
   + LARGE
}
class org.acme.hr.base_1_0_0.Address {
   + String street
   + String city
   + State state
   + String zipCode
   + String country
}
org.acme.hr.base_1_0_0.Address "1" *-- "1" org.acme.hr.base_1_0_0.State : state
class org.acme.hr_1_0_0.Company {
   + String name
   + Address headquarters
   + CompanyProperties companyProperties
   + EmployeeDirectory employeeDirectory
   + EmployeeTShirtSizes employeeTShirtSizes
   + EmployeeProfiles employeeProfiles
   + EmployeeSocialSecurityNumbers employeeSocialSecurityNumbers
}
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr.base_1_0_0.Address : headquarters
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.CompanyProperties : companyProperties
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.EmployeeDirectory : employeeDirectory
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr.base_1_0_0.EmployeeTShirtSizes : employeeTShirtSizes
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.EmployeeProfiles : employeeProfiles
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.EmployeeSocialSecurityNumbers : employeeSocialSecurityNumbers
class org.acme.hr_1_0_0.Department << (E,grey) >> {
   + Sales
   + Marketing
   + Finance
   + HR
   + Engineering
   + Design
}
class org.acme.hr_1_0_0.Equipment << (A,green) >> {
   + String serialNumber
}
class org.acme.hr_1_0_0.LaptopMake << (E,grey) >> {
   + Apple
   + Microsoft
}
class org.acme.hr_1_0_0.Laptop << (A,green) >> {
   + LaptopMake make
}
org.acme.hr_1_0_0.Laptop "1" *-- "1" org.acme.hr_1_0_0.LaptopMake : make
org.acme.hr_1_0_0.Laptop --|> org.acme.hr_1_0_0.Equipment
class org.acme.hr_1_0_0.Person << (P,lightblue) >> {
   + String email
   + String firstName
   + String lastName
   + String middleNames
   + Address homeAddress
   + String ssn
   + Double height
   + DateTime dob
   + NextOfKin nextOfKin
}
org.acme.hr_1_0_0.Person "1" *-- "1" org.acme.hr.base_1_0_0.Address : homeAddress
org.acme.hr_1_0_0.Person "1" *-- "1" org.acme.hr.base_1_0_0.SSN : ssn
org.acme.hr_1_0_0.Person "1" *-- "1" org.acme.hr_1_0_0.NextOfKin : nextOfKin
class org.acme.hr_1_0_0.Employee << (P,lightblue) >> {
   + String employeeId
   + Long salary
   + Integer numDependents
   + Boolean retired
   + Department department
   + Address officeAddress
   + Equipment[] companyAssets
   + Manager manager
}
org.acme.hr_1_0_0.Employee "1" *-- "1" org.acme.hr_1_0_0.Department : department
org.acme.hr_1_0_0.Employee "1" *-- "1" org.acme.hr.base_1_0_0.Address : officeAddress
org.acme.hr_1_0_0.Employee "1" *-- "*" org.acme.hr_1_0_0.Equipment : companyAssets
org.acme.hr_1_0_0.Employee "1" o-- "1" org.acme.hr_1_0_0.Manager : manager
org.acme.hr_1_0_0.Employee --|> org.acme.hr_1_0_0.Person
class org.acme.hr_1_0_0.Contractor << (P,lightblue) >> {
   + Company company
   + Manager manager
}
org.acme.hr_1_0_0.Contractor "1" *-- "1" org.acme.hr_1_0_0.Company : company
org.acme.hr_1_0_0.Contractor "1" o-- "1" org.acme.hr_1_0_0.Manager : manager
org.acme.hr_1_0_0.Contractor --|> org.acme.hr_1_0_0.Person
class org.acme.hr_1_0_0.Manager << (P,lightblue) >> {
   + Person[] reports
}
org.acme.hr_1_0_0.Manager "1" o-- "*" org.acme.hr_1_0_0.Person : reports
org.acme.hr_1_0_0.Manager --|> org.acme.hr_1_0_0.Employee
class org.acme.hr_1_0_0.CompanyEvent {
}
class org.acme.hr_1_0_0.Onboarded {
   + Employee employee
}
org.acme.hr_1_0_0.Onboarded "1" o-- "1" org.acme.hr_1_0_0.Employee : employee
org.acme.hr_1_0_0.Onboarded --|> org.acme.hr_1_0_0.CompanyEvent
class org.acme.hr_1_0_0.ChangeOfAddress << (T,yellow) >> {
   + Person Person
   + Address newAddress
}
org.acme.hr_1_0_0.ChangeOfAddress "1" o-- "1" org.acme.hr_1_0_0.Person : Person
org.acme.hr_1_0_0.ChangeOfAddress "1" *-- "1" org.acme.hr.base_1_0_0.Address : newAddress
@enduml
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'avro' 1`] = `
{
  "key": "concerto@1.0.0.avdl",
  "value": "@namespace("concerto@1.0.0")
protocol MyProtocol {

   
   record Concept {
   }

   record Asset {
      string _identifier;
   }

   record Participant {
      string _identifier;
   }

   record Transaction {
      @logicalType("timestamp-micros")
      long _timestamp;
   }

   record Event {
      @logicalType("timestamp-micros")
      long _timestamp;
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'avro' 2`] = `
{
  "key": "concerto.avdl",
  "value": "@namespace("concerto")
protocol MyProtocol {

   
   record Concept {
   }

   record Asset {
      string _identifier;
   }

   record Participant {
      string _identifier;
   }

   record Transaction {
   }

   record Event {
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'avro' 3`] = `
{
  "key": "org.acme.hr.base@1.0.0.avdl",
  "value": "@namespace("org.acme.hr.base@1.0.0")
protocol MyProtocol {

   import idl "concerto@1.0.0.avdl";
   
   enum State {
      MA,
      NY,
      CO,
      WA,
      IL,
      CA
   }

   enum TShirtSizeType {
      SMALL,
      MEDIUM,
      LARGE
   }

   record Address {
      string street;
      string city;
      union { null, State } state;
      string zipCode;
      string country;
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'avro' 4`] = `
{
  "key": "org.acme.hr@1.0.0.avdl",
  "value": "@namespace("org.acme.hr@1.0.0")
protocol MyProtocol {

   import idl "org.acme.hr.base@1.0.0.avdl";
   import idl "concerto@1.0.0.avdl";
   
   record Company {
      string name;
      Address headquarters;
      union { null, CompanyProperties } companyProperties;
      union { null, EmployeeDirectory } employeeDirectory;
      union { null, EmployeeTShirtSizes } employeeTShirtSizes;
      union { null, EmployeeProfiles } employeeProfiles;
      union { null, EmployeeSocialSecurityNumbers } employeeSocialSecurityNumbers;
   }

   enum Department {
      Sales,
      Marketing,
      Finance,
      HR,
      Engineering,
      Design
   }

   record Equipment {
      string serialNumber;
   }

   enum LaptopMake {
      Apple,
      Microsoft
   }

   record Laptop {
      LaptopMake make;
      string serialNumber;
   }

   record Person {
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record Employee {
      string employeeId;
      long salary;
      int numDependents;
      boolean retired;
      Department department;
      Address officeAddress;
      array<Equipment> companyAssets;
      union { null, string } manager;
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record Contractor {
      Company company;
      union { null, string } manager;
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record Manager {
      union { null, array<string> } reports;
      string employeeId;
      long salary;
      int numDependents;
      boolean retired;
      Department department;
      Address officeAddress;
      array<Equipment> companyAssets;
      union { null, string } manager;
      string email;
      string firstName;
      string lastName;
      union { null, string } middleNames;
      Address homeAddress;
      string ssn;
      double height;
      @logicalType("timestamp-micros")
      long dob;
      NextOfKin nextOfKin;
   }

   record CompanyEvent {
      @logicalType("timestamp-micros")
      long _timestamp;
   }

   record Onboarded {
      string employee;
      @logicalType("timestamp-micros")
      long _timestamp;
   }

   record ChangeOfAddress {
      string Person;
      Address newAddress;
      @logicalType("timestamp-micros")
      long _timestamp;
   }

}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'csharp' 1`] = `
{
  "key": "concerto@1.0.0.cs",
  "value": "namespace AccordProject.Concerto;
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Concept")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public virtual string _class { get; } = "concerto@1.0.0.Concept";
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Asset")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Asset : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Asset";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Participant")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Participant : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Participant";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Transaction")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Transaction : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Transaction";
   [System.Text.Json.Serialization.JsonPropertyName("$timestamp")]
   public System.DateTime _timestamp { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = "1.0.0", Name = "Event")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Event : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto@1.0.0.Event";
   [System.Text.Json.Serialization.JsonPropertyName("$timestamp")]
   public System.DateTime _timestamp { get; set; }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'csharp' 2`] = `
{
  "key": "concerto.cs",
  "value": "namespace AccordProject.Concerto;
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Concept")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public virtual string _class { get; } = "concerto.Concept";
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Asset")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Asset : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Asset";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Participant")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Participant : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Participant";
   [AccordProject.Concerto.Identifier()]
   [System.Text.Json.Serialization.JsonPropertyName("$identifier")]
   public string _identifier { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Transaction")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Transaction : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Transaction";
}
[AccordProject.Concerto.Type(Namespace = "concerto", Version = null, Name = "Event")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Event : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "concerto.Event";
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'csharp' 3`] = `
{
  "key": "org.acme.hr.base@1.0.0.cs",
  "value": "namespace org.acme.hr.base;
using AccordProject.Concerto;
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum State {
      MA,
      NY,
      CO,
      WA,
      IL,
      CA,
}
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum TShirtSizeType {
      SMALL,
      MEDIUM,
      LARGE,
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr.base", Version = "1.0.0", Name = "Address")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Address : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr.base@1.0.0.Address";
   public string street { get; set; }
   public string city { get; set; }
   public State? state { get; set; }
   public string zipCode { get; set; }
   public string country { get; set; }
}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class Time_Dummy {}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class SSN_Dummy {}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'csharp' 4`] = `
{
  "key": "org.acme.hr@1.0.0.cs",
  "value": "namespace org.acme.hr;
using org.acme.hr.base;
using AccordProject.Concerto;
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Company")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Company : Concept {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Company";
   public string name { get; set; }
   public org.acme.hr.base.Address headquarters { get; set; }
   public Dictionary<string, string> companyProperties { get; set; }
   public Dictionary<string, Employee> employeeDirectory { get; set; }
   public Dictionary<string, TShirtSizeType> employeeTShirtSizes { get; set; }
   public Dictionary<string, Concept> employeeProfiles { get; set; }
   public Dictionary<string, SSN> employeeSocialSecurityNumbers { get; set; }
}
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum Department {
      Sales,
      Marketing,
      Finance,
      HR,
      Engineering,
      Design,
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Equipment")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Equipment : Asset {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Equipment";
   [AccordProject.Concerto.Identifier()]
   public string serialNumber { get; set; }
}
[System.Text.Json.Serialization.JsonConverter(typeof(System.Text.Json.Serialization.JsonStringEnumConverter))]
public enum LaptopMake {
      Apple,
      Microsoft,
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Laptop")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Laptop : Equipment {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Laptop";
   public LaptopMake make { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Person")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public abstract class Person : Participant {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Person";
   [AccordProject.Concerto.Identifier()]
   public string email { get; set; }
   public string firstName { get; set; }
   public string lastName { get; set; }
   public string? middleNames { get; set; }
   public org.acme.hr.base.Address homeAddress { get; set; }
   [System.ComponentModel.DataAnnotations.RegularExpression(@"\\d{3}-\\d{2}-\\{4}+", ErrorMessage = "Invalid characters")]
   public string ssn { get; set; }
   public float height { get; set; }
   public System.DateTime dob { get; set; }
   public Dictionary<string, KinTelephone> nextOfKin { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Employee")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Employee : Person {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Employee";
   public string employeeId { get; set; }
   public long salary { get; set; }
   public int numDependents { get; set; }
   public bool retired { get; set; }
   public Department department { get; set; }
   public org.acme.hr.base.Address officeAddress { get; set; }
   public Equipment[] companyAssets { get; set; }
   public Manager manager { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Contractor")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Contractor : Person {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Contractor";
   public Company company { get; set; }
   public Manager manager { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Manager")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Manager : Employee {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Manager";
   public Person[] reports { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "CompanyEvent")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class CompanyEvent : Event {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.CompanyEvent";
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "Onboarded")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class Onboarded : CompanyEvent {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.Onboarded";
   public Employee employee { get; set; }
}
[AccordProject.Concerto.Type(Namespace = "org.acme.hr", Version = "1.0.0", Name = "ChangeOfAddress")]
[System.Text.Json.Serialization.JsonConverter(typeof(AccordProject.Concerto.ConcertoConverterFactorySystem))]
public class ChangeOfAddress : Transaction {
   [System.Text.Json.Serialization.JsonPropertyName("$class")]
   public override string _class { get; } = "org.acme.hr@1.0.0.ChangeOfAddress";
   public Person Person { get; set; }
   public org.acme.hr.base.Address newAddress { get; set; }
}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class KinName_Dummy {}
//Dummy implementation of the scalar declaration to avoid compilation errors.
class KinTelephone_Dummy {}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'golang' 1`] = `
{
  "key": "concerto@1.0.0.go",
  "value": "// Package concerto_1_0_0 contains domain objects and was generated from Concerto namespace concerto@1.0.0.
package concerto_1_0_0
import "time"
   
type Concept struct {
}
type Asset struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Participant struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Transaction struct {
   Concept
   Timestamp time.Time \`json:"$timestamp"\`
}
type Event struct {
   Concept
   Timestamp time.Time \`json:"$timestamp"\`
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'golang' 2`] = `
{
  "key": "concerto.go",
  "value": "// Package concerto contains domain objects and was generated from Concerto namespace concerto.
package concerto
   
type Concept struct {
}
type Asset struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Participant struct {
   Concept
   Identifier string \`json:"$identifier"\`
}
type Transaction struct {
   Concept
}
type Event struct {
   Concept
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'golang' 3`] = `
{
  "key": "org.acme.hr.base@1.0.0.go",
  "value": "// Package org_acme_hr_base_1_0_0 contains domain objects and was generated from Concerto namespace org.acme.hr.base@1.0.0.
package org_acme_hr_base_1_0_0
import "concerto_1_0_0";
   
type State int
const (
   MA State = 1 + iota
   NY
   CO
   WA
   IL
   CA
)
type TShirtSizeType int
const (
   SMALL TShirtSizeType = 1 + iota
   MEDIUM
   LARGE
)
type Address struct {
   concerto_1_0_0.Concept
   Street string \`json:"street"\`
   City string \`json:"city"\`
   State State \`json:"state"\`
   ZipCode string \`json:"zipCode"\`
   Country string \`json:"country"\`
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'golang' 4`] = `
{
  "key": "org.acme.hr@1.0.0.go",
  "value": "// Package org_acme_hr_1_0_0 contains domain objects and was generated from Concerto namespace org.acme.hr@1.0.0.
package org_acme_hr_1_0_0
import "time"
import "org_acme_hr_base_1_0_0";
import "concerto_1_0_0";
   
type Company struct {
   concerto_1_0_0.Concept
   Name string \`json:"name"\`
   Headquarters Address \`json:"headquarters"\`
   companyProperties := make(map[string]string) \`json:"companyProperties"\`
   employeeDirectory := make(map[string]Employee) \`json:"employeeDirectory"\`
   employeeTShirtSizes := make(map[string]TShirtSizeType) \`json:"employeeTShirtSizes"\`
   employeeProfiles := make(map[string]Concept) \`json:"employeeProfiles"\`
   employeeSocialSecurityNumbers := make(map[string]string) \`json:"employeeSocialSecurityNumbers"\`
}
type Department int
const (
   Sales Department = 1 + iota
   Marketing
   Finance
   HR
   Engineering
   Design
)
type Equipment struct {
   concerto_1_0_0.Asset
   SerialNumber string \`json:"serialNumber"\`
}
type LaptopMake int
const (
   Apple LaptopMake = 1 + iota
   Microsoft
)
type Laptop struct {
   Equipment
   Make LaptopMake \`json:"make"\`
}
type Person struct {
   concerto_1_0_0.Participant
   Email string \`json:"email"\`
   FirstName string \`json:"firstName"\`
   LastName string \`json:"lastName"\`
   MiddleNames string \`json:"middleNames"\`
   HomeAddress Address \`json:"homeAddress"\`
   Ssn string \`json:"ssn"\`
   Height float64 \`json:"height"\`
   Dob time.Time \`json:"dob"\`
   nextOfKin := make(map[string]time.Time) \`json:"nextOfKin"\`
}
type Employee struct {
   Person
   EmployeeId string \`json:"employeeId"\`
   Salary int64 \`json:"salary"\`
   NumDependents int32 \`json:"numDependents"\`
   Retired bool \`json:"retired"\`
   Department Department \`json:"department"\`
   OfficeAddress Address \`json:"officeAddress"\`
   CompanyAssets []Equipment \`json:"companyAssets"\`
   Manager *Manager \`json:"manager"\`
}
type Contractor struct {
   Person
   Company Company \`json:"company"\`
   Manager *Manager \`json:"manager"\`
}
type Manager struct {
   Employee
   Reports []*Person \`json:"reports"\`
}
type CompanyEvent struct {
   concerto_1_0_0.Event
}
type Onboarded struct {
   CompanyEvent
   Employee *Employee \`json:"employee"\`
}
type ChangeOfAddress struct {
   concerto_1_0_0.Transaction
   Person *Person \`json:"Person"\`
   NewAddress Address \`json:"newAddress"\`
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'graphql' 1`] = `
{
  "key": "model.gql",
  "value": "directive @resource on OBJECT | FIELD_DEFINITION
scalar DateTime
# namespace org.acme.hr.base@1.0.0
enum State {
   MA
   NY
   CO
   WA
   IL
   CA
}
enum TShirtSizeType {
   SMALL
   MEDIUM
   LARGE
}
type EmployeeTShirtSizes {
   key: SSN
   value: TShirtSizeType
}
type Address {
   street: String!
   city: String!
   state: State
   zipCode: String!
   country: String!
}
# namespace org.acme.hr@1.0.0
type CompanyProperties {
   key: String
   value: String
}
type EmployeeLoginTimes {
   key: String
   value: Time
}
type EmployeeSocialSecurityNumbers {
   key: String
   value: SSN
}
type NextOfKin {
   key: KinName
   value: KinTelephone
}
type EmployeeProfiles {
   key: String
   value: Concept
}
type EmployeeDirectory {
   key: SSN
   value: Employee
}
type Company {
   name: String!
   headquarters: Address!
   companyProperties: CompanyProperties
   employeeDirectory: EmployeeDirectory
   employeeTShirtSizes: EmployeeTShirtSizes
   employeeProfiles: EmployeeProfiles
   employeeSocialSecurityNumbers: EmployeeSocialSecurityNumbers
}
enum Department {
   Sales
   Marketing
   Finance
   HR
   Engineering
   Design
}
type Equipment @resource {
   serialNumber: String!
   _identifier: String!
}
enum LaptopMake {
   Apple
   Microsoft
}
type Laptop {
   make: LaptopMake!
   serialNumber: String!
   _identifier: String!
}
type Person @resource {
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type Employee {
   employeeId: String!
   salary: Int!
   numDependents: Int!
   retired: Boolean!
   department: Department!
   officeAddress: Address!
   companyAssets: [Equipment]!
   manager: ID # Manager
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type Contractor {
   company: Company!
   manager: ID # Manager
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type Manager {
   reports: [ID] # Person
   employeeId: String!
   salary: Int!
   numDependents: Int!
   retired: Boolean!
   department: Department!
   officeAddress: Address!
   companyAssets: [Equipment]!
   manager: ID # Manager
   email: String!
   firstName: String!
   lastName: String!
   middleNames: String
   homeAddress: Address!
   ssn: String!
   height: Float!
   dob: DateTime!
   nextOfKin: NextOfKin!
   _identifier: String!
}
type CompanyEvent {
   _timestamp: DateTime!
}
type Onboarded {
   employee: ID! # Employee
   _timestamp: DateTime!
}
type ChangeOfAddress {
   Person: ID! # Person
   newAddress: Address!
   _timestamp: DateTime!
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 1`] = `
{
  "key": "concerto/Concept.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public abstract class Concept {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 2`] = `
{
  "key": "concerto/Asset.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "$identifier")
public abstract class Asset extends Concept {
   private String $id;
            @JsonProperty("$id")
            public String get$id() {
                return $id;
            }
            @JsonProperty("$id")
            public void set$id(String i) {
                $id = i;
            }
   
   // the accessor for the identifying field
   public String getID() {
      return this.get$identifier();
   }

   private String $identifier;
   public String get$identifier() {
      return this.$identifier;
   }
   public void set$identifier(String $identifier) {
      this.$identifier = $identifier;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 3`] = `
{
  "key": "concerto/Participant.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "$identifier")
public abstract class Participant extends Concept {
   private String $id;
            @JsonProperty("$id")
            public String get$id() {
                return $id;
            }
            @JsonProperty("$id")
            public void set$id(String i) {
                $id = i;
            }
   
   // the accessor for the identifying field
   public String getID() {
      return this.get$identifier();
   }

   private String $identifier;
   public String get$identifier() {
      return this.$identifier;
   }
   public void set$identifier(String $identifier) {
      this.$identifier = $identifier;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 4`] = `
{
  "key": "concerto/Transaction.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public abstract class Transaction extends Concept {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 5`] = `
{
  "key": "concerto/Event.java",
  "value": "// this code is generated and should not be modified
package concerto;

import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public abstract class Event extends Concept {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 6`] = `
{
  "key": "org/acme/hr/base/State.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr.base;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum State {
   MA,
   NY,
   CO,
   WA,
   IL,
   CA,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 7`] = `
{
  "key": "org/acme/hr/base/TShirtSizeType.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr.base;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum TShirtSizeType {
   SMALL,
   MEDIUM,
   LARGE,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 8`] = `
{
  "key": "org/acme/hr/base/Address.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr.base;

import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public class Address extends Concept {
   private String street;
   private String city;
   private State state;
   private String zipCode;
   private String country;
   public String getStreet() {
      return this.street;
   }
   public String getCity() {
      return this.city;
   }
   public State getState() {
      return this.state;
   }
   public String getZipCode() {
      return this.zipCode;
   }
   public String getCountry() {
      return this.country;
   }
   public void setStreet(String street) {
      this.street = street;
   }
   public void setCity(String city) {
      this.city = city;
   }
   public void setState(State state) {
      this.state = state;
   }
   public void setZipCode(String zipCode) {
      this.zipCode = zipCode;
   }
   public void setCountry(String country) {
      this.country = country;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 9`] = `
{
  "key": "org/acme/hr/Company.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import java.util.HashMap;
import java.util.Map;
import com.fasterxml.jackson.annotation.*;

@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "$class")
public class Company extends Concept {
   private String name;
   private Address headquarters;
   private Map<String, String> companyProperties = new HashMap<>();
   private Map<SSN, Employee> employeeDirectory = new HashMap<>();
   private Map<SSN, TShirtSizeType> employeeTShirtSizes = new HashMap<>();
   private Map<String, Concept> employeeProfiles = new HashMap<>();
   private Map<String, SSN> employeeSocialSecurityNumbers = new HashMap<>();
   public String getName() {
      return this.name;
   }
   public Address getHeadquarters() {
      return this.headquarters;
   }
   public CompanyProperties getCompanyProperties() {
      return this.companyProperties;
   }
   public EmployeeDirectory getEmployeeDirectory() {
      return this.employeeDirectory;
   }
   public EmployeeTShirtSizes getEmployeeTShirtSizes() {
      return this.employeeTShirtSizes;
   }
   public EmployeeProfiles getEmployeeProfiles() {
      return this.employeeProfiles;
   }
   public EmployeeSocialSecurityNumbers getEmployeeSocialSecurityNumbers() {
      return this.employeeSocialSecurityNumbers;
   }
   public void setName(String name) {
      this.name = name;
   }
   public void setHeadquarters(Address headquarters) {
      this.headquarters = headquarters;
   }
   public void setCompanyProperties(CompanyProperties companyProperties) {
      this.companyProperties = companyProperties;
   }
   public void setEmployeeDirectory(EmployeeDirectory employeeDirectory) {
      this.employeeDirectory = employeeDirectory;
   }
   public void setEmployeeTShirtSizes(EmployeeTShirtSizes employeeTShirtSizes) {
      this.employeeTShirtSizes = employeeTShirtSizes;
   }
   public void setEmployeeProfiles(EmployeeProfiles employeeProfiles) {
      this.employeeProfiles = employeeProfiles;
   }
   public void setEmployeeSocialSecurityNumbers(EmployeeSocialSecurityNumbers employeeSocialSecurityNumbers) {
      this.employeeSocialSecurityNumbers = employeeSocialSecurityNumbers;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 10`] = `
{
  "key": "org/acme/hr/Department.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum Department {
   Sales,
   Marketing,
   Finance,
   HR,
   Engineering,
   Design,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 11`] = `
{
  "key": "org/acme/hr/Equipment.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "serialNumber")
public abstract class Equipment extends Asset {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getSerialNumber();
   }

   private String serialNumber;
   public String getSerialNumber() {
      return this.serialNumber;
   }
   public void setSerialNumber(String serialNumber) {
      this.serialNumber = serialNumber;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 12`] = `
{
  "key": "org/acme/hr/LaptopMake.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import com.fasterxml.jackson.annotation.*;
@JsonIgnoreProperties({"$class"})
public enum LaptopMake {
   Apple,
   Microsoft,
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 13`] = `
{
  "key": "org/acme/hr/Laptop.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "serialNumber")
public class Laptop extends Equipment {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getSerialNumber();
   }

   private LaptopMake make;
   public LaptopMake getMake() {
      return this.make;
   }
   public void setMake(LaptopMake make) {
      this.make = make;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 14`] = `
{
  "key": "org/acme/hr/Person.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import java.util.HashMap;
import java.util.Map;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public abstract class Person extends Participant {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private String email;
   private String firstName;
   private String lastName;
   private String middleNames;
   private Address homeAddress;
   private String ssn;
   private double height;
   private java.util.Date dob;
   private Map<KinName, KinTelephone> nextOfKin = new HashMap<>();
   public String getEmail() {
      return this.email;
   }
   public String getFirstName() {
      return this.firstName;
   }
   public String getLastName() {
      return this.lastName;
   }
   public String getMiddleNames() {
      return this.middleNames;
   }
   public Address getHomeAddress() {
      return this.homeAddress;
   }
   public String getSsn() {
      return this.ssn;
   }
   public double getHeight() {
      return this.height;
   }
   public java.util.Date getDob() {
      return this.dob;
   }
   public NextOfKin getNextOfKin() {
      return this.nextOfKin;
   }
   public void setEmail(String email) {
      this.email = email;
   }
   public void setFirstName(String firstName) {
      this.firstName = firstName;
   }
   public void setLastName(String lastName) {
      this.lastName = lastName;
   }
   public void setMiddleNames(String middleNames) {
      this.middleNames = middleNames;
   }
   public void setHomeAddress(Address homeAddress) {
      this.homeAddress = homeAddress;
   }
   public void setSsn(String ssn) {
      this.ssn = ssn;
   }
   public void setHeight(double height) {
      this.height = height;
   }
   public void setDob(java.util.Date dob) {
      this.dob = dob;
   }
   public void setNextOfKin(NextOfKin nextOfKin) {
      this.nextOfKin = nextOfKin;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 15`] = `
{
  "key": "org/acme/hr/Employee.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public class Employee extends Person {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private String employeeId;
   private long salary;
   private int numDependents;
   private boolean retired;
   private Department department;
   private Address officeAddress;
   private Equipment[] companyAssets;
   private Manager manager;
   public String getEmployeeId() {
      return this.employeeId;
   }
   public long getSalary() {
      return this.salary;
   }
   public int getNumDependents() {
      return this.numDependents;
   }
   public boolean getRetired() {
      return this.retired;
   }
   public Department getDepartment() {
      return this.department;
   }
   public Address getOfficeAddress() {
      return this.officeAddress;
   }
   public Equipment[] getCompanyAssets() {
      return this.companyAssets;
   }
   public Manager getManager() {
      return this.manager;
   }
   public void setEmployeeId(String employeeId) {
      this.employeeId = employeeId;
   }
   public void setSalary(long salary) {
      this.salary = salary;
   }
   public void setNumDependents(int numDependents) {
      this.numDependents = numDependents;
   }
   public void setRetired(boolean retired) {
      this.retired = retired;
   }
   public void setDepartment(Department department) {
      this.department = department;
   }
   public void setOfficeAddress(Address officeAddress) {
      this.officeAddress = officeAddress;
   }
   public void setCompanyAssets(Equipment[] companyAssets) {
      this.companyAssets = companyAssets;
   }
   public void setManager(Manager manager) {
      this.manager = manager;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 16`] = `
{
  "key": "org/acme/hr/Contractor.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public class Contractor extends Person {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private Company company;
   private Manager manager;
   public Company getCompany() {
      return this.company;
   }
   public Manager getManager() {
      return this.manager;
   }
   public void setCompany(Company company) {
      this.company = company;
   }
   public void setManager(Manager manager) {
      this.manager = manager;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 17`] = `
{
  "key": "org/acme/hr/Manager.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

@JsonIgnoreProperties({"id"})
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "email")
public class Manager extends Employee {
   
   // the accessor for the identifying field
   public String getID() {
      return this.getEmail();
   }

   private Person[] reports;
   public Person[] getReports() {
      return this.reports;
   }
   public void setReports(Person[] reports) {
      this.reports = reports;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 18`] = `
{
  "key": "org/acme/hr/CompanyEvent.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

public class CompanyEvent extends Event {
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 19`] = `
{
  "key": "org/acme/hr/Onboarded.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

public class Onboarded extends CompanyEvent {
   private Employee employee;
   public Employee getEmployee() {
      return this.employee;
   }
   public void setEmployee(Employee employee) {
      this.employee = employee;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'java' 20`] = `
{
  "key": "org/acme/hr/ChangeOfAddress.java",
  "value": "// this code is generated and should not be modified
package org.acme.hr;

import org.acme.hr.base.Address;
import org.acme.hr.base.State;
import org.acme.hr.base.SSN;
import org.acme.hr.base.Time;
import org.acme.hr.base.EmployeeTShirtSizes;
import concerto.Concept;
import concerto.Asset;
import concerto.Transaction;
import concerto.Participant;
import concerto.Event;
import com.fasterxml.jackson.annotation.*;

public class ChangeOfAddress extends Transaction {
   private Person Person;
   private Address newAddress;
   public Person getPerson() {
      return this.Person;
   }
   public Address getNewAddress() {
      return this.newAddress;
   }
   public void setPerson(Person Person) {
      this.Person = Person;
   }
   public void setNewAddress(Address newAddress) {
      this.newAddress = newAddress;
   }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'jsonschema' 1`] = `
{
  "key": "schema.json",
  "value": "{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "org.acme.hr.base@1.0.0.State": {
      "title": "State",
      "description": "An instance of org.acme.hr.base@1.0.0.State",
      "enum": [
        "MA",
        "NY",
        "CO",
        "WA",
        "IL",
        "CA"
      ]
    },
    "org.acme.hr.base@1.0.0.TShirtSizeType": {
      "title": "TShirtSizeType",
      "description": "An instance of org.acme.hr.base@1.0.0.TShirtSizeType",
      "enum": [
        "SMALL",
        "MEDIUM",
        "LARGE"
      ]
    },
    "org.acme.hr.base@1.0.0.Address": {
      "title": "Address",
      "description": "An instance of org.acme.hr.base@1.0.0.Address",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr.base@1.0.0.Address",
          "pattern": "^org\\\\.acme\\\\.hr\\\\.base@1\\\\.0\\\\.0\\\\.Address$",
          "description": "The class identifier for org.acme.hr.base@1.0.0.Address"
        },
        "street": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "state": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.State"
        },
        "zipCode": {
          "type": "string"
        },
        "country": {
          "type": "string"
        }
      },
      "required": [
        "$class",
        "street",
        "city",
        "zipCode",
        "country"
      ]
    },
    "org.acme.hr.base@1.0.0.Time": {
      "format": "date-time",
      "type": "string"
    },
    "org.acme.hr.base@1.0.0.SSN": {
      "type": "string",
      "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
    },
    "org.acme.hr@1.0.0.Company": {
      "title": "Company",
      "description": "An instance of org.acme.hr@1.0.0.Company",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Company",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Company$",
          "description": "The class identifier for org.acme.hr@1.0.0.Company"
        },
        "name": {
          "type": "string"
        },
        "headquarters": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        }
      },
      "required": [
        "$class",
        "name",
        "headquarters"
      ]
    },
    "org.acme.hr@1.0.0.Department": {
      "title": "Department",
      "description": "An instance of org.acme.hr@1.0.0.Department",
      "enum": [
        "Sales",
        "Marketing",
        "Finance",
        "HR",
        "Engineering",
        "Design"
      ]
    },
    "org.acme.hr@1.0.0.Equipment": {
      "title": "Equipment",
      "description": "An instance of org.acme.hr@1.0.0.Equipment",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Equipment",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Equipment$",
          "description": "The class identifier for org.acme.hr@1.0.0.Equipment"
        },
        "serialNumber": {
          "type": "string",
          "description": "The instance identifier for this type"
        }
      },
      "required": [
        "$class",
        "serialNumber"
      ],
      "$decorators": {
        "resource": []
      }
    },
    "org.acme.hr@1.0.0.LaptopMake": {
      "title": "LaptopMake",
      "description": "An instance of org.acme.hr@1.0.0.LaptopMake",
      "enum": [
        "Apple",
        "Microsoft"
      ]
    },
    "org.acme.hr@1.0.0.Laptop": {
      "title": "Laptop",
      "description": "An instance of org.acme.hr@1.0.0.Laptop",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Laptop",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Laptop$",
          "description": "The class identifier for org.acme.hr@1.0.0.Laptop"
        },
        "make": {
          "$ref": "#/definitions/org.acme.hr@1.0.0.LaptopMake"
        },
        "serialNumber": {
          "type": "string",
          "description": "The instance identifier for this type"
        }
      },
      "required": [
        "$class",
        "make",
        "serialNumber"
      ]
    },
    "org.acme.hr@1.0.0.Person": {
      "title": "Person",
      "description": "An instance of org.acme.hr@1.0.0.Person",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Person",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Person$",
          "description": "The class identifier for org.acme.hr@1.0.0.Person"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ],
      "$decorators": {
        "resource": []
      }
    },
    "org.acme.hr@1.0.0.Employee": {
      "title": "Employee",
      "description": "An instance of org.acme.hr@1.0.0.Employee",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Employee",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Employee$",
          "description": "The class identifier for org.acme.hr@1.0.0.Employee"
        },
        "employeeId": {
          "type": "string"
        },
        "salary": {
          "type": "integer"
        },
        "numDependents": {
          "type": "integer"
        },
        "retired": {
          "type": "boolean"
        },
        "department": {
          "$ref": "#/definitions/org.acme.hr@1.0.0.Department"
        },
        "officeAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        },
        "companyAssets": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/org.acme.hr@1.0.0.Equipment"
              },
              {
                "$ref": "#/definitions/org.acme.hr@1.0.0.Laptop"
              }
            ]
          }
        },
        "manager": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr@1.0.0.Manager"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "employeeId",
        "salary",
        "numDependents",
        "retired",
        "department",
        "officeAddress",
        "companyAssets",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ]
    },
    "org.acme.hr@1.0.0.Contractor": {
      "title": "Contractor",
      "description": "An instance of org.acme.hr@1.0.0.Contractor",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Contractor",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Contractor$",
          "description": "The class identifier for org.acme.hr@1.0.0.Contractor"
        },
        "company": {
          "$ref": "#/definitions/org.acme.hr@1.0.0.Company"
        },
        "manager": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr@1.0.0.Manager"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "company",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ]
    },
    "org.acme.hr@1.0.0.Manager": {
      "title": "Manager",
      "description": "An instance of org.acme.hr@1.0.0.Manager",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Manager",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Manager$",
          "description": "The class identifier for org.acme.hr@1.0.0.Manager"
        },
        "reports": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr@1.0.0.Person"
          }
        },
        "employeeId": {
          "type": "string"
        },
        "salary": {
          "type": "integer"
        },
        "numDependents": {
          "type": "integer"
        },
        "retired": {
          "type": "boolean"
        },
        "department": {
          "$ref": "#/definitions/org.acme.hr@1.0.0.Department"
        },
        "officeAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        },
        "companyAssets": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/org.acme.hr@1.0.0.Equipment"
              },
              {
                "$ref": "#/definitions/org.acme.hr@1.0.0.Laptop"
              }
            ]
          }
        },
        "manager": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr@1.0.0.Manager"
        },
        "email": {
          "type": "string",
          "description": "The instance identifier for this type"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "middleNames": {
          "type": "string"
        },
        "homeAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        },
        "ssn": {
          "default": "000-00-0000",
          "type": "string",
          "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
        },
        "height": {
          "type": "number"
        },
        "dob": {
          "format": "date-time",
          "type": "string"
        }
      },
      "required": [
        "$class",
        "employeeId",
        "salary",
        "numDependents",
        "retired",
        "department",
        "officeAddress",
        "companyAssets",
        "email",
        "firstName",
        "lastName",
        "homeAddress",
        "ssn",
        "height",
        "dob",
        "nextOfKin"
      ]
    },
    "org.acme.hr@1.0.0.CompanyEvent": {
      "title": "CompanyEvent",
      "description": "An instance of org.acme.hr@1.0.0.CompanyEvent",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.CompanyEvent",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.CompanyEvent$",
          "description": "The class identifier for org.acme.hr@1.0.0.CompanyEvent"
        }
      },
      "required": [
        "$class"
      ]
    },
    "org.acme.hr@1.0.0.Onboarded": {
      "title": "Onboarded",
      "description": "An instance of org.acme.hr@1.0.0.Onboarded",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.Onboarded",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Onboarded$",
          "description": "The class identifier for org.acme.hr@1.0.0.Onboarded"
        },
        "employee": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr@1.0.0.Employee"
        }
      },
      "required": [
        "$class",
        "employee"
      ]
    },
    "org.acme.hr@1.0.0.ChangeOfAddress": {
      "title": "ChangeOfAddress",
      "description": "An instance of org.acme.hr@1.0.0.ChangeOfAddress",
      "type": "object",
      "properties": {
        "$class": {
          "type": "string",
          "default": "org.acme.hr@1.0.0.ChangeOfAddress",
          "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.ChangeOfAddress$",
          "description": "The class identifier for org.acme.hr@1.0.0.ChangeOfAddress"
        },
        "Person": {
          "type": "string",
          "description": "The identifier of an instance of org.acme.hr@1.0.0.Person"
        },
        "newAddress": {
          "$ref": "#/definitions/org.acme.hr.base@1.0.0.Address"
        }
      },
      "required": [
        "$class",
        "Person",
        "newAddress"
      ]
    },
    "org.acme.hr@1.0.0.KinName": {
      "type": "string"
    },
    "org.acme.hr@1.0.0.KinTelephone": {
      "format": "date-time",
      "type": "string"
    }
  }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'markdown' 1`] = `
{
  "key": "models.md",
  "value": "# Namespace org.acme.hr.base@1.0.0

## Overview
- 1 concepts
- 2 enumerations
- 0 assets
- 0 participants
- 0 transactions
- 0 events
- 6 total declarations

## Imports
- concerto@1.0.0.Concept
- concerto@1.0.0.Asset
- concerto@1.0.0.Transaction
- concerto@1.0.0.Participant
- concerto@1.0.0.Event

## Diagram
\`\`\`mermaid
classDiagram
class \`org.acme.hr.base@1.0.0.State\` {
<< enumeration>>
   + \`MA\`
   + \`NY\`
   + \`CO\`
   + \`WA\`
   + \`IL\`
   + \`CA\`
}

class \`org.acme.hr.base@1.0.0.TShirtSizeType\` {
<< enumeration>>
   + \`SMALL\`
   + \`MEDIUM\`
   + \`LARGE\`
}

class \`org.acme.hr.base@1.0.0.Address\` {
<< concept>>
   + \`String\` \`street\`
   + \`String\` \`city\`
   + \`State\` \`state\`
   + \`String\` \`zipCode\`
   + \`String\` \`country\`
}

\`org.acme.hr.base@1.0.0.Address\` "1" *-- "1" \`org.acme.hr.base@1.0.0.State\`
\`\`\`

# Namespace org.acme.hr@1.0.0

## Overview
- 1 concepts
- 2 enumerations
- 2 assets
- 4 participants
- 1 transactions
- 2 events
- 20 total declarations

## Imports
- org.acme.hr.base@1.0.0.Address
- org.acme.hr.base@1.0.0.State
- org.acme.hr.base@1.0.0.SSN
- org.acme.hr.base@1.0.0.Time
- org.acme.hr.base@1.0.0.EmployeeTShirtSizes
- concerto@1.0.0.Concept
- concerto@1.0.0.Asset
- concerto@1.0.0.Transaction
- concerto@1.0.0.Participant
- concerto@1.0.0.Event

## Diagram
\`\`\`mermaid
classDiagram
class \`org.acme.hr@1.0.0.Company\` {
<< concept>>
   + \`String\` \`name\`
   + \`Address\` \`headquarters\`
   + \`CompanyProperties\` \`companyProperties\`
   + \`EmployeeDirectory\` \`employeeDirectory\`
   + \`EmployeeTShirtSizes\` \`employeeTShirtSizes\`
   + \`EmployeeProfiles\` \`employeeProfiles\`
   + \`EmployeeSocialSecurityNumbers\` \`employeeSocialSecurityNumbers\`
}

\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.CompanyProperties\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeDirectory\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr.base@1.0.0.EmployeeTShirtSizes\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeProfiles\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeSocialSecurityNumbers\`
class \`org.acme.hr@1.0.0.Department\` {
<< enumeration>>
   + \`Sales\`
   + \`Marketing\`
   + \`Finance\`
   + \`HR\`
   + \`Engineering\`
   + \`Design\`
}

class \`org.acme.hr@1.0.0.Equipment\` {
<< asset>>
   + \`String\` \`serialNumber\`
}

class \`org.acme.hr@1.0.0.LaptopMake\` {
<< enumeration>>
   + \`Apple\`
   + \`Microsoft\`
}

class \`org.acme.hr@1.0.0.Laptop\` {
<< asset>>
   + \`LaptopMake\` \`make\`
}

\`org.acme.hr@1.0.0.Laptop\` "1" *-- "1" \`org.acme.hr@1.0.0.LaptopMake\`
\`org.acme.hr@1.0.0.Laptop\` --|> \`org.acme.hr@1.0.0.Equipment\`
class \`org.acme.hr@1.0.0.Person\` {
<< participant>>
   + \`String\` \`email\`
   + \`String\` \`firstName\`
   + \`String\` \`lastName\`
   + \`String\` \`middleNames\`
   + \`Address\` \`homeAddress\`
   + \`String\` \`ssn\`
   + \`Double\` \`height\`
   + \`DateTime\` \`dob\`
   + \`NextOfKin\` \`nextOfKin\`
}

\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr.base@1.0.0.SSN\`
\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr@1.0.0.NextOfKin\`
class \`org.acme.hr@1.0.0.Employee\` {
<< participant>>
   + \`String\` \`employeeId\`
   + \`Long\` \`salary\`
   + \`Integer\` \`numDependents\`
   + \`Boolean\` \`retired\`
   + \`Department\` \`department\`
   + \`Address\` \`officeAddress\`
   + \`Equipment[]\` \`companyAssets\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr@1.0.0.Employee\` "1" *-- "1" \`org.acme.hr@1.0.0.Department\`
\`org.acme.hr@1.0.0.Employee\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Employee\` "1" *-- "*" \`org.acme.hr@1.0.0.Equipment\`
\`org.acme.hr@1.0.0.Employee\` "1" o-- "1" \`org.acme.hr@1.0.0.Manager\` : manager
\`org.acme.hr@1.0.0.Employee\` --|> \`org.acme.hr@1.0.0.Person\`
class \`org.acme.hr@1.0.0.Contractor\` {
<< participant>>
   + \`Company\` \`company\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr@1.0.0.Contractor\` "1" *-- "1" \`org.acme.hr@1.0.0.Company\`
\`org.acme.hr@1.0.0.Contractor\` "1" o-- "1" \`org.acme.hr@1.0.0.Manager\` : manager
\`org.acme.hr@1.0.0.Contractor\` --|> \`org.acme.hr@1.0.0.Person\`
class \`org.acme.hr@1.0.0.Manager\` {
<< participant>>
   + \`Person[]\` \`reports\`
}

\`org.acme.hr@1.0.0.Manager\` "1" o-- "*" \`org.acme.hr@1.0.0.Person\` : reports
\`org.acme.hr@1.0.0.Manager\` --|> \`org.acme.hr@1.0.0.Employee\`
class \`org.acme.hr@1.0.0.CompanyEvent\`
<< event>> \`org.acme.hr@1.0.0.CompanyEvent\`

class \`org.acme.hr@1.0.0.Onboarded\` {
<< event>>
   + \`Employee\` \`employee\`
}

\`org.acme.hr@1.0.0.Onboarded\` "1" o-- "1" \`org.acme.hr@1.0.0.Employee\` : employee
\`org.acme.hr@1.0.0.Onboarded\` --|> \`org.acme.hr@1.0.0.CompanyEvent\`
class \`org.acme.hr@1.0.0.ChangeOfAddress\` {
<< transaction>>
   + \`Person\` \`Person\`
   + \`Address\` \`newAddress\`
}

\`org.acme.hr@1.0.0.ChangeOfAddress\` "1" o-- "1" \`org.acme.hr@1.0.0.Person\` : Person
\`org.acme.hr@1.0.0.ChangeOfAddress\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`\`\`

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'mermaid' 1`] = `
{
  "key": "model.mmd",
  "value": "classDiagram
class \`org.acme.hr.base@1.0.0.State\` {
<< enumeration>>
   + \`MA\`
   + \`NY\`
   + \`CO\`
   + \`WA\`
   + \`IL\`
   + \`CA\`
}

\`org.acme.hr.base@1.0.0.State\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.base@1.0.0.TShirtSizeType\` {
<< enumeration>>
   + \`SMALL\`
   + \`MEDIUM\`
   + \`LARGE\`
}

\`org.acme.hr.base@1.0.0.TShirtSizeType\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr.base@1.0.0.Address\` {
<< concept>>
   + \`String\` \`street\`
   + \`String\` \`city\`
   + \`State\` \`state\`
   + \`String\` \`zipCode\`
   + \`String\` \`country\`
}

\`org.acme.hr.base@1.0.0.Address\` "1" *-- "1" \`org.acme.hr.base@1.0.0.State\`
\`org.acme.hr.base@1.0.0.Address\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr@1.0.0.Company\` {
<< concept>>
   + \`String\` \`name\`
   + \`Address\` \`headquarters\`
   + \`CompanyProperties\` \`companyProperties\`
   + \`EmployeeDirectory\` \`employeeDirectory\`
   + \`EmployeeTShirtSizes\` \`employeeTShirtSizes\`
   + \`EmployeeProfiles\` \`employeeProfiles\`
   + \`EmployeeSocialSecurityNumbers\` \`employeeSocialSecurityNumbers\`
}

\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.CompanyProperties\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeDirectory\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr.base@1.0.0.EmployeeTShirtSizes\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeProfiles\`
\`org.acme.hr@1.0.0.Company\` "1" *-- "1" \`org.acme.hr@1.0.0.EmployeeSocialSecurityNumbers\`
\`org.acme.hr@1.0.0.Company\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr@1.0.0.Department\` {
<< enumeration>>
   + \`Sales\`
   + \`Marketing\`
   + \`Finance\`
   + \`HR\`
   + \`Engineering\`
   + \`Design\`
}

\`org.acme.hr@1.0.0.Department\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr@1.0.0.Equipment\` {
<< asset>>
   + \`String\` \`serialNumber\`
}

\`org.acme.hr@1.0.0.Equipment\` --|> \`concerto@1.0.0.Asset\`
class \`org.acme.hr@1.0.0.LaptopMake\` {
<< enumeration>>
   + \`Apple\`
   + \`Microsoft\`
}

\`org.acme.hr@1.0.0.LaptopMake\` --|> \`concerto@1.0.0.Concept\`
class \`org.acme.hr@1.0.0.Laptop\` {
<< asset>>
   + \`LaptopMake\` \`make\`
}

\`org.acme.hr@1.0.0.Laptop\` "1" *-- "1" \`org.acme.hr@1.0.0.LaptopMake\`
\`org.acme.hr@1.0.0.Laptop\` --|> \`org.acme.hr@1.0.0.Equipment\`
class \`org.acme.hr@1.0.0.Person\` {
<< participant>>
   + \`String\` \`email\`
   + \`String\` \`firstName\`
   + \`String\` \`lastName\`
   + \`String\` \`middleNames\`
   + \`Address\` \`homeAddress\`
   + \`String\` \`ssn\`
   + \`Double\` \`height\`
   + \`DateTime\` \`dob\`
   + \`NextOfKin\` \`nextOfKin\`
}

\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr.base@1.0.0.SSN\`
\`org.acme.hr@1.0.0.Person\` "1" *-- "1" \`org.acme.hr@1.0.0.NextOfKin\`
\`org.acme.hr@1.0.0.Person\` --|> \`concerto@1.0.0.Participant\`
class \`org.acme.hr@1.0.0.Employee\` {
<< participant>>
   + \`String\` \`employeeId\`
   + \`Long\` \`salary\`
   + \`Integer\` \`numDependents\`
   + \`Boolean\` \`retired\`
   + \`Department\` \`department\`
   + \`Address\` \`officeAddress\`
   + \`Equipment[]\` \`companyAssets\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr@1.0.0.Employee\` "1" *-- "1" \`org.acme.hr@1.0.0.Department\`
\`org.acme.hr@1.0.0.Employee\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.Employee\` "1" *-- "*" \`org.acme.hr@1.0.0.Equipment\`
\`org.acme.hr@1.0.0.Employee\` "1" o-- "1" \`org.acme.hr@1.0.0.Manager\` : manager
\`org.acme.hr@1.0.0.Employee\` --|> \`org.acme.hr@1.0.0.Person\`
class \`org.acme.hr@1.0.0.Contractor\` {
<< participant>>
   + \`Company\` \`company\`
   + \`Manager\` \`manager\`
}

\`org.acme.hr@1.0.0.Contractor\` "1" *-- "1" \`org.acme.hr@1.0.0.Company\`
\`org.acme.hr@1.0.0.Contractor\` "1" o-- "1" \`org.acme.hr@1.0.0.Manager\` : manager
\`org.acme.hr@1.0.0.Contractor\` --|> \`org.acme.hr@1.0.0.Person\`
class \`org.acme.hr@1.0.0.Manager\` {
<< participant>>
   + \`Person[]\` \`reports\`
}

\`org.acme.hr@1.0.0.Manager\` "1" o-- "*" \`org.acme.hr@1.0.0.Person\` : reports
\`org.acme.hr@1.0.0.Manager\` --|> \`org.acme.hr@1.0.0.Employee\`
class \`org.acme.hr@1.0.0.CompanyEvent\`
<< event>> \`org.acme.hr@1.0.0.CompanyEvent\`

\`org.acme.hr@1.0.0.CompanyEvent\` --|> \`concerto@1.0.0.Event\`
class \`org.acme.hr@1.0.0.Onboarded\` {
<< event>>
   + \`Employee\` \`employee\`
}

\`org.acme.hr@1.0.0.Onboarded\` "1" o-- "1" \`org.acme.hr@1.0.0.Employee\` : employee
\`org.acme.hr@1.0.0.Onboarded\` --|> \`org.acme.hr@1.0.0.CompanyEvent\`
class \`org.acme.hr@1.0.0.ChangeOfAddress\` {
<< transaction>>
   + \`Person\` \`Person\`
   + \`Address\` \`newAddress\`
}

\`org.acme.hr@1.0.0.ChangeOfAddress\` "1" o-- "1" \`org.acme.hr@1.0.0.Person\` : Person
\`org.acme.hr@1.0.0.ChangeOfAddress\` "1" *-- "1" \`org.acme.hr.base@1.0.0.Address\`
\`org.acme.hr@1.0.0.ChangeOfAddress\` --|> \`concerto@1.0.0.Transaction\`
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'odata' 1`] = `
{
  "key": "concerto.csdl",
  "value": "<?xml version="1.0"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
<edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
   <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
</edmx:Reference>
<edmx:DataServices>
   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="concerto">
      <ComplexType Name="Concept" Abstract="true" >
      </ComplexType>
      <EntityType Name="Asset" Abstract="true" BaseType="concerto.Concept">
         <Property Name="$identifier" Type="Edm.String"  >
         </Property>
      </EntityType>
      <EntityType Name="Participant" Abstract="true" BaseType="concerto.Concept">
         <Property Name="$identifier" Type="Edm.String"  >
         </Property>
      </EntityType>
      <ComplexType Name="Transaction" Abstract="true" BaseType="concerto.Concept">
      </ComplexType>
      <ComplexType Name="Event" Abstract="true" BaseType="concerto.Concept">
      </ComplexType>
   <EntityContainer Name="concertoService">
   </EntityContainer>
   </Schema>
</edmx:DataServices>
</edmx:Edmx>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'odata' 2`] = `
{
  "key": "org.acme.hr.base.csdl",
  "value": "<?xml version="1.0"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
<edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
   <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
</edmx:Reference>
<edmx:Reference Uri="./concerto.csdl">
   <edmx:Include Namespace="concerto" />
</edmx:Reference>
<edmx:DataServices>
   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.acme.hr.base">
      <EnumType Name="State">
         <Member Name="MA">
         </Member>
         <Member Name="NY">
         </Member>
         <Member Name="CO">
         </Member>
         <Member Name="WA">
         </Member>
         <Member Name="IL">
         </Member>
         <Member Name="CA">
         </Member>
      </EnumType>
      <EnumType Name="TShirtSizeType">
         <Member Name="SMALL">
         </Member>
         <Member Name="MEDIUM">
         </Member>
         <Member Name="LARGE">
         </Member>
      </EnumType>
      <ComplexType Name="Address"  BaseType="concerto.Concept">
         <Property Name="street" Type="Edm.String"  >
         </Property>
         <Property Name="city" Type="Edm.String"  >
         </Property>
         <Property Name="state" Type="org.acme.hr.base.State" Nullable="true" >
         </Property>
         <Property Name="zipCode" Type="Edm.String"  >
         </Property>
         <Property Name="country" Type="Edm.String"  >
         </Property>
      </ComplexType>
   <EntityContainer Name="org.acme.hr.baseService">
   </EntityContainer>
   </Schema>
</edmx:DataServices>
</edmx:Edmx>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'odata' 3`] = `
{
  "key": "org.acme.hr.csdl",
  "value": "<?xml version="1.0"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
<edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
   <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
</edmx:Reference>
<edmx:Reference Uri="./org.acme.hr.base.csdl">
   <edmx:Include Namespace="org.acme.hr.base" />
</edmx:Reference>
<edmx:Reference Uri="./concerto.csdl">
   <edmx:Include Namespace="concerto" />
</edmx:Reference>
<edmx:DataServices>
   <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="org.acme.hr">
      <ComplexType Name="Company"  BaseType="concerto.Concept">
         <Property Name="name" Type="Edm.String"  >
         </Property>
         <Property Name="headquarters" Type="org.acme.hr.base.Address"  >
         </Property>
         <Property Name="companyProperties" Type="org.acme.hr.CompanyProperties" Nullable="true" >
         </Property>
         <Property Name="employeeDirectory" Type="org.acme.hr.EmployeeDirectory" Nullable="true" >
         </Property>
         <Property Name="employeeTShirtSizes" Type="org.acme.hr.base.EmployeeTShirtSizes" Nullable="true" >
         </Property>
         <Property Name="employeeProfiles" Type="org.acme.hr.EmployeeProfiles" Nullable="true" >
         </Property>
         <Property Name="employeeSocialSecurityNumbers" Type="org.acme.hr.EmployeeSocialSecurityNumbers" Nullable="true" >
         </Property>
      </ComplexType>
      <EnumType Name="Department">
         <Member Name="Sales">
         </Member>
         <Member Name="Marketing">
         </Member>
         <Member Name="Finance">
         </Member>
         <Member Name="HR">
         </Member>
         <Member Name="Engineering">
         </Member>
         <Member Name="Design">
         </Member>
      </EnumType>
      <EntityType Name="Equipment" Abstract="true" BaseType="concerto.Asset">
            <Annotation Term="resource" Bool="true"/>
         <Key><PropertyRef Name="serialNumber"/></Key>
         <Property Name="serialNumber" Type="Edm.String"  >
         </Property>
      </EntityType>
      <EnumType Name="LaptopMake">
         <Member Name="Apple">
         </Member>
         <Member Name="Microsoft">
         </Member>
      </EnumType>
      <EntityType Name="Laptop"  BaseType="org.acme.hr.Equipment">
         <Property Name="make" Type="org.acme.hr.LaptopMake"  >
         </Property>
      </EntityType>
      <EntityType Name="Person" Abstract="true" BaseType="concerto.Participant">
            <Annotation Term="resource" Bool="true"/>
         <Key><PropertyRef Name="email"/></Key>
         <Property Name="email" Type="Edm.String"  >
         </Property>
         <Property Name="firstName" Type="Edm.String"  >
         </Property>
         <Property Name="lastName" Type="Edm.String"  >
         </Property>
         <Property Name="middleNames" Type="Edm.String" Nullable="true" >
         </Property>
         <Property Name="homeAddress" Type="org.acme.hr.base.Address"  >
         </Property>
         <Property Name="ssn" Type="Edm.String"  DefaultValue="000-00-0000">
         </Property>
         <Property Name="height" Type="Edm.Double"  >
         </Property>
         <Property Name="dob" Type="Edm.DateTimeOffset"  >
         </Property>
         <Property Name="nextOfKin" Type="org.acme.hr.NextOfKin"  >
         </Property>
      </EntityType>
      <EntityType Name="Employee"  BaseType="org.acme.hr.Person">
         <Property Name="employeeId" Type="Edm.String"  >
         </Property>
         <Property Name="salary" Type="Edm.Int64"  >
         </Property>
         <Property Name="numDependents" Type="Edm.Int32"  >
         </Property>
         <Property Name="retired" Type="Edm.Boolean"  >
         </Property>
         <Property Name="department" Type="org.acme.hr.Department"  >
         </Property>
         <Property Name="officeAddress" Type="org.acme.hr.base.Address"  >
         </Property>
         <Property Name="companyAssets" Type="Collection(org.acme.hr.Equipment)"  >
         </Property>
         <NavigationProperty Name="manager" Type="org.acme.hr.Manager" Nullable="true">
         </NavigationProperty>
      </EntityType>
      <EntityType Name="Contractor"  BaseType="org.acme.hr.Person">
         <Property Name="company" Type="org.acme.hr.Company"  >
         </Property>
         <NavigationProperty Name="manager" Type="org.acme.hr.Manager" Nullable="true">
         </NavigationProperty>
      </EntityType>
      <EntityType Name="Manager"  BaseType="org.acme.hr.Employee">
         <NavigationProperty Name="reports" Type="Collection(org.acme.hr.Person)" Nullable="true">
         </NavigationProperty>
      </EntityType>
      <ComplexType Name="CompanyEvent"  BaseType="concerto.Event">
      </ComplexType>
      <ComplexType Name="Onboarded"  BaseType="org.acme.hr.CompanyEvent">
         <NavigationProperty Name="employee" Type="org.acme.hr.Employee" >
         </NavigationProperty>
      </ComplexType>
      <ComplexType Name="ChangeOfAddress"  BaseType="concerto.Transaction">
         <NavigationProperty Name="Person" Type="org.acme.hr.Person" >
         </NavigationProperty>
         <Property Name="newAddress" Type="org.acme.hr.base.Address"  >
         </Property>
      </ComplexType>
   <EntityContainer Name="org.acme.hrService">
      <EntitySet Name="Laptop" EntityType="org.acme.hr.Laptop"/>
      <EntitySet Name="Employee" EntityType="org.acme.hr.Employee"/>
      <EntitySet Name="Contractor" EntityType="org.acme.hr.Contractor"/>
      <EntitySet Name="Manager" EntityType="org.acme.hr.Manager"/>
   </EntityContainer>
   </Schema>
</edmx:DataServices>
</edmx:Edmx>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'openapi' 1`] = `
{
  "key": "openapi.json",
  "value": "{
  "openapi": "3.0.2",
  "servers": [],
  "info": {
    "title": "Generated Open API from Concerto Models",
    "version": "1.0.0",
    "description": "Create, read, update and delete entities"
  },
  "components": {
    "schemas": {
      "org.acme.hr.base@1.0.0.State": {
        "title": "State",
        "description": "An instance of org.acme.hr.base@1.0.0.State",
        "enum": [
          "MA",
          "NY",
          "CO",
          "WA",
          "IL",
          "CA"
        ]
      },
      "org.acme.hr.base@1.0.0.TShirtSizeType": {
        "title": "TShirtSizeType",
        "description": "An instance of org.acme.hr.base@1.0.0.TShirtSizeType",
        "enum": [
          "SMALL",
          "MEDIUM",
          "LARGE"
        ]
      },
      "org.acme.hr.base@1.0.0.Address": {
        "title": "Address",
        "description": "An instance of org.acme.hr.base@1.0.0.Address",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr.base@1.0.0.Address",
            "pattern": "^org\\\\.acme\\\\.hr\\\\.base@1\\\\.0\\\\.0\\\\.Address$",
            "description": "The class identifier for org.acme.hr.base@1.0.0.Address"
          },
          "street": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "state": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.State"
          },
          "zipCode": {
            "type": "string"
          },
          "country": {
            "type": "string"
          }
        },
        "required": [
          "$class",
          "street",
          "city",
          "zipCode",
          "country"
        ]
      },
      "org.acme.hr.base@1.0.0.Time": {
        "format": "date-time",
        "type": "string"
      },
      "org.acme.hr.base@1.0.0.SSN": {
        "type": "string",
        "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
      },
      "org.acme.hr@1.0.0.Company": {
        "title": "Company",
        "description": "An instance of org.acme.hr@1.0.0.Company",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Company",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Company$",
            "description": "The class identifier for org.acme.hr@1.0.0.Company"
          },
          "name": {
            "type": "string"
          },
          "headquarters": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          }
        },
        "required": [
          "$class",
          "name",
          "headquarters"
        ]
      },
      "org.acme.hr@1.0.0.Department": {
        "title": "Department",
        "description": "An instance of org.acme.hr@1.0.0.Department",
        "enum": [
          "Sales",
          "Marketing",
          "Finance",
          "HR",
          "Engineering",
          "Design"
        ]
      },
      "org.acme.hr@1.0.0.Equipment": {
        "title": "Equipment",
        "description": "An instance of org.acme.hr@1.0.0.Equipment",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Equipment",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Equipment$",
            "description": "The class identifier for org.acme.hr@1.0.0.Equipment"
          },
          "serialNumber": {
            "type": "string",
            "description": "The instance identifier for this type"
          }
        },
        "required": [
          "$class",
          "serialNumber"
        ],
        "$decorators": {
          "resource": []
        }
      },
      "org.acme.hr@1.0.0.LaptopMake": {
        "title": "LaptopMake",
        "description": "An instance of org.acme.hr@1.0.0.LaptopMake",
        "enum": [
          "Apple",
          "Microsoft"
        ]
      },
      "org.acme.hr@1.0.0.Laptop": {
        "title": "Laptop",
        "description": "An instance of org.acme.hr@1.0.0.Laptop",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Laptop",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Laptop$",
            "description": "The class identifier for org.acme.hr@1.0.0.Laptop"
          },
          "make": {
            "$ref": "#/components/schemas/org.acme.hr@1.0.0.LaptopMake"
          },
          "serialNumber": {
            "type": "string",
            "description": "The instance identifier for this type"
          }
        },
        "required": [
          "$class",
          "make",
          "serialNumber"
        ]
      },
      "org.acme.hr@1.0.0.Person": {
        "title": "Person",
        "description": "An instance of org.acme.hr@1.0.0.Person",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Person",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Person$",
            "description": "The class identifier for org.acme.hr@1.0.0.Person"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ],
        "$decorators": {
          "resource": []
        }
      },
      "org.acme.hr@1.0.0.Employee": {
        "title": "Employee",
        "description": "An instance of org.acme.hr@1.0.0.Employee",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Employee",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Employee$",
            "description": "The class identifier for org.acme.hr@1.0.0.Employee"
          },
          "employeeId": {
            "type": "string"
          },
          "salary": {
            "type": "integer"
          },
          "numDependents": {
            "type": "integer"
          },
          "retired": {
            "type": "boolean"
          },
          "department": {
            "$ref": "#/components/schemas/org.acme.hr@1.0.0.Department"
          },
          "officeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          },
          "companyAssets": {
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/org.acme.hr@1.0.0.Equipment"
                },
                {
                  "$ref": "#/components/schemas/org.acme.hr@1.0.0.Laptop"
                }
              ]
            }
          },
          "manager": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr@1.0.0.Manager"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "employeeId",
          "salary",
          "numDependents",
          "retired",
          "department",
          "officeAddress",
          "companyAssets",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ]
      },
      "org.acme.hr@1.0.0.Contractor": {
        "title": "Contractor",
        "description": "An instance of org.acme.hr@1.0.0.Contractor",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Contractor",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Contractor$",
            "description": "The class identifier for org.acme.hr@1.0.0.Contractor"
          },
          "company": {
            "$ref": "#/components/schemas/org.acme.hr@1.0.0.Company"
          },
          "manager": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr@1.0.0.Manager"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "company",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ]
      },
      "org.acme.hr@1.0.0.Manager": {
        "title": "Manager",
        "description": "An instance of org.acme.hr@1.0.0.Manager",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Manager",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Manager$",
            "description": "The class identifier for org.acme.hr@1.0.0.Manager"
          },
          "reports": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "The identifier of an instance of org.acme.hr@1.0.0.Person"
            }
          },
          "employeeId": {
            "type": "string"
          },
          "salary": {
            "type": "integer"
          },
          "numDependents": {
            "type": "integer"
          },
          "retired": {
            "type": "boolean"
          },
          "department": {
            "$ref": "#/components/schemas/org.acme.hr@1.0.0.Department"
          },
          "officeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          },
          "companyAssets": {
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/org.acme.hr@1.0.0.Equipment"
                },
                {
                  "$ref": "#/components/schemas/org.acme.hr@1.0.0.Laptop"
                }
              ]
            }
          },
          "manager": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr@1.0.0.Manager"
          },
          "email": {
            "type": "string",
            "description": "The instance identifier for this type"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "middleNames": {
            "type": "string"
          },
          "homeAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          },
          "ssn": {
            "default": "000-00-0000",
            "type": "string",
            "pattern": "\\\\d{3}-\\\\d{2}-\\\\{4}+"
          },
          "height": {
            "type": "number"
          },
          "dob": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "$class",
          "employeeId",
          "salary",
          "numDependents",
          "retired",
          "department",
          "officeAddress",
          "companyAssets",
          "email",
          "firstName",
          "lastName",
          "homeAddress",
          "ssn",
          "height",
          "dob",
          "nextOfKin"
        ]
      },
      "org.acme.hr@1.0.0.CompanyEvent": {
        "title": "CompanyEvent",
        "description": "An instance of org.acme.hr@1.0.0.CompanyEvent",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.CompanyEvent",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.CompanyEvent$",
            "description": "The class identifier for org.acme.hr@1.0.0.CompanyEvent"
          }
        },
        "required": [
          "$class"
        ]
      },
      "org.acme.hr@1.0.0.Onboarded": {
        "title": "Onboarded",
        "description": "An instance of org.acme.hr@1.0.0.Onboarded",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.Onboarded",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.Onboarded$",
            "description": "The class identifier for org.acme.hr@1.0.0.Onboarded"
          },
          "employee": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr@1.0.0.Employee"
          }
        },
        "required": [
          "$class",
          "employee"
        ]
      },
      "org.acme.hr@1.0.0.ChangeOfAddress": {
        "title": "ChangeOfAddress",
        "description": "An instance of org.acme.hr@1.0.0.ChangeOfAddress",
        "type": "object",
        "properties": {
          "$class": {
            "type": "string",
            "default": "org.acme.hr@1.0.0.ChangeOfAddress",
            "pattern": "^org\\\\.acme\\\\.hr@1\\\\.0\\\\.0\\\\.ChangeOfAddress$",
            "description": "The class identifier for org.acme.hr@1.0.0.ChangeOfAddress"
          },
          "Person": {
            "type": "string",
            "description": "The identifier of an instance of org.acme.hr@1.0.0.Person"
          },
          "newAddress": {
            "$ref": "#/components/schemas/org.acme.hr.base@1.0.0.Address"
          }
        },
        "required": [
          "$class",
          "Person",
          "newAddress"
        ]
      },
      "org.acme.hr@1.0.0.KinName": {
        "type": "string"
      },
      "org.acme.hr@1.0.0.KinTelephone": {
        "format": "date-time",
        "type": "string"
      }
    }
  },
  "paths": {
    "/equipment": {
      "summary": "Path used to manage the list of equipment.",
      "description": "The REST endpoint/path used to list and create zero or more \`equipment\` entities.  This path contains a \`GET\` and \`POST\` operation to perform the list and create tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/org.acme.hr@1.0.0.Equipment"
                  }
                }
              }
            },
            "description": "Successful response - returns an array of \`equipment\` entities."
          }
        },
        "operationId": "listEquipment",
        "summary": "List All Equipment",
        "description": "Gets a list of all \`equipment\` entities.",
        "tags": [
          "equipment"
        ]
      },
      "post": {
        "requestBody": {
          "description": "A new \`equipment\` to be created.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr@1.0.0.Equipment"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful response."
          }
        },
        "operationId": "createEquipment",
        "summary": "Create a Equipment",
        "description": "Creates a new instance of a \`equipment\`.",
        "tags": [
          "equipment"
        ]
      }
    },
    "/equipment/{serialNumber}": {
      "summary": "Path used to manage a single equipment.",
      "description": "The REST endpoint/path used to get, update, and delete single instances of a \`equipment\`.  This path contains \`GET\`, \`PUT\`, and \`DELETE\` operations used to perform the get, update, and delete tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/org.acme.hr@1.0.0.Equipment"
                }
              }
            },
            "description": "Successful response - returns a single \`equipment\`."
          }
        },
        "operationId": "getEquipment",
        "summary": "Get a equipment",
        "description": "Gets the details of a single instance of a \`equipment\`.",
        "tags": [
          "equipment"
        ]
      },
      "put": {
        "requestBody": {
          "description": "Updated \`equipment\` information.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr@1.0.0.Equipment"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Successful response."
          }
        },
        "operationId": "replaceEquipment",
        "summary": "Update a equipment",
        "description": "Updates an existing \`equipment\`.",
        "tags": [
          "equipment"
        ]
      },
      "delete": {
        "responses": {
          "204": {
            "description": "Successful response."
          }
        },
        "operationId": "deleteEquipment",
        "summary": "Delete a equipment",
        "description": "Deletes an existing \`equipment\`.",
        "tags": [
          "equipment"
        ]
      },
      "parameters": [
        {
          "name": "serialNumber",
          "description": "A unique identifier for a \`Equipment\`.",
          "schema": {
            "type": "string"
          },
          "in": "path",
          "required": true
        }
      ]
    },
    "/people": {
      "summary": "Path used to manage the list of people.",
      "description": "The REST endpoint/path used to list and create zero or more \`person\` entities.  This path contains a \`GET\` and \`POST\` operation to perform the list and create tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/org.acme.hr@1.0.0.Person"
                  }
                }
              }
            },
            "description": "Successful response - returns an array of \`person\` entities."
          }
        },
        "operationId": "listPeople",
        "summary": "List All People",
        "description": "Gets a list of all \`person\` entities.",
        "tags": [
          "people"
        ]
      },
      "post": {
        "requestBody": {
          "description": "A new \`person\` to be created.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr@1.0.0.Person"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful response."
          }
        },
        "operationId": "createPerson",
        "summary": "Create a Person",
        "description": "Creates a new instance of a \`person\`.",
        "tags": [
          "people"
        ]
      }
    },
    "/people/{email}": {
      "summary": "Path used to manage a single person.",
      "description": "The REST endpoint/path used to get, update, and delete single instances of a \`person\`.  This path contains \`GET\`, \`PUT\`, and \`DELETE\` operations used to perform the get, update, and delete tasks, respectively.",
      "get": {
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/org.acme.hr@1.0.0.Person"
                }
              }
            },
            "description": "Successful response - returns a single \`person\`."
          }
        },
        "operationId": "getPerson",
        "summary": "Get a person",
        "description": "Gets the details of a single instance of a \`person\`.",
        "tags": [
          "people"
        ]
      },
      "put": {
        "requestBody": {
          "description": "Updated \`person\` information.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/org.acme.hr@1.0.0.Person"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Successful response."
          }
        },
        "operationId": "replacePerson",
        "summary": "Update a person",
        "description": "Updates an existing \`person\`.",
        "tags": [
          "people"
        ]
      },
      "delete": {
        "responses": {
          "204": {
            "description": "Successful response."
          }
        },
        "operationId": "deletePerson",
        "summary": "Delete a person",
        "description": "Deletes an existing \`person\`.",
        "tags": [
          "people"
        ]
      },
      "parameters": [
        {
          "name": "email",
          "description": "A unique identifier for a \`Person\`.",
          "schema": {
            "type": "string"
          },
          "in": "path",
          "required": true
        }
      ]
    }
  }
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'plantuml' 1`] = `
{
  "key": "model.puml",
  "value": "@startuml
title
Model
endtitle
class org.acme.hr.base_1_0_0.State << (E,grey) >> {
   + MA
   + NY
   + CO
   + WA
   + IL
   + CA
}
org.acme.hr.base_1_0_0.State --|> concerto_1_0_0.Concept
class org.acme.hr.base_1_0_0.TShirtSizeType << (E,grey) >> {
   + SMALL
   + MEDIUM
   + LARGE
}
org.acme.hr.base_1_0_0.TShirtSizeType --|> concerto_1_0_0.Concept
class org.acme.hr.base_1_0_0.Address {
   + String street
   + String city
   + State state
   + String zipCode
   + String country
}
org.acme.hr.base_1_0_0.Address "1" *-- "1" org.acme.hr.base_1_0_0.State : state
org.acme.hr.base_1_0_0.Address --|> concerto_1_0_0.Concept
class org.acme.hr_1_0_0.Company {
   + String name
   + Address headquarters
   + CompanyProperties companyProperties
   + EmployeeDirectory employeeDirectory
   + EmployeeTShirtSizes employeeTShirtSizes
   + EmployeeProfiles employeeProfiles
   + EmployeeSocialSecurityNumbers employeeSocialSecurityNumbers
}
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr.base_1_0_0.Address : headquarters
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.CompanyProperties : companyProperties
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.EmployeeDirectory : employeeDirectory
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr.base_1_0_0.EmployeeTShirtSizes : employeeTShirtSizes
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.EmployeeProfiles : employeeProfiles
org.acme.hr_1_0_0.Company "1" *-- "1" org.acme.hr_1_0_0.EmployeeSocialSecurityNumbers : employeeSocialSecurityNumbers
org.acme.hr_1_0_0.Company --|> concerto_1_0_0.Concept
class org.acme.hr_1_0_0.Department << (E,grey) >> {
   + Sales
   + Marketing
   + Finance
   + HR
   + Engineering
   + Design
}
org.acme.hr_1_0_0.Department --|> concerto_1_0_0.Concept
class org.acme.hr_1_0_0.Equipment << (A,green) >> {
   + String serialNumber
}
org.acme.hr_1_0_0.Equipment --|> concerto_1_0_0.Asset
class org.acme.hr_1_0_0.LaptopMake << (E,grey) >> {
   + Apple
   + Microsoft
}
org.acme.hr_1_0_0.LaptopMake --|> concerto_1_0_0.Concept
class org.acme.hr_1_0_0.Laptop << (A,green) >> {
   + LaptopMake make
}
org.acme.hr_1_0_0.Laptop "1" *-- "1" org.acme.hr_1_0_0.LaptopMake : make
org.acme.hr_1_0_0.Laptop --|> org.acme.hr_1_0_0.Equipment
class org.acme.hr_1_0_0.Person << (P,lightblue) >> {
   + String email
   + String firstName
   + String lastName
   + String middleNames
   + Address homeAddress
   + String ssn
   + Double height
   + DateTime dob
   + NextOfKin nextOfKin
}
org.acme.hr_1_0_0.Person "1" *-- "1" org.acme.hr.base_1_0_0.Address : homeAddress
org.acme.hr_1_0_0.Person "1" *-- "1" org.acme.hr.base_1_0_0.SSN : ssn
org.acme.hr_1_0_0.Person "1" *-- "1" org.acme.hr_1_0_0.NextOfKin : nextOfKin
org.acme.hr_1_0_0.Person --|> concerto_1_0_0.Participant
class org.acme.hr_1_0_0.Employee << (P,lightblue) >> {
   + String employeeId
   + Long salary
   + Integer numDependents
   + Boolean retired
   + Department department
   + Address officeAddress
   + Equipment[] companyAssets
   + Manager manager
}
org.acme.hr_1_0_0.Employee "1" *-- "1" org.acme.hr_1_0_0.Department : department
org.acme.hr_1_0_0.Employee "1" *-- "1" org.acme.hr.base_1_0_0.Address : officeAddress
org.acme.hr_1_0_0.Employee "1" *-- "*" org.acme.hr_1_0_0.Equipment : companyAssets
org.acme.hr_1_0_0.Employee "1" o-- "1" org.acme.hr_1_0_0.Manager : manager
org.acme.hr_1_0_0.Employee --|> org.acme.hr_1_0_0.Person
class org.acme.hr_1_0_0.Contractor << (P,lightblue) >> {
   + Company company
   + Manager manager
}
org.acme.hr_1_0_0.Contractor "1" *-- "1" org.acme.hr_1_0_0.Company : company
org.acme.hr_1_0_0.Contractor "1" o-- "1" org.acme.hr_1_0_0.Manager : manager
org.acme.hr_1_0_0.Contractor --|> org.acme.hr_1_0_0.Person
class org.acme.hr_1_0_0.Manager << (P,lightblue) >> {
   + Person[] reports
}
org.acme.hr_1_0_0.Manager "1" o-- "*" org.acme.hr_1_0_0.Person : reports
org.acme.hr_1_0_0.Manager --|> org.acme.hr_1_0_0.Employee
class org.acme.hr_1_0_0.CompanyEvent {
}
org.acme.hr_1_0_0.CompanyEvent --|> concerto_1_0_0.Event
class org.acme.hr_1_0_0.Onboarded {
   + Employee employee
}
org.acme.hr_1_0_0.Onboarded "1" o-- "1" org.acme.hr_1_0_0.Employee : employee
org.acme.hr_1_0_0.Onboarded --|> org.acme.hr_1_0_0.CompanyEvent
class org.acme.hr_1_0_0.ChangeOfAddress << (T,yellow) >> {
   + Person Person
   + Address newAddress
}
org.acme.hr_1_0_0.ChangeOfAddress "1" o-- "1" org.acme.hr_1_0_0.Person : Person
org.acme.hr_1_0_0.ChangeOfAddress "1" *-- "1" org.acme.hr.base_1_0_0.Address : newAddress
org.acme.hr_1_0_0.ChangeOfAddress --|> concerto_1_0_0.Transaction
@enduml
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'protobuf' 1`] = `
{
  "key": "org.acme.hr.base.v1_0_0.proto",
  "value": "syntax = "proto3";

package org.acme.hr.base.v1_0_0;

import "google/protobuf/timestamp.proto";

enum State {
  State_CA = 0;
  State_CO = 1;
  State_IL = 2;
  State_MA = 3;
  State_NY = 4;
  State_WA = 5;
}

enum TShirtSizeType {
  TShirtSizeType_LARGE = 0;
  TShirtSizeType_MEDIUM = 1;
  TShirtSizeType_SMALL = 2;
}

message Address {
  string city = 1;
  string country = 2;
  optional State state = 3;
  string street = 4;
  string zipCode = 5;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'protobuf' 2`] = `
{
  "key": "org.acme.hr.v1_0_0.proto",
  "value": "syntax = "proto3";

package org.acme.hr.v1_0_0;

import "google/protobuf/timestamp.proto";
import "org.acme.hr.base.v1_0_0.proto";

message Company {
  optional map<string, string> CompanyProperties = 1;
  optional map<SSN, Employee> EmployeeDirectory = 2;
  optional map<string, Concept> EmployeeProfiles = 3;
  optional map<string, SSN> EmployeeSocialSecurityNumbers = 4;
  optional map<SSN, TShirtSizeType> EmployeeTShirtSizes = 5;
  Address headquarters = 6;
  string name = 7;
}

enum Department {
  Department_Design = 0;
  Department_Engineering = 1;
  Department_Finance = 2;
  Department_HR = 3;
  Department_Marketing = 4;
  Department_Sales = 5;
}

message _Subclasses_of_class_Equipment {
  oneof _class_oneof_Equipment {
    Laptop _subclass_of_class_Equipment_Laptop = 1;
  }
}

enum LaptopMake {
  LaptopMake_Apple = 0;
  LaptopMake_Microsoft = 1;
}

message Laptop {
  LaptopMake make = 1;
  string serialNumber = 2;
}

message _Subclasses_of_class_Person {
  oneof _class_oneof_Person {
    Contractor _subclass_of_class_Person_Contractor = 1;
    Employee _subclass_of_class_Person_Employee = 2;
    Manager _subclass_of_class_Person_Manager = 3;
  }
}

message Employee {
  repeated _Subclasses_of_class_Equipment companyAssets = 1;
  Department department = 2;
  google.protobuf.Timestamp dob = 3;
  string email = 4;
  string employeeId = 5;
  string firstName = 6;
  double height = 7;
  Address homeAddress = 8;
  string lastName = 9;
  optional string manager = 10;
  optional string middleNames = 11;
  map<KinName, KinTelephone> NextOfKin = 12;
  sint64 numDependents = 13;
  Address officeAddress = 14;
  bool retired = 15;
  sint64 salary = 16;
  string ssn = 17;
}

message _Subclasses_of_class_Employee {
  oneof _class_oneof_Employee {
    Employee _subclass_of_class_Employee_Employee = 1;
    Manager _subclass_of_class_Employee_Manager = 2;
  }
}

message Contractor {
  Company company = 1;
  google.protobuf.Timestamp dob = 2;
  string email = 3;
  string firstName = 4;
  double height = 5;
  Address homeAddress = 6;
  string lastName = 7;
  optional string manager = 8;
  optional string middleNames = 9;
  map<KinName, KinTelephone> NextOfKin = 10;
  string ssn = 11;
}

message Manager {
  repeated _Subclasses_of_class_Equipment companyAssets = 1;
  Department department = 2;
  google.protobuf.Timestamp dob = 3;
  string email = 4;
  string employeeId = 5;
  string firstName = 6;
  double height = 7;
  Address homeAddress = 8;
  string lastName = 9;
  optional string manager = 10;
  optional string middleNames = 11;
  map<KinName, KinTelephone> NextOfKin = 12;
  sint64 numDependents = 13;
  Address officeAddress = 14;
  repeated string reports = 15;
  bool retired = 16;
  sint64 salary = 17;
  string ssn = 18;
}

message CompanyEvent {
}

message _Subclasses_of_class_CompanyEvent {
  oneof _class_oneof_CompanyEvent {
    CompanyEvent _subclass_of_class_CompanyEvent_CompanyEvent = 1;
    Onboarded _subclass_of_class_CompanyEvent_Onboarded = 2;
  }
}

message Onboarded {
  string employee = 1;
}

message ChangeOfAddress {
  Address newAddress = 1;
  string Person = 2;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'rust' 1`] = `
{
  "key": "mod.rs",
  "value": "#[allow(unused_imports)]
pub mod concerto_1_0_0;
#[allow(unused_imports)]
pub mod concerto;
#[allow(unused_imports)]
pub mod org_acme_hr_base_1_0_0;
#[allow(unused_imports)]
pub mod org_acme_hr_1_0_0;
#[allow(unused_imports)]
pub mod utils;
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'rust' 2`] = `
{
  "key": "utils.rs",
  "value": "use chrono::{ DateTime, TimeZone, Utc };
use serde::{ Deserialize, Serialize, Deserializer, Serializer };
   
pub fn serialize_datetime_option<S>(datetime: &Option<chrono::DateTime<Utc>>, serializer: S) -> Result<S::Ok, S::Error>
where
   S: Serializer,
{
   match datetime {
      Some(dt) => {
         serialize_datetime(&dt, serializer)
      },
      _ => unreachable!(),
   }
}

pub fn deserialize_datetime_option<'de, D>(deserializer: D) -> Result<Option<chrono::DateTime<Utc>>, D::Error>
where
   D: Deserializer<'de>,
{
   match deserialize_datetime(deserializer) {
      Ok(result)=>Ok(Some(result)),
      Err(error) => Err(error),
   }
}

pub fn deserialize_datetime<'de, D>(deserializer: D) -> Result<chrono::DateTime<Utc>, D::Error>
where
   D: Deserializer<'de>,
{
   let datetime_str = String::deserialize(deserializer)?;
   Utc.datetime_from_str(&datetime_str, "%Y-%m-%dT%H:%M:%S%.3f%Z").map_err(serde::de::Error::custom)
}
   
pub fn serialize_datetime<S>(datetime: &chrono::DateTime<Utc>, serializer: S) -> Result<S::Ok, S::Error>
where
   S: Serializer,
{
   let datetime_str = datetime.format("%+").to_string();
   serializer.serialize_str(&datetime_str)
}
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'rust' 3`] = `
{
  "key": "concerto_1_0_0.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub struct Concept {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Asset {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Participant {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Transaction {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Event {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'rust' 4`] = `
{
  "key": "concerto.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub struct Concept {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Asset {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Participant {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Transaction {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Event {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'rust' 5`] = `
{
  "key": "org_acme_hr_base_1_0_0.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::concerto_1_0_0::*;
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub enum State {
   #[allow(non_camel_case_types)]
   MA,
   #[allow(non_camel_case_types)]
   NY,
   #[allow(non_camel_case_types)]
   CO,
   #[allow(non_camel_case_types)]
   WA,
   #[allow(non_camel_case_types)]
   IL,
   #[allow(non_camel_case_types)]
   CA,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum TShirtSizeType {
   #[allow(non_camel_case_types)]
   SMALL,
   #[allow(non_camel_case_types)]
   MEDIUM,
   #[allow(non_camel_case_types)]
   LARGE,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Address {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "street",
   )]
   pub street: String,
   
   #[serde(
      rename = "city",
   )]
   pub city: String,
   
   #[serde(
      rename = "state",
      skip_serializing_if = "Option::is_none",
   )]
   pub state: Option<State>,
   
   #[serde(
      rename = "zipCode",
   )]
   pub zip_code: String,
   
   #[serde(
      rename = "country",
   )]
   pub country: String,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'rust' 6`] = `
{
  "key": "org_acme_hr_1_0_0.rs",
  "value": "use serde::{ Deserialize, Serialize };
use chrono::{ DateTime, TimeZone, Utc };
   
use crate::org_acme_hr_base_1_0_0::*;
use crate::concerto_1_0_0::*;
use crate::utils::*;
   
#[derive(Debug, Serialize, Deserialize)]
pub struct Company {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "name",
   )]
   pub name: String,
   
   #[serde(
      rename = "headquarters",
   )]
   pub headquarters: Address,
   
   #[serde(
      rename = "companyProperties",
      skip_serializing_if = "Option::is_none",
   )]
   pub company_properties: Option<CompanyProperties>,
   
   #[serde(
      rename = "employeeDirectory",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_directory: Option<EmployeeDirectory>,
   
   #[serde(
      rename = "employeeTShirtSizes",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_t_shirt_sizes: Option<EmployeeTShirtSizes>,
   
   #[serde(
      rename = "employeeProfiles",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_profiles: Option<EmployeeProfiles>,
   
   #[serde(
      rename = "employeeSocialSecurityNumbers",
      skip_serializing_if = "Option::is_none",
   )]
   pub employee_social_security_numbers: Option<EmployeeSocialSecurityNumbers>,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum Department {
   #[allow(non_camel_case_types)]
   Sales,
   #[allow(non_camel_case_types)]
   Marketing,
   #[allow(non_camel_case_types)]
   Finance,
   #[allow(non_camel_case_types)]
   HR,
   #[allow(non_camel_case_types)]
   Engineering,
   #[allow(non_camel_case_types)]
   Design,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Equipment {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "serialNumber",
   )]
   pub serial_number: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum LaptopMake {
   #[allow(non_camel_case_types)]
   Apple,
   #[allow(non_camel_case_types)]
   Microsoft,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Laptop {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "make",
   )]
   pub make: LaptopMake,
   
   #[serde(
      rename = "serialNumber",
   )]
   pub serial_number: String,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Person {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Employee {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "employeeId",
   )]
   pub employee_id: String,
   
   #[serde(
      rename = "salary",
   )]
   pub salary: u64,
   
   #[serde(
      rename = "numDependents",
   )]
   pub num_dependents: Integer,
   
   #[serde(
      rename = "retired",
   )]
   pub retired: bool,
   
   #[serde(
      rename = "department",
   )]
   pub department: Department,
   
   #[serde(
      rename = "officeAddress",
   )]
   pub office_address: Address,
   
   #[serde(
      rename = "companyAssets",
   )]
   pub company_assets: Vec<Equipment>,
   
   #[serde(rename = "manager")]
   pub manager: Option<Manager>,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Contractor {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "company",
   )]
   pub company: Company,
   
   #[serde(rename = "manager")]
   pub manager: Option<Manager>,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Manager {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(rename = "reports")]
   pub reports: Option<Vec<Person>>,
   
   #[serde(
      rename = "employeeId",
   )]
   pub employee_id: String,
   
   #[serde(
      rename = "salary",
   )]
   pub salary: u64,
   
   #[serde(
      rename = "numDependents",
   )]
   pub num_dependents: Integer,
   
   #[serde(
      rename = "retired",
   )]
   pub retired: bool,
   
   #[serde(
      rename = "department",
   )]
   pub department: Department,
   
   #[serde(
      rename = "officeAddress",
   )]
   pub office_address: Address,
   
   #[serde(
      rename = "companyAssets",
   )]
   pub company_assets: Vec<Equipment>,
   
   #[serde(rename = "manager")]
   pub manager: Option<Manager>,
   
   #[serde(
      rename = "email",
   )]
   pub email: String,
   
   #[serde(
      rename = "firstName",
   )]
   pub first_name: String,
   
   #[serde(
      rename = "lastName",
   )]
   pub last_name: String,
   
   #[serde(
      rename = "middleNames",
      skip_serializing_if = "Option::is_none",
   )]
   pub middle_names: Option<String>,
   
   #[serde(
      rename = "homeAddress",
   )]
   pub home_address: Address,
   
   #[serde(
      rename = "ssn",
   )]
   pub ssn: String,
   
   #[serde(
      rename = "height",
   )]
   pub height: f64,
   
   #[serde(
      rename = "dob",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub dob: DateTime<Utc>,
   
   #[serde(
      rename = "nextOfKin",
   )]
   pub next_of_kin: NextOfKin,
   
   #[serde(
      rename = "$identifier",
   )]
   pub _identifier: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct CompanyEvent {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Onboarded {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(rename = "employee")]
   pub employee: Employee,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct ChangeOfAddress {
   #[serde(
      rename = "$class",
   )]
   pub _class: String,
   
   #[serde(rename = "Person")]
   pub person: Person,
   
   #[serde(
      rename = "newAddress",
   )]
   pub new_address: Address,
   
   #[serde(
      rename = "$timestamp",
      serialize_with = "serialize_datetime",
      deserialize_with = "deserialize_datetime",
   )]
   pub _timestamp: DateTime<Utc>,
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'typescript' 1`] = `
{
  "key": "concerto@1.0.0.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: concerto@1.0.0

// imports

// Warning: Beware of circular dependencies when modifying these imports
import type {
	State,
	TShirtSizeType,
	IAddress
} from './org.acme.hr.base@1.0.0';
import type {
	ICompany,
	Department,
	LaptopMake
} from './org.acme.hr@1.0.0';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	IEquipment
} from './org.acme.hr@1.0.0';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	IPerson
} from './org.acme.hr@1.0.0';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	IChangeOfAddress
} from './org.acme.hr@1.0.0';

// Warning: Beware of circular dependencies when modifying these imports
import type {
	ICompanyEvent
} from './org.acme.hr@1.0.0';

// interfaces
export interface IConcept {
   $class: string;
}

export type ConceptUnion = IAddress | 
ICompany;

export interface IAsset extends IConcept {
   $identifier: string;
}

export type AssetUnion = IEquipment;

export interface IParticipant extends IConcept {
   $identifier: string;
}

export type ParticipantUnion = IPerson;

export interface ITransaction extends IConcept {
   $timestamp: Date;
}

export type TransactionUnion = IChangeOfAddress;

export interface IEvent extends IConcept {
   $timestamp: Date;
}

export type EventUnion = ICompanyEvent;

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'typescript' 2`] = `
{
  "key": "concerto.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: concerto

// imports

// interfaces
export interface IConcept {
   $class: string;
}

export interface IAsset extends IConcept {
   $identifier: string;
}

export interface IParticipant extends IConcept {
   $identifier: string;
}

export interface ITransaction extends IConcept {
}

export interface IEvent extends IConcept {
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'typescript' 3`] = `
{
  "key": "org.acme.hr.base@1.0.0.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: org.acme.hr.base@1.0.0

// imports
import {IConcept} from './concerto@1.0.0';

// interfaces
export enum State {
   MA = 'MA',
   NY = 'NY',
   CO = 'CO',
   WA = 'WA',
   IL = 'IL',
   CA = 'CA',
}

export enum TShirtSizeType {
   SMALL = 'SMALL',
   MEDIUM = 'MEDIUM',
   LARGE = 'LARGE',
}

export type EmployeeTShirtSizes = Map<string, ITShirtSizeType>;

export interface IAddress extends IConcept {
   street: string;
   city: string;
   state?: State;
   zipCode: string;
   country: string;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'typescript' 4`] = `
{
  "key": "org.acme.hr@1.0.0.ts",
  "value": "/* eslint-disable @typescript-eslint/no-empty-interface */
// Generated code for namespace: org.acme.hr@1.0.0

// imports

// Warning: Beware of circular dependencies when modifying these imports

// Warning: Beware of circular dependencies when modifying these imports

// Warning: Beware of circular dependencies when modifying these imports

// Warning: Beware of circular dependencies when modifying these imports
import {IAddress,IEmployeeTShirtSizes,ISSN} from './org.acme.hr.base@1.0.0';
import {IConcept,IAsset,IParticipant,IEvent,ITransaction} from './concerto@1.0.0';

// interfaces
export type CompanyProperties = Map<string, string>;

export type EmployeeLoginTimes = Map<string, Date>;

export type EmployeeSocialSecurityNumbers = Map<string, string>;

export type NextOfKin = Map<string, Date>;

export type EmployeeProfiles = Map<string, IConcept>;

export type EmployeeDirectory = Map<string, IEmployee>;

export interface ICompany extends IConcept {
   name: string;
   headquarters: IAddress;
   companyProperties?: CompanyProperties;
   employeeDirectory?: EmployeeDirectory;
   employeeTShirtSizes?: EmployeeTShirtSizes;
   employeeProfiles?: EmployeeProfiles;
   employeeSocialSecurityNumbers?: EmployeeSocialSecurityNumbers;
}

export enum Department {
   Sales = 'Sales',
   Marketing = 'Marketing',
   Finance = 'Finance',
   HR = 'HR',
   Engineering = 'Engineering',
   Design = 'Design',
}

export interface IEquipment extends IAsset {
   serialNumber: string;
}

export type EquipmentUnion = ILaptop;

export enum LaptopMake {
   Apple = 'Apple',
   Microsoft = 'Microsoft',
}

export interface ILaptop extends IEquipment {
   make: LaptopMake;
}

export interface IPerson extends IParticipant {
   email: string;
   firstName: string;
   lastName: string;
   middleNames?: string;
   homeAddress: IAddress;
   ssn: string;
   height: number;
   dob: Date;
   nextOfKin: NextOfKin;
}

export type PersonUnion = IEmployee | 
IContractor;

export interface IEmployee extends IPerson {
   employeeId: string;
   salary: number;
   numDependents: number;
   retired: boolean;
   department: Department;
   officeAddress: IAddress;
   companyAssets: IEquipment[];
   manager?: IManager;
}

export type EmployeeUnion = IManager;

export interface IContractor extends IPerson {
   company: ICompany;
   manager?: IManager;
}

export interface IManager extends IEmployee {
   reports?: IPerson[];
}

export interface ICompanyEvent extends IEvent {
}

export type CompanyEventUnion = IOnboarded;

export interface IOnboarded extends ICompanyEvent {
   employee: IEmployee;
}

export interface IChangeOfAddress extends ITransaction {
   Person: IPerson;
   newAddress: IAddress;
}

",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'vocabulary' 1`] = `
{
  "key": "org.acme.hr.base@1.0.0_en.voc",
  "value": "#Generated vocabulary for namespace: org.acme.hr.base@1.0.0
locale: en
namespace: org.acme.hr.base@1.0.0
declarations:
  - State: State
    properties:
      - MA: MA of the State
      - NY: NY of the State
      - CO: CO of the State
      - WA: WA of the State
      - IL: IL of the State
      - CA: CA of the State
  - TShirtSizeType: TShirt Size Type
    properties:
      - SMALL: SMALL of the TShirt Size Type
      - MEDIUM: MEDIUM of the TShirt Size Type
      - LARGE: LARGE of the TShirt Size Type
  - Address: Address
    properties:
      - street: Street of the Address
      - city: City of the Address
      - state: State of the Address
      - zipCode: Zip Code of the Address
      - country: Country of the Address
  - Time: Time
  - SSN: SSN
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'vocabulary' 2`] = `
{
  "key": "org.acme.hr@1.0.0_en.voc",
  "value": "#Generated vocabulary for namespace: org.acme.hr@1.0.0
locale: en
namespace: org.acme.hr@1.0.0
declarations:
  - Company: Company
    properties:
      - name: Name of the Company
      - headquarters: Headquarters of the Company
      - companyProperties: Company Properties of the Company
      - employeeDirectory: Employee Directory of the Company
      - employeeTShirtSizes: Employee TShirt Sizes of the Company
      - employeeProfiles: Employee Profiles of the Company
      - employeeSocialSecurityNumbers: Employee Social Security Numbers of the Company
  - Department: Department
    properties:
      - Sales: Sales of the Department
      - Marketing: Marketing of the Department
      - Finance: Finance of the Department
      - HR: HR of the Department
      - Engineering: Engineering of the Department
      - Design: Design of the Department
  - Equipment: Equipment
    properties:
      - serialNumber: Serial Number of the Equipment
  - LaptopMake: Laptop Make
    properties:
      - Apple: Apple of the Laptop Make
      - Microsoft: Microsoft of the Laptop Make
  - Laptop: Laptop
    properties:
      - make: Make of the Laptop
  - Person: Person
    properties:
      - email: Email of the Person
      - firstName: First Name of the Person
      - lastName: Last Name of the Person
      - middleNames: Middle Names of the Person
      - homeAddress: Home Address of the Person
      - ssn: Ssn of the Person
      - height: Height of the Person
      - dob: Dob of the Person
      - nextOfKin: Next Of Kin of the Person
  - Employee: Employee
    properties:
      - employeeId: Employee Id of the Employee
      - salary: Salary of the Employee
      - numDependents: Num Dependents of the Employee
      - retired: Retired of the Employee
      - department: Department of the Employee
      - officeAddress: Office Address of the Employee
      - companyAssets: Company Assets of the Employee
      - manager: Manager of the Employee
  - Contractor: Contractor
    properties:
      - company: Company of the Contractor
      - manager: Manager of the Contractor
  - Manager: Manager
    properties:
      - reports: Reports of the Manager
  - CompanyEvent: Company Event
  - Onboarded: Onboarded
    properties:
      - employee: Employee of the Onboarded
  - ChangeOfAddress: Change Of Address
    properties:
      - Person: Person of the Change Of Address
      - newAddress: New Address of the Change Of Address
  - KinName: Kin Name
  - KinTelephone: Kin Telephone
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'xmlschema' 1`] = `
{
  "key": "concerto@1.0.0.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:concerto="concerto" targetNamespace="concerto" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
>
<xs:complexType name="Concept">
   <xs:sequence>
   </xs:sequence>
</xs:complexType>
<xs:element name="Concept" type="concerto:Concept"/>
<xs:complexType name="Asset">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Asset" type="concerto:Asset"/>
<xs:complexType name="Participant">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Participant" type="concerto:Participant"/>
<xs:complexType name="Transaction">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_timestamp" type="xs:dateTime"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Transaction" type="concerto:Transaction"/>
<xs:complexType name="Event">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_timestamp" type="xs:dateTime"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Event" type="concerto:Event"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'xmlschema' 2`] = `
{
  "key": "concerto.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:concerto="concerto" targetNamespace="concerto" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
>
<xs:complexType name="Concept">
   <xs:sequence>
   </xs:sequence>
</xs:complexType>
<xs:element name="Concept" type="concerto:Concept"/>
<xs:complexType name="Asset">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Asset" type="concerto:Asset"/>
<xs:complexType name="Participant">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="_identifier" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Participant" type="concerto:Participant"/>
<xs:complexType name="Transaction">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Transaction" type="concerto:Transaction"/>
<xs:complexType name="Event">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Event" type="concerto:Event"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'xmlschema' 3`] = `
{
  "key": "org.acme.hr.base@1.0.0.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:org.acme.hr.base="org.acme.hr.base" targetNamespace="org.acme.hr.base" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:concerto="concerto"
>
<xs:import namespace="concerto" schemaLocation="concerto@1.0.0.xsd"/>
<xs:simpleType name="State">
   <xs:restriction base="xs:string">
      <xs:enumeration value="MA"/>
      <xs:enumeration value="NY"/>
      <xs:enumeration value="CO"/>
      <xs:enumeration value="WA"/>
      <xs:enumeration value="IL"/>
      <xs:enumeration value="CA"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="State" type="org.acme.hr.base:State"/>
<xs:simpleType name="TShirtSizeType">
   <xs:restriction base="xs:string">
      <xs:enumeration value="SMALL"/>
      <xs:enumeration value="MEDIUM"/>
      <xs:enumeration value="LARGE"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="TShirtSizeType" type="org.acme.hr.base:TShirtSizeType"/>
<xs:complexType name="Address">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="street" type="xs:string"/>
      <xs:element name="city" type="xs:string"/>
      <xs:element name="state" type="org.acme.hr.base:State"/>
      <xs:element name="zipCode" type="xs:string"/>
      <xs:element name="country" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Address" type="org.acme.hr.base:Address"/>
</xs:schema>
",
}
`;

exports[`codegen #formats check we can convert all formats from namespace versioned CTO, format 'xmlschema' 4`] = `
{
  "key": "org.acme.hr@1.0.0.xsd",
  "value": "<?xml version="1.0"?>
<xs:schema xmlns:org.acme.hr="org.acme.hr" targetNamespace="org.acme.hr" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:org.acme.hr.base="org.acme.hr.base"
xmlns:concerto="concerto"
>
<xs:import namespace="org.acme.hr.base" schemaLocation="org.acme.hr.base@1.0.0.xsd"/>
<xs:import namespace="concerto" schemaLocation="concerto@1.0.0.xsd"/>
<xs:complexType name="Company">
   <xs:complexContent>
   <xs:extension base="concerto:Concept">
   <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="headquarters" type="org.acme.hr.base:Address"/>
      <xs:element name="companyProperties" type="org.acme.hr:CompanyProperties"/>
      <xs:element name="employeeDirectory" type="org.acme.hr:EmployeeDirectory"/>
      <xs:element name="employeeTShirtSizes" type="org.acme.hr.base:EmployeeTShirtSizes"/>
      <xs:element name="employeeProfiles" type="org.acme.hr:EmployeeProfiles"/>
      <xs:element name="employeeSocialSecurityNumbers" type="org.acme.hr:EmployeeSocialSecurityNumbers"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Company" type="org.acme.hr:Company"/>
<xs:simpleType name="Department">
   <xs:restriction base="xs:string">
      <xs:enumeration value="Sales"/>
      <xs:enumeration value="Marketing"/>
      <xs:enumeration value="Finance"/>
      <xs:enumeration value="HR"/>
      <xs:enumeration value="Engineering"/>
      <xs:enumeration value="Design"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="Department" type="org.acme.hr:Department"/>
<xs:complexType name="Equipment">
   <xs:complexContent>
   <xs:extension base="concerto:Asset">
   <xs:sequence>
      <xs:element name="serialNumber" type="xs:string"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Equipment" type="org.acme.hr:Equipment"/>
<xs:simpleType name="LaptopMake">
   <xs:restriction base="xs:string">
      <xs:enumeration value="Apple"/>
      <xs:enumeration value="Microsoft"/>
   </xs:restriction>
</xs:simpleType>
<xs:element name="LaptopMake" type="org.acme.hr:LaptopMake"/>
<xs:complexType name="Laptop">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Equipment">
   <xs:sequence>
      <xs:element name="make" type="org.acme.hr:LaptopMake"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Laptop" type="org.acme.hr:Laptop"/>
<xs:complexType name="Person">
   <xs:complexContent>
   <xs:extension base="concerto:Participant">
   <xs:sequence>
      <xs:element name="email" type="xs:string"/>
      <xs:element name="firstName" type="xs:string"/>
      <xs:element name="lastName" type="xs:string"/>
      <xs:element name="middleNames" type="xs:string"/>
      <xs:element name="homeAddress" type="org.acme.hr.base:Address"/>
      <xs:element name="ssn" type="xs:string"/>
      <xs:element name="height" type="xs:double"/>
      <xs:element name="dob" type="xs:dateTime"/>
      <xs:element name="nextOfKin" type="org.acme.hr:NextOfKin"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Person" type="org.acme.hr:Person"/>
<xs:complexType name="Employee">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Person">
   <xs:sequence>
      <xs:element name="employeeId" type="xs:string"/>
      <xs:element name="salary" type="xs:long"/>
      <xs:element name="numDependents" type="xs:integer"/>
      <xs:element name="retired" type="xs:boolean"/>
      <xs:element name="department" type="org.acme.hr:Department"/>
      <xs:element name="officeAddress" type="org.acme.hr.base:Address"/>
      <xs:element name="companyAssets" type="org.acme.hr:Equipment" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="manager" type="org.acme.hr:Manager"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Employee" type="org.acme.hr:Employee"/>
<xs:complexType name="Contractor">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Person">
   <xs:sequence>
      <xs:element name="company" type="org.acme.hr:Company"/>
      <xs:element name="manager" type="org.acme.hr:Manager"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Contractor" type="org.acme.hr:Contractor"/>
<xs:complexType name="Manager">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:Employee">
   <xs:sequence>
      <xs:element name="reports" type="org.acme.hr:Person" minOccurs="0" maxOccurs="unbounded"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Manager" type="org.acme.hr:Manager"/>
<xs:complexType name="CompanyEvent">
   <xs:complexContent>
   <xs:extension base="concerto:Event">
   <xs:sequence>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="CompanyEvent" type="org.acme.hr:CompanyEvent"/>
<xs:complexType name="Onboarded">
   <xs:complexContent>
   <xs:extension base="org.acme.hr:CompanyEvent">
   <xs:sequence>
      <xs:element name="employee" type="org.acme.hr:Employee"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="Onboarded" type="org.acme.hr:Onboarded"/>
<xs:complexType name="ChangeOfAddress">
   <xs:complexContent>
   <xs:extension base="concerto:Transaction">
   <xs:sequence>
      <xs:element name="Person" type="org.acme.hr:Person"/>
      <xs:element name="newAddress" type="org.acme.hr.base:Address"/>
   </xs:sequence>
   </xs:extension>
   </xs:complexContent>
</xs:complexType>
<xs:element name="ChangeOfAddress" type="org.acme.hr:ChangeOfAddress"/>
</xs:schema>
",
}
`;
